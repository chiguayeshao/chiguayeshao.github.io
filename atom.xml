<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SunleDog</title>
  
  <subtitle>SunleDog</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-07-30T09:26:22.019Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Xiaotian Ye</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JavaScript 模拟实现call apply bind方法</title>
    <link href="http://example.com/2022/06/30/JavaScript%20%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%20apply%20bind%E6%96%B9%E6%B3%95/"/>
    <id>http://example.com/2022/06/30/JavaScript%20%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%20apply%20bind%E6%96%B9%E6%B3%95/</id>
    <published>2022-06-30T10:21:56.000Z</published>
    <updated>2022-07-30T09:26:22.019Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-模拟实现-call-apply-bind-方法"><a href="#JavaScript-模拟实现-call-apply-bind-方法" class="headerlink" title="JavaScript 模拟实现 call apply bind 方法"></a>JavaScript 模拟实现 call apply bind 方法</h1><p>首先来说下这三个的区别：</p><ul><li><code>call</code> <code>apply</code>都是为了解决 this 的指向，默认第一参数是 this 的指向，剩下的参数是函数形参，<code>call</code>接收的形参是一个列表用逗号隔开，<code>apply</code>接收的是一个参数数组。</li><li><code>call</code> <code>apply</code>改变函数的 this 指向以后立马执行该函数，而<code>bind</code>是返回一个绑定上下文的新函数，后续再执行。</li><li>bind 函数返回的新函数不可以再通过 apply call 改变它的 this 指向。</li></ul><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.call(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">// fuck 24 1; 立即执行</span></span><br><span class="line">getValue.apply(a, [<span class="string">&quot;li&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">// li 24 1；立即执行</span></span><br><span class="line">getValue.bind(a)(<span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">// fuck 24 1；(&#x27;fuck&#x27;, &#x27;24&#x27;)这部分才是执行函数</span></span><br><span class="line">getValue.bind(a)([<span class="string">&quot;li&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">// [&#x27;li&#x27;, &#x27;24&#x27;] undefined 1；([&#x27;li&#x27;, &#x27;24&#x27;])才是执行函数</span></span><br></pre></td></tr></table></figure><h2 id="模拟实现-call"><a href="#模拟实现-call" class="headerlink" title="模拟实现 call"></a>模拟实现 call</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="comment">// 给 context 添加一个属性</span></span><br><span class="line">  <span class="comment">// getValue.call(a, &#x27;fuck&#x27;, &#x27;24&#x27;) =&gt; a.fn = getValue</span></span><br><span class="line">  context.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="comment">// 将 context 后面的参数取出来</span></span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// getValue.call(a, &#x27;fuck&#x27;, &#x27;24&#x27;) =&gt; a.fn(&#x27;fuck&#x27;, &#x27;24&#x27;)</span></span><br><span class="line">  <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">  <span class="comment">// 删除 fn</span></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>测试一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myCall(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure><h2 id="模拟实现-apply"><a href="#模拟实现-apply" class="headerlink" title="模拟实现 apply"></a>模拟实现 apply</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">    result = context.fn(...arguments[<span class="number">1</span>]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>测试一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myApply(a, [<span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure><h2 id="模拟实现-bind"><a href="#模拟实现-bind" class="headerlink" title="模拟实现 bind"></a>模拟实现 bind</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> <span class="keyword">instanceof</span> F) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> _this(...args, ...arguments);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _this.apply(context, args.concat(...arguments));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>测试一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myBind(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>)(); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-模拟实现-call-apply-bind-方法&quot;&gt;&lt;a href=&quot;#JavaScript-模拟实现-call-apply-bind-方法&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 模拟实现 call apply bind 方法&quot;&gt;&lt;/a&gt;JavaScript 模拟实现 call apply bind 方法&lt;/h1&gt;&lt;p&gt;首先来说下这三个的区别：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;call&lt;/code&gt; &lt;code&gt;apply&lt;/code&gt;都是为了解决 this 的指向，默认第一参数是 this 的指向，剩下的参数是函数形参，&lt;code&gt;call&lt;/code&gt;接收的形参是一个列表用逗号隔开，&lt;code&gt;apply&lt;/code&gt;接收的是一个参数数组。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;call&lt;/code&gt; &lt;code&gt;apply&lt;/code&gt;改变函数的 this 指向以后立马执行该函数，而&lt;code&gt;bind&lt;/code&gt;是返回一个绑定上下文的新函数，后续再执行。&lt;/li&gt;
&lt;li&gt;bind 函数返回的新函数不可以再通过 apply call 改变它的 this 指向。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的构造02</title>
    <link href="http://example.com/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A002/"/>
    <id>http://example.com/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A002/</id>
    <published>2022-03-13T09:11:39.000Z</published>
    <updated>2022-07-29T08:50:33.151Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Leetcode-二叉树的构造-02"><a href="#Leetcode-二叉树的构造-02" class="headerlink" title="Leetcode 二叉树的构造 02"></a>Leetcode 二叉树的构造 02</h1><h2 id="前序-后序-构造二叉树"><a href="#前序-后序-构造二叉树" class="headerlink" title="前序+后序 构造二叉树"></a>前序+后序 构造二叉树</h2><p>只能确定根节点，但是不能确定左右子树，因此答案不唯一</p><p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）</a></p><p>解题流程：</p><p>1、首先把前序遍历结果的第一个元素或者后序遍历结果的最后一个元素确定为根节点的值。</p><p>2、然后把前序遍历结果的第二个元素作为左子树的根节点的值。</p><span id="more"></span><p>3、在后序遍历结果中寻找左子树根节点的值，从而确定了左子树的索引边界，进而确定右子树的索引边界，递归构造左右子树即可。</p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">preorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">postorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> constructFromPrePost = <span class="function"><span class="keyword">function</span> (<span class="params">preorder, postorder</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 根左右</span></span><br><span class="line">  <span class="comment">// 左右根</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">preorder, preStart, preEnd, postorder, postStart, postEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (preStart &gt; preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (preStart === preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(preorder[preStart]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前序遍历数组的第一个元素为根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = preorder[preStart];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到左子树的根节点</span></span><br><span class="line">    <span class="comment">// 左子树的根节点为前序遍历数组中的第二个元素（左子树可能为null，因此该元素可能是右子树的根节点，因此本题答案不唯一）</span></span><br><span class="line">    <span class="keyword">let</span> leftVal = preorder[preStart + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到左子树根节点在后续遍历数组中的位置</span></span><br><span class="line">    <span class="keyword">let</span> leftIndex = postorder.indexOf(leftVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 左子树数组长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = leftIndex - postStart + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    root.left = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + <span class="number">1</span>,</span><br><span class="line">      preStart + leftSize,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart,</span><br><span class="line">      leftIndex</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    root.right = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + leftSize + <span class="number">1</span>,</span><br><span class="line">      preEnd,</span><br><span class="line">      postorder,</span><br><span class="line">      leftIndex + <span class="number">1</span>,</span><br><span class="line">      postEnd - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    preorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    preorder.length - <span class="number">1</span>,</span><br><span class="line">    postorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    postorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Leetcode-二叉树的构造-02&quot;&gt;&lt;a href=&quot;#Leetcode-二叉树的构造-02&quot; class=&quot;headerlink&quot; title=&quot;Leetcode 二叉树的构造 02&quot;&gt;&lt;/a&gt;Leetcode 二叉树的构造 02&lt;/h1&gt;&lt;h2 id=&quot;前序-后序-构造二叉树&quot;&gt;&lt;a href=&quot;#前序-后序-构造二叉树&quot; class=&quot;headerlink&quot; title=&quot;前序+后序 构造二叉树&quot;&gt;&lt;/a&gt;前序+后序 构造二叉树&lt;/h2&gt;&lt;p&gt;只能确定根节点，但是不能确定左右子树，因此答案不唯一&lt;/p&gt;
&lt;p&gt;题号：&lt;a href=&quot;https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/&quot;&gt;105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;解题流程：&lt;/p&gt;
&lt;p&gt;1、首先把前序遍历结果的第一个元素或者后序遍历结果的最后一个元素确定为根节点的值。&lt;/p&gt;
&lt;p&gt;2、然后把前序遍历结果的第二个元素作为左子树的根节点的值。&lt;/p&gt;</summary>
    
    
    
    <category term="Leetcode" scheme="http://example.com/categories/Leetcode/"/>
    
    
    <category term="Leetcode" scheme="http://example.com/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的构造01</title>
    <link href="http://example.com/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A001/"/>
    <id>http://example.com/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A001/</id>
    <published>2022-03-13T08:21:20.000Z</published>
    <updated>2022-07-29T08:42:03.153Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Leetcode-二叉树的构造-01"><a href="#Leetcode-二叉树的构造-01" class="headerlink" title="Leetcode 二叉树的构造 01"></a>Leetcode 二叉树的构造 01</h1><h2 id="前序-中序-构造二叉树"><a href="#前序-中序-构造二叉树" class="headerlink" title="前序+中序 构造二叉树"></a>前序+中序 构造二叉树</h2><p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）</a></p><p>代码：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">preorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">inorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span> (<span class="params">preorder, inorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">preorder, preStart, preEnd, inorder, inStart, inEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 递归终止条件</span></span><br><span class="line">    <span class="keyword">if</span> (preStart &gt; preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前序遍历数组的第一个元素是 树的根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = preorder[preStart];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到根节点在中序遍历数组中的索引</span></span><br><span class="line">    <span class="keyword">let</span> rootIndex = inorder.indexOf(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据根节点的索引在中序遍历数组中定位左子树数组的长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = rootIndex - inStart;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归构造左右子树</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据左子树数组的长度定位到</span></span><br><span class="line">    <span class="comment">// 左子树在前序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点的后一个节点 到 根节点位置+长度</span></span><br><span class="line">    <span class="comment">// 左子树在中序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 中序遍历开始的位置，到根节点前一个元素</span></span><br><span class="line">    root.left = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + <span class="number">1</span>,</span><br><span class="line">      preStart + leftSize,</span><br><span class="line">      inorder,</span><br><span class="line">      inStart,</span><br><span class="line">      rootIndex - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 右子树在前序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点位置+长度+1</span></span><br><span class="line">    <span class="comment">// 右子树在中序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点元素位置+1，到数组结尾</span></span><br><span class="line">    root.right = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + leftSize + <span class="number">1</span>,</span><br><span class="line">      preEnd,</span><br><span class="line">      inorder,</span><br><span class="line">      rootIndex + <span class="number">1</span>,</span><br><span class="line">      inEnd</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    preorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    preorder.length - <span class="number">1</span>,</span><br><span class="line">    inorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    inorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="后序-中序-构造二叉树"><a href="#后序-中序-构造二叉树" class="headerlink" title="后序+中序 构造二叉树"></a>后序+中序 构造二叉树</h2><p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/">106. 从中序与后序遍历序列构造二叉树 - 力扣（LeetCode）</a></p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">inorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">postorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span> (<span class="params">inorder, postorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">inorder, inStart, inEnd, postorder, postStart, postEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (inStart &gt; inEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 中序遍历</span></span><br><span class="line">    <span class="comment">// [左，根，右]</span></span><br><span class="line">    <span class="comment">// 后续遍历</span></span><br><span class="line">    <span class="comment">// [左，右，根]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 后续遍历数组的最后一位为根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = postorder[postEnd];</span><br><span class="line">    <span class="comment">// 找到根节点在中序遍历数组中的位置</span></span><br><span class="line">    <span class="keyword">let</span> rootIndex = inorder.indexOf(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造二叉树</span></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获得左子树数组的长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = rootIndex - inStart;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造二叉树的左右子树</span></span><br><span class="line">    root.left = build(</span><br><span class="line">      inorder,</span><br><span class="line">      inStart,</span><br><span class="line">      rootIndex - <span class="number">1</span>,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart,</span><br><span class="line">      postStart + leftSize - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line">    root.right = build(</span><br><span class="line">      inorder,</span><br><span class="line">      rootIndex + <span class="number">1</span>,</span><br><span class="line">      inEnd,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart + leftSize,</span><br><span class="line">      postEnd - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    inorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    inorder.length - <span class="number">1</span>,</span><br><span class="line">    postorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    postorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Leetcode-二叉树的构造-01&quot;&gt;&lt;a href=&quot;#Leetcode-二叉树的构造-01&quot; class=&quot;headerlink&quot; title=&quot;Leetcode 二叉树的构造 01&quot;&gt;&lt;/a&gt;Leetcode 二叉树的构造 01&lt;/h1&gt;&lt;h2 id=&quot;前序-中序-构造二叉树&quot;&gt;&lt;a href=&quot;#前序-中序-构造二叉树&quot; class=&quot;headerlink&quot; title=&quot;前序+中序 构造二叉树&quot;&gt;&lt;/a&gt;前序+中序 构造二叉树&lt;/h2&gt;&lt;p&gt;题号：&lt;a href=&quot;https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/&quot;&gt;105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="Leetcode" scheme="http://example.com/categories/Leetcode/"/>
    
    
    <category term="Leetcode" scheme="http://example.com/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的层序遍历</title>
    <link href="http://example.com/2022/03/10/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/"/>
    <id>http://example.com/2022/03/10/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/</id>
    <published>2022-03-10T03:01:20.000Z</published>
    <updated>2022-07-29T08:26:40.572Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Leetcode-二叉树的层序遍历"><a href="#Leetcode-二叉树的层序遍历" class="headerlink" title="Leetcode 二叉树的层序遍历"></a>Leetcode 二叉树的层序遍历</h1><p>前文分别用递归和迭代遍历二叉树，本文讲一下层序遍历二叉树（BFS）</p><h2 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">102. 二叉树的层序遍历 - 力扣（LeetCode）</a></p><p>代码：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> queue = [];</span><br><span class="line">  queue.push(root);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// while循环控制从上到下遍历</span></span><br><span class="line">  <span class="keyword">while</span> (queue.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> size = queue.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> level = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for循环控制从左到右遍历</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> cur = queue.shift();</span><br><span class="line">      level.push(cur.val);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (cur.left !== <span class="literal">null</span>) &#123;</span><br><span class="line">        queue.push(cur.left);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (cur.right !== <span class="literal">null</span>) &#123;</span><br><span class="line">        queue.push(cur.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res.push([...level]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Leetcode-二叉树的层序遍历&quot;&gt;&lt;a href=&quot;#Leetcode-二叉树的层序遍历&quot; class=&quot;headerlink&quot; title=&quot;Leetcode 二叉树的层序遍历&quot;&gt;&lt;/a&gt;Leetcode 二叉树的层序遍历&lt;/h1&gt;&lt;p&gt;前文分别用递归和迭代遍历二叉树，本文讲一下层序遍历二叉树（BFS）&lt;/p&gt;
&lt;h2 id=&quot;层序遍历&quot;&gt;&lt;a href=&quot;#层序遍历&quot; class=&quot;headerlink&quot; title=&quot;层序遍历&quot;&gt;&lt;/a&gt;层序遍历&lt;/h2&gt;&lt;p&gt;题号：&lt;a href=&quot;https://leetcode.cn/problems/binary-tree-level-order-traversal/&quot;&gt;102. 二叉树的层序遍历 - 力扣（LeetCode）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="Leetcode" scheme="http://example.com/categories/Leetcode/"/>
    
    
    <category term="Leetcode" scheme="http://example.com/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的前中后序遍历（迭代）</title>
    <link href="http://example.com/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E8%BF%AD%E4%BB%A3%EF%BC%89/"/>
    <id>http://example.com/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E8%BF%AD%E4%BB%A3%EF%BC%89/</id>
    <published>2022-03-04T02:55:05.000Z</published>
    <updated>2022-07-29T07:57:00.468Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Leetcode-二叉树的前中后序遍历（迭代）"><a href="#Leetcode-二叉树的前中后序遍历（迭代）" class="headerlink" title="Leetcode 二叉树的前中后序遍历（迭代）"></a>Leetcode 二叉树的前中后序遍历（迭代）</h1><p>前文讲过二叉树的递归遍历版本，今天讲一下二叉树的迭代遍历</p><h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">144. 二叉树的前序遍历 - 力扣（LeetCode）</a></p><p>顺序：根节点 左节点 右节点</p><p>代码：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 前序遍历</span></span><br><span class="line">  <span class="comment">// 根节点 左节点 右节点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 需要借助栈来实现</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// 先把根节点记录下来</span></span><br><span class="line">      result.push(root.val);</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line">    root = stack.pop();</span><br><span class="line">    root = root.right;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">94. 二叉树的中序遍历 - 力扣（LeetCode）</a></p><p>顺序：左节点 根节点 右节点</p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 中序遍历</span></span><br><span class="line">  <span class="comment">// 左子树 根节点 右子树</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 借助栈</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当二叉树遍历完毕 或者 栈中没有元素 停止遍历</span></span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 将根节点到所有的左节点存入栈中</span></span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始出栈</span></span><br><span class="line">    root = stack.pop();</span><br><span class="line">    <span class="comment">// 出栈元素存入result</span></span><br><span class="line">    result.push(root.val);</span><br><span class="line">    <span class="comment">// 将root改为原root的右节点</span></span><br><span class="line">    root = root.right;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="后续遍历"><a href="#后续遍历" class="headerlink" title="后续遍历"></a>后续遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/">145. 二叉树的后序遍历 - 力扣（LeetCode）</a></p><p>顺序：左节点 右节点 根节点</p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="comment">// 后续遍历</span></span><br><span class="line">  <span class="comment">// 左节点 右节点 根节点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 借助栈 以及 中间变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line">  <span class="keyword">let</span> preAccess = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    root = stack.pop();</span><br><span class="line">    <span class="keyword">if</span> (root.right === <span class="literal">null</span> || root.right === preAccess) &#123;</span><br><span class="line">      result.push(root.val);</span><br><span class="line">      preAccess = root;</span><br><span class="line">      root = <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.right;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Leetcode-二叉树的前中后序遍历（迭代）&quot;&gt;&lt;a href=&quot;#Leetcode-二叉树的前中后序遍历（迭代）&quot; class=&quot;headerlink&quot; title=&quot;Leetcode 二叉树的前中后序遍历（迭代）&quot;&gt;&lt;/a&gt;Leetcode 二叉树的前中后序遍历（迭代）&lt;/h1&gt;&lt;p&gt;前文讲过二叉树的递归遍历版本，今天讲一下二叉树的迭代遍历&lt;/p&gt;
&lt;h2 id=&quot;前序遍历&quot;&gt;&lt;a href=&quot;#前序遍历&quot; class=&quot;headerlink&quot; title=&quot;前序遍历&quot;&gt;&lt;/a&gt;前序遍历&lt;/h2&gt;&lt;p&gt;题号：&lt;a href=&quot;https://leetcode.cn/problems/binary-tree-preorder-traversal/&quot;&gt;144. 二叉树的前序遍历 - 力扣（LeetCode）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;顺序：根节点 左节点 右节点&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="Leetcode" scheme="http://example.com/categories/Leetcode/"/>
    
    
    <category term="Leetcode" scheme="http://example.com/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>二叉树的前中后序遍历（递归）</title>
    <link href="http://example.com/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E9%80%92%E5%BD%92%EF%BC%89/"/>
    <id>http://example.com/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E9%80%92%E5%BD%92%EF%BC%89/</id>
    <published>2022-03-04T02:14:38.000Z</published>
    <updated>2022-07-29T07:01:44.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Leetcode-二叉树的前中后序遍历（递归）"><a href="#Leetcode-二叉树的前中后序遍历（递归）" class="headerlink" title="Leetcode 二叉树的前中后序遍历（递归）"></a>Leetcode 二叉树的前中后序遍历（递归）</h1><h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">144. 二叉树的前序遍历 - 力扣（LeetCode）</a></p><p>顺序：根节点 左节点 右节点</p><p>代码：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 前序遍历</span></span><br><span class="line">  <span class="comment">// 根节点 左节点 右节点</span></span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    result.push(root.val);</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">94. 二叉树的中序遍历 - 力扣（LeetCode）</a></p><p>顺序：左节点 根节点 右节点</p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 中序遍历</span></span><br><span class="line">  <span class="comment">// 左子树 根节点 右子树</span></span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    result.push(root.val);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="后续遍历"><a href="#后续遍历" class="headerlink" title="后续遍历"></a>后续遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/">145. 二叉树的后序遍历 - 力扣（LeetCode）</a></p><p>顺序：左节点 右节点 根节点</p><p>代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="comment">// 后续遍历</span></span><br><span class="line">  <span class="comment">// 左节点 右节点 根节点</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">    result.push(root.val);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Leetcode-二叉树的前中后序遍历（递归）&quot;&gt;&lt;a href=&quot;#Leetcode-二叉树的前中后序遍历（递归）&quot; class=&quot;headerlink&quot; title=&quot;Leetcode 二叉树的前中后序遍历（递归）&quot;&gt;&lt;/a&gt;Leetcode 二叉树的前中后序遍历（递归）&lt;/h1&gt;&lt;h2 id=&quot;前序遍历&quot;&gt;&lt;a href=&quot;#前序遍历&quot; class=&quot;headerlink&quot; title=&quot;前序遍历&quot;&gt;&lt;/a&gt;前序遍历&lt;/h2&gt;&lt;p&gt;题号：&lt;a href=&quot;https://leetcode.cn/problems/binary-tree-preorder-traversal/&quot;&gt;144. 二叉树的前序遍历 - 力扣（LeetCode）&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;顺序：根节点 左节点 右节点&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="Leetcode" scheme="http://example.com/categories/Leetcode/"/>
    
    
    <category term="Leetcode" scheme="http://example.com/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>CSS 基本布局</title>
    <link href="http://example.com/2021/11/13/CSS%20%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/"/>
    <id>http://example.com/2021/11/13/CSS%20%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/</id>
    <published>2021-11-13T15:14:47.000Z</published>
    <updated>2022-07-28T15:20:28.169Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CSS-基本布局"><a href="#CSS-基本布局" class="headerlink" title="CSS 基本布局"></a>CSS 基本布局</h1><h2 id="两栏布局"><a href="#两栏布局" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231435086.png" alt="image-20220728231435086"></p><p>代码：</p><span id="more"></span><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 浮动 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">      float: left;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 500px;</span><br><span class="line">      background-color: aqua;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">      margin-left: 200px;</span><br><span class="line">      width: auto;</span><br><span class="line">      height: 500px;</span><br><span class="line">      background-color: gold;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* =============================================== */</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* flex */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 200px;</span><br><span class="line">      display: flex;</span><br><span class="line">      background: pink;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.left01</span> &#123;</span></span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background: gold;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right01</span> &#123;</span></span><br><span class="line">      flex: 1;</span><br><span class="line">      height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* =============================================== */</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 子绝父相 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.father</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      background: aqua;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.son01</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background: palevioletred;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.son02</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      height: 100%;</span><br><span class="line">      left: 200px;</span><br><span class="line">      right: 0px;</span><br><span class="line">      background: navy;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 浮动 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 左边一栏固定 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右边一栏宽度自适应 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 子绝父相 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="三栏布局"><a href="#三栏布局" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231614300.png" alt="image-20220728231614300"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 250px;</span><br><span class="line">      background: palegreen;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      background: palevioletred;</span><br><span class="line">      flex: 1;</span><br><span class="line">      margin: 0 10px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 250px;</span><br><span class="line">      background: blueviolet;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="水平垂直居中"><a href="#水平垂直居中" class="headerlink" title="水平垂直居中"></a>水平垂直居中</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231658773.png" alt="image-20220728231658773"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: 50%;</span><br><span class="line">      left: 50%;</span><br><span class="line"><span class="css">      <span class="comment">/* transform: translate */</span></span></span><br><span class="line">      transform: translate(-50%, -50%);</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="comment">/* 移动自身一半 */</span></span></span><br><span class="line">      /* margin-left: -50px;</span><br><span class="line">        margin-top: -50px; */</span><br><span class="line">      background: pink;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* flex */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line">      background: blue;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      width: 50px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      background: greenyellow;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 父相对定位 子绝对定位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span>01<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span>02<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;CSS-基本布局&quot;&gt;&lt;a href=&quot;#CSS-基本布局&quot; class=&quot;headerlink&quot; title=&quot;CSS 基本布局&quot;&gt;&lt;/a&gt;CSS 基本布局&lt;/h1&gt;&lt;h2 id=&quot;两栏布局&quot;&gt;&lt;a href=&quot;#两栏布局&quot; class=&quot;headerlink&quot; title=&quot;两栏布局&quot;&gt;&lt;/a&gt;两栏布局&lt;/h2&gt;&lt;p&gt;效果图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231435086.png&quot; alt=&quot;image-20220728231435086&quot;&gt;&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="CSS" scheme="http://example.com/categories/CSS/"/>
    
    
    <category term="CSS" scheme="http://example.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>CSS 场景应用基础02</title>
    <link href="http://example.com/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8002/"/>
    <id>http://example.com/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8002/</id>
    <published>2021-11-07T14:50:09.000Z</published>
    <updated>2022-07-28T15:19:39.416Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CSS-场景应用基础-02"><a href="#CSS-场景应用基础-02" class="headerlink" title="CSS 场景应用基础 02"></a>CSS 场景应用基础 02</h1><h2 id="实现一个宽高自适应的正方形"><a href="#实现一个宽高自适应的正方形" class="headerlink" title="实现一个宽高自适应的正方形"></a>实现一个宽高自适应的正方形</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230648171.png" alt="image-20220728230648171"></p><p>代码：</p><span id="more"></span><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* vw */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      width: 10%;</span><br><span class="line">      height: 10vw;</span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 元素的margin/padding百分比是相对父元素width的性质来实现 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      width: 20%;</span><br><span class="line">      height: 0px;</span><br><span class="line">      padding-top: 20%;</span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现一个梯形"><a href="#实现一个梯形" class="headerlink" title="实现一个梯形"></a>实现一个梯形</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230838771.png" alt="image-20220728230838771"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 直角梯形 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      height: 0px;</span><br><span class="line">      width: 100px;</span><br><span class="line">      border-bottom: 100px solid pink;</span><br><span class="line">      border-right: 40px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 等腰梯形 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      height: 0px;</span><br><span class="line">      width: 100px;</span><br><span class="line">      border-bottom: 100px solid pink;</span><br><span class="line">      border-left: 40px solid transparent;</span><br><span class="line">      border-right: 40px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 直角梯形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 等腰梯形01 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现一根-0-5px-的线"><a href="#实现一根-0-5px-的线" class="headerlink" title="实现一根 0.5px 的线"></a>实现一根 0.5px 的线</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231159877.png" alt="image-20220728231159877"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck</span> &#123;</span></span><br><span class="line">      border-bottom: 0.5px solid black;</span><br><span class="line">      transform: scale(0.5, 0.5);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;CSS-场景应用基础-02&quot;&gt;&lt;a href=&quot;#CSS-场景应用基础-02&quot; class=&quot;headerlink&quot; title=&quot;CSS 场景应用基础 02&quot;&gt;&lt;/a&gt;CSS 场景应用基础 02&lt;/h1&gt;&lt;h2 id=&quot;实现一个宽高自适应的正方形&quot;&gt;&lt;a href=&quot;#实现一个宽高自适应的正方形&quot; class=&quot;headerlink&quot; title=&quot;实现一个宽高自适应的正方形&quot;&gt;&lt;/a&gt;实现一个宽高自适应的正方形&lt;/h2&gt;&lt;p&gt;效果图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230648171.png&quot; alt=&quot;image-20220728230648171&quot;&gt;&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="CSS" scheme="http://example.com/categories/CSS/"/>
    
    
    <category term="CSS" scheme="http://example.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>CSS 场景应用基础01</title>
    <link href="http://example.com/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8001/"/>
    <id>http://example.com/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8001/</id>
    <published>2021-11-07T14:31:59.000Z</published>
    <updated>2022-07-28T15:18:53.873Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CSS-场景应用基础-01"><a href="#CSS-场景应用基础-01" class="headerlink" title="CSS 场景应用基础 01"></a>CSS 场景应用基础 01</h1><h2 id="实现一个三角形"><a href="#实现一个三角形" class="headerlink" title="实现一个三角形"></a>实现一个三角形</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230033309.png" alt="image-20220728230033309"></p><p>代码：</p><span id="more"></span><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle01</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border: 100px solid;</span><br><span class="line">      border-color: orange blue pink green;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle02</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-top: 50px solid pink;</span><br><span class="line">      border-left: 50px solid transparent;</span><br><span class="line">      border-right: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle03</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-bottom: 50px solid pink;</span><br><span class="line">      border-left: 50px solid transparent;</span><br><span class="line">      border-right: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle04</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-left: 50px solid pink;</span><br><span class="line">      border-top: 50px solid transparent;</span><br><span class="line">      border-bottom: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle05</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-right: 50px solid pink;</span><br><span class="line">      border-top: 50px solid transparent;</span><br><span class="line">      border-bottom: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle03&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle04&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle05&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现一个扇形"><a href="#实现一个扇形" class="headerlink" title="实现一个扇形"></a>实现一个扇形</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230227060.png" alt="image-20220728230227060"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    div &#123;</span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-radius: 100px;</span><br><span class="line">      border: 100px solid transparent;</span><br><span class="line">      border-top-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="实现一个圆和半圆"><a href="#实现一个圆和半圆" class="headerlink" title="实现一个圆和半圆"></a>实现一个圆和半圆</h2><p>效果图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230348986.png" alt="image-20220728230348986"></p><p>代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.circle</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      background-color: pink;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.half-circle</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      background-color: pink;</span><br><span class="line">      border-radius: 0px 0px 100px 100px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;half-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;CSS-场景应用基础-01&quot;&gt;&lt;a href=&quot;#CSS-场景应用基础-01&quot; class=&quot;headerlink&quot; title=&quot;CSS 场景应用基础 01&quot;&gt;&lt;/a&gt;CSS 场景应用基础 01&lt;/h1&gt;&lt;h2 id=&quot;实现一个三角形&quot;&gt;&lt;a href=&quot;#实现一个三角形&quot; class=&quot;headerlink&quot; title=&quot;实现一个三角形&quot;&gt;&lt;/a&gt;实现一个三角形&lt;/h2&gt;&lt;p&gt;效果图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230033309.png&quot; alt=&quot;image-20220728230033309&quot;&gt;&lt;/p&gt;
&lt;p&gt;代码：&lt;/p&gt;</summary>
    
    
    
    <category term="CSS" scheme="http://example.com/categories/CSS/"/>
    
    
    <category term="CSS" scheme="http://example.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 展开运算符</title>
    <link href="http://example.com/2021/10/22/JavaScript%20%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <id>http://example.com/2021/10/22/JavaScript%20%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6/</id>
    <published>2021-10-22T02:31:48.000Z</published>
    <updated>2022-07-28T03:45:52.300Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-展开运算符"><a href="#JavaScript-展开运算符" class="headerlink" title="JavaScript 展开运算符"></a>JavaScript 展开运算符</h1><h2 id="展开运算符-（…）"><a href="#展开运算符-（…）" class="headerlink" title="展开运算符 （…）"></a>展开运算符 （…）</h2><p>展开运算符，是 ES6 中的新语法，是把可迭代的对象（string，object，数组）展开，可以用在函数调用 / 数组构造的时候，将数组表达式 / string 在语法层面展开，还可以将对象表达式按照 key-value 的方式展开。</p><p>展开运算符只能用于可迭代对象。</p><span id="more"></span><p><strong>函数调用：</strong></p><p>假如你把<code>...</code>放在函数的参数里，就说明这个参数必须是<code>interable object</code>，然后这个对象会被展开成为函数的参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> someIterable = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line">func(...someIterable);</span><br><span class="line"><span class="comment">// same as func(&#x27;a&#x27;, &#x27;b&#x27;)</span></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(-<span class="number">1</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">11</span></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(...[-<span class="number">1</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">3</span>])</span><br><span class="line"><span class="number">11</span></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(-<span class="number">1</span>, ...[-<span class="number">5</span>, <span class="number">11</span>], <span class="number">3</span>)</span><br><span class="line"><span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line">arr1.push(...arr2); <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;]</span></span><br></pre></td></tr></table></figure><p><strong>数组构造或字符串</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log([...numbers, <span class="string">&#x27;4&#x27;</span>, ...<span class="string">&#x27;hello&#x27;</span>, <span class="number">6</span>];) <span class="comment">// Array [1, 2, 3, &quot;4&quot;, &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parts = [<span class="string">&#x27;shoulders&#x27;</span>, <span class="string">&#x27;knees&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> lyrics = [<span class="string">&#x27;head&#x27;</span>, ...parts, <span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;toes&#x27;</span>]; <span class="comment">//  [&quot;head&quot;, &quot;shoulders&quot;, &quot;knees&quot;, &quot;and&quot;, &quot;toes&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组拷贝</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [...arr];</span><br><span class="line">arr2.push(<span class="number">4</span>); <span class="comment">// arr2 此时变成了 [1,2,3,4]. arr不受影响</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//连接多个数组</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = [...arr1, ...arr2]; <span class="comment">// [0,1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对象拷贝（浅拷贝，并且不包含prototype）和合并</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">foo</span>:<span class="string">&#x27;bar&#x27;</span>, <span class="attr">x</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">foo</span>:<span class="string">&#x27;baz&#x27;</span>, <span class="attr">y</span>:<span class="number">13</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> cloneObj = &#123;...obj1&#125;; <span class="comment">// &#123;foo:&#x27;bar&#x27;, x:42&#125;</span></span><br><span class="line"><span class="keyword">var</span> mergeObj = &#123;...obj1, ...obj2&#125;; <span class="comment">// &#123;foo:&#x27;baz&#x27;, x:42, y:13&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-展开运算符&quot;&gt;&lt;a href=&quot;#JavaScript-展开运算符&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 展开运算符&quot;&gt;&lt;/a&gt;JavaScript 展开运算符&lt;/h1&gt;&lt;h2 id=&quot;展开运算符-（…）&quot;&gt;&lt;a href=&quot;#展开运算符-（…）&quot; class=&quot;headerlink&quot; title=&quot;展开运算符 （…）&quot;&gt;&lt;/a&gt;展开运算符 （…）&lt;/h2&gt;&lt;p&gt;展开运算符，是 ES6 中的新语法，是把可迭代的对象（string，object，数组）展开，可以用在函数调用 / 数组构造的时候，将数组表达式 / string 在语法层面展开，还可以将对象表达式按照 key-value 的方式展开。&lt;/p&gt;
&lt;p&gt;展开运算符只能用于可迭代对象。&lt;/p&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript Map 和 Set</title>
    <link href="http://example.com/2021/10/21/JavaScript%20Map%E5%92%8CSet/"/>
    <id>http://example.com/2021/10/21/JavaScript%20Map%E5%92%8CSet/</id>
    <published>2021-10-21T14:21:19.000Z</published>
    <updated>2022-07-28T03:42:49.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-Map-和-Set"><a href="#JavaScript-Map-和-Set" class="headerlink" title="JavaScript Map 和 Set"></a>JavaScript Map 和 Set</h1><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>Map 是 JS(es6) 的一种字典数据结构, key 值不重复，如果有重复，就会覆盖前面的，任何值都可以作为 Map 的 key， 包括对象，字符，数字，NaN，symbol。</p><p>Map 跟 Object 很像，但是 Object 只能用 string / symbol 作为 Key，Map 可以通过 size 获取键值对个数，而 Object 只能手动计算。</p><p>在 JS 中，<code>NaN === NaN</code>是 false，不过在 Map 里 NaN 被认为是同一个 key：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="literal">NaN</span>, <span class="number">123</span>);</span><br><span class="line">map.get(<span class="literal">NaN</span>); <span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>但是对于 Object 的 Key，不同的对象，代表的 key 值不同：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Map</span>().set(&#123;&#125;, <span class="number">1</span>).set(&#123;&#125;, <span class="number">2</span>).size; <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>Map 有以下 3 种创建方式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> emptyMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, <span class="string">&quot;one&quot;</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="string">&quot;two&quot;</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="string">&quot;three&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;one&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;two&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure><p>复制 Map:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="literal">false</span>, <span class="string">&quot;no&quot;</span>).set(<span class="literal">true</span>, <span class="string">&quot;yes&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="keyword">new</span> <span class="built_in">Map</span>(original);</span><br></pre></td></tr></table></figure><p>通过 key 拿到 value：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&quot;foo&quot;</span>, <span class="number">123</span>);</span><br><span class="line">map.get(<span class="string">&quot;foo&quot;</span>); <span class="comment">// 123</span></span><br><span class="line">map.get(<span class="string">&quot;bar&quot;</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>其他 Map 的方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// .has() checks if a Map has an entry with a given key</span></span><br><span class="line">map.has(<span class="string">&quot;foo&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .delete() remove entries</span></span><br><span class="line">map.delete(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">map.has(<span class="string">&quot;foo&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">&quot;foo&quot;</span>, <span class="literal">true</span>).set(<span class="string">&quot;bar&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .size retrun the number of entries in a Map</span></span><br><span class="line">map1.size; <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .clear() removes all entries of a Map</span></span><br><span class="line">map1.clear();</span><br><span class="line">map1.size; <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="literal">false</span>, <span class="string">&quot;no&quot;</span>).set(<span class="literal">true</span>, <span class="string">&quot;yes&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .keys() returns an iterable over the keys of a Map</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> map2.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key); <span class="comment">// output: false true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// we can use spreading(...) to convert iterable returned by .keys() to an Array</span></span><br><span class="line">[...map2.keys()]; <span class="comment">// [false, true]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .values() quite like .keys(), but for values instead of keys</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.entries() return an interable over the entries of a Map</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> map2.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(entry);</span><br><span class="line">  <span class="comment">//output:</span></span><br><span class="line">  <span class="comment">//[false, &#x27;no&#x27;]</span></span><br><span class="line">  <span class="comment">//[ture, &#x27;yes&#x27;]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// we can use sperading(...) to convert iterable returned by .entries() to an Array;</span></span><br><span class="line">[...map.entries()]; <span class="comment">// [[false, &#x27;no&#x27;], [true, &#x27;yes&#x27;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// we also can use below way to access key and value</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">  <span class="comment">// output:</span></span><br><span class="line">  <span class="comment">//false, &#x27;no&#x27;</span></span><br><span class="line">  <span class="comment">//true, &#x27;yes&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>只要 Map 只含有 strings 和 symbols 作为 key，那么就可以直接把这个 Map 转为 Object：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&quot;a&quot;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&quot;b&quot;</span>, <span class="number">2</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.fromEntries(map); <span class="comment">// &#123; a:1, b:2&#125;</span></span><br></pre></td></tr></table></figure><p>也可以把 Object 转换为 Map：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj)); <span class="comment">// new Map([[&#x27;a&#x27;,1], [&#x27;b&#x27;,2]])</span></span><br></pre></td></tr></table></figure><p>应用： 计算字符串中，字符出现的次数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countChars</span>(<span class="params">chars</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> charCounts = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> ch <span class="keyword">of</span> chars) &#123;</span><br><span class="line">    ch = ch.toLowerCase();</span><br><span class="line">    <span class="keyword">const</span> prevCount = charCounts.get(ch);</span><br><span class="line">    prevCount ? charCounts.set(ch, prevCount + <span class="number">1</span>) : <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> charCounts;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果想要像数组一样，map 和 filter， 那么就必须要把 Map 先转化为数组：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> originalMap = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mappedMap = <span class="keyword">new</span> <span class="built_in">Map</span>( <span class="comment">//step 3</span></span><br><span class="line">  [...originalMap] <span class="comment">//setp 1</span></span><br><span class="line">    .map(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> [k * <span class="number">2</span>, <span class="string">&quot;_&quot;</span> + v]) <span class="comment">//step 2</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// 相当于：new Map([[2, &#x27;_a&#x27;], [4, &#x27;_b&#x27;], [6, &#x27;_c&#x27;]])</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filteredMap = <span class="keyword">new</span> <span class="built_in">Map</span>( <span class="comment">// step 3</span></span><br><span class="line">  [...originalMap] <span class="comment">//step 1</span></span><br><span class="line">    .filter(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> k &lt; <span class="number">3</span>) <span class="comment">//setp 2</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// 相当于：new Map([[1,&#x27;a&#x27;], [2, &#x27;b&#x27;]])</span></span><br></pre></td></tr></table></figure><p>如果想要，合并两个 Map:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;1a&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;1b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;1c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">2</span>, <span class="string">&quot;2b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;2c&quot;</span>).set(<span class="number">4</span>, <span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> combinedMap = <span class="keyword">new</span> <span class="built_in">Map</span>([...map1, ...map2]);</span><br><span class="line"><span class="comment">// 相当于：new Map([[1,&#x27;1a&#x27;],[2,&#x27;2b&#x27;],[3,&#x27;2c&#x27;],[4, &#x27;2d&#x27;]])</span></span><br></pre></td></tr></table></figure><h2 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h2><p>WeakMap 跟 Map 非常像，只不过多了以下的限制：</p><ul><li>WeakMap 就是一个黑盒子<ul><li>我们不能直接通过 keys / values / entries 来 iterate 或者是 loop WeakMap，并且不能计算它的 size。</li><li>我们不能清除 WeakMap，如有需要，只能重新创建一个。</li></ul></li><li>WeakMap 的 key，必须是 objects<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">wm.set(<span class="number">123</span>, <span class="string">&quot;test&quot;</span>); <span class="comment">// TypeError: Invalid value used as weak map key</span></span><br></pre></td></tr></table></figure></li><li>WeakMap 的 key 是弱引用<ul><li>正常来说，如果有对象还被引用，那么就不会被垃圾回收。但是 WeakMap 不一样，在 object 作为 key 的时候，是可以被垃圾回收的，这会导致整个 entry 也被删掉，并且这个没办法检测到这种行为。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  vm.set(obj, <span class="string">&quot;attachedValue&quot;</span>); <span class="comment">// (A)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (B)</span></span><br></pre></td></tr></table></figure>在 (A) 这一行我们给 obj 这个 key 赋值，但是在 (B) 这一行，obj 这个 entry 就有可能被垃圾回收掉了，但是 vm 还在，并且没办法手动删掉 vm</li></ul></li></ul><p>应用：</p><ul><li><p>用 WeakMap 来保存计算结果</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countOwnKeys</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (cache.has(obj)) &#123;</span><br><span class="line">    <span class="keyword">return</span> [cache.get(obj), <span class="string">&quot;cached&quot;</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="built_in">Object</span>.keys(obj).length;</span><br><span class="line">    cache.set(obj, count);</span><br><span class="line">    <span class="keyword">return</span> [count, <span class="string">&quot;computed&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>用 WeakMap 来保存 private data</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _counter = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="keyword">const</span> _action = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Countdown</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">counter, action</span>)</span> &#123;</span><br><span class="line">    _counter.set(<span class="built_in">this</span>, counter);</span><br><span class="line">    _action.set(<span class="built_in">this</span>, action);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">dec</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> counter = _counter.get(<span class="built_in">this</span>);</span><br><span class="line">    counter--;</span><br><span class="line">    _counter.set(<span class="built_in">this</span>, counter);</span><br><span class="line">    <span class="keyword">if</span> (counter === <span class="number">0</span>) &#123;</span><br><span class="line">      _action.get(<span class="built_in">this</span>)();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>WeakMap 的方法有:</p></li><li><p>new WeakMap()</p></li><li><p>.delete(key)</p></li><li><p>.get(key)</p></li><li><p>.has(key)</p></li><li><p>.set(key,value)</p></li></ul><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Set 跟数组很像，但是成员的值都是唯一的，没有重复的值，并且 Set 对象允许存储任何类型的值，无论是原始值或者是对象引用。Set 函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。</p><p>有以下三种方式创建 Set：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> emptySet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">&quot;red&quot;</span>).add(<span class="string">&quot;green&quot;</span>).add(<span class="string">&quot;blue&quot;</span>);</span><br></pre></td></tr></table></figure><p>常用的 Set 方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .add() addsd an element to a Set</span></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> set();</span><br><span class="line">set.add(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .has() checks if an elements is a member of a Set</span></span><br><span class="line">set.has(<span class="string">&quot;red&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .delete() removes an element from a Set</span></span><br><span class="line">set.delete(<span class="string">&quot;red&quot;</span>); <span class="comment">// true</span></span><br><span class="line">set.has(<span class="string">&quot;red&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .size contains the number of elements in a Set</span></span><br><span class="line"><span class="keyword">const</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">&quot;foo&quot;</span>).add(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">set1.size; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .clear() removes all elements of a Set</span></span><br><span class="line">set1.clear();</span><br><span class="line">set1.size; <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Iterating over Sets</span></span><br><span class="line"><span class="keyword">const</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> set2) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="comment">//outouts:</span></span><br><span class="line">  <span class="comment">//&#x27;red&#x27;</span></span><br><span class="line">  <span class="comment">//&#x27;green&#x27;,</span></span><br><span class="line">  <span class="comment">//&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// use spreading(...) to convert set to array</span></span><br><span class="line"><span class="keyword">const</span> set3 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> arr = [...set3]; <span class="comment">// [&#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;]</span></span><br></pre></td></tr></table></figure><p>应用：</p><p>移除数组中的重复项：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set4 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> arr = [...set4]; <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure><p>字符串是 iterable，所以也可以作为 Set 的参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]); <span class="comment">//这两个是一样的</span></span><br></pre></td></tr></table></figure><p>NaN 对于 Set 来说也是一个值，对于任何 Object 都是不同的值：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>]);</span><br><span class="line">set.size; <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">cosnt set1 = <span class="keyword">new</span> <span class="built_in">Set</span>([&#123;&#125;, &#123;&#125;]);</span><br><span class="line">set.size; <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>Union 两个 Set：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> union = <span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b]); <span class="comment">// new Set([1,2,3,4])</span></span><br></pre></td></tr></table></figure><p>Intersection 两个 Set：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> intersection = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> b.has(x))); <span class="comment">// new Set([2,3])</span></span><br></pre></td></tr></table></figure><p>Difference 两个 Set：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> difference = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> !b.has(x))); <span class="comment">// new Set([1, 4])</span></span><br></pre></td></tr></table></figure><p>Mapping over Set:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> mappedSet = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>)); <span class="comment">// new Set([2,4,6])</span></span><br></pre></td></tr></table></figure><p>Filtering Set:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="keyword">const</span> filteredSet = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>)); <span class="comment">// new Set([2,4])</span></span><br></pre></td></tr></table></figure><h2 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h2><p>WeakSet 跟 Set 很像，只不过多了下面的限制：</p><ul><li>WeakSet 是个黑盒子<ul><li>我们不能直接通过 keys / values / entries 来 iterate 或者是 loop WeakMap，并且不能计算它的 size。</li><li>我们不能清除 WeakMap，如有需要，只能重新创建一个。</li></ul></li><li>WeakSet 的 key 是弱引用<ul><li>正常来说，如果有对象还被引用，那么就不会被垃圾回收。但是 WeakSet 不一样，在 object 作为 key 的时候，是可以被垃圾回收的，这会导致整个 entry 也被删掉，并且这个没办法检测到这种行为。</li></ul></li></ul><p>WeakSet 的方法有:</p><ul><li>new WeakSet()</li><li>.delete(value)</li><li>.get(value)</li><li>.has(value)</li><li>.set(value)</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-Map-和-Set&quot;&gt;&lt;a href=&quot;#JavaScript-Map-和-Set&quot; class=&quot;headerlink&quot; title=&quot;JavaScript Map 和 Set&quot;&gt;&lt;/a&gt;JavaScript Map 和 Set&lt;/h1&gt;&lt;h2 id=&quot;Map&quot;&gt;&lt;a href=&quot;#Map&quot; class=&quot;headerlink&quot; title=&quot;Map&quot;&gt;&lt;/a&gt;Map&lt;/h2&gt;&lt;p&gt;Map 是 JS(es6) 的一种字典数据结构, key 值不重复，如果有重复，就会覆盖前面的，任何值都可以作为 Map 的 key， 包括对象，字符，数字，NaN，symbol。&lt;/p&gt;
&lt;p&gt;Map 跟 Object 很像，但是 Object 只能用 string / symbol 作为 Key，Map 可以通过 size 获取键值对个数，而 Object 只能手动计算。&lt;/p&gt;
&lt;p&gt;在 JS 中，&lt;code&gt;NaN === NaN&lt;/code&gt;是 false，不过在 Map 里 NaN 被认为是同一个 key：&lt;/p&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 核心基础知识点</title>
    <link href="http://example.com/2021/10/18/JavaScript%20%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <id>http://example.com/2021/10/18/JavaScript%20%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/</id>
    <published>2021-10-18T15:15:09.000Z</published>
    <updated>2022-07-28T03:34:28.032Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-核心基础知识点"><a href="#JavaScript-核心基础知识点" class="headerlink" title="JavaScript 核心基础知识点"></a>JavaScript 核心基础知识点</h1><h2 id="Primitive-values-vs-Objects"><a href="#Primitive-values-vs-Objects" class="headerlink" title="Primitive values vs. Objects"></a>Primitive values vs. Objects</h2><p>Primitive values 是指：undefined, null, boolean, number, bigint, string, symbol。除此之外的都是 Objects。</p><ul><li>Primitive values 是通过值传递的，两个 Primitive 比较的时候，是比较它们两个的值。</li><li>Objects 是通过引用传递，两个 Objects 比较的时候，是比较它们两个的引用。</li></ul><span id="more"></span><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;; <span class="comment">// fresh empty object</span></span><br><span class="line"><span class="comment">// Pass the identity in `a` to `b`:</span></span><br><span class="line"><span class="keyword">const</span> b = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now `a` and `b` point to the same object</span></span><br><span class="line"><span class="comment">// (they “share” that object):</span></span><br><span class="line"><span class="built_in">console</span>.log(a === b); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Changing `a` also changes `b`:</span></span><br><span class="line">a.foo = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b.foo); <span class="comment">// 123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;; <span class="comment">// fresh empty object</span></span><br><span class="line"><span class="built_in">console</span>.log(obj === obj); <span class="comment">// true // same reference</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; === &#123;&#125;); <span class="comment">//false // different references, same content</span></span><br></pre></td></tr></table></figure><ul><li>Primitive 的属性是不可以改变的<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">str.length = <span class="number">1</span>; <span class="comment">// TypeError: cannot assign to read only property &#x27;length&#x27;</span></span><br></pre></td></tr></table></figure></li><li>Objects 属性是可以改变的</li></ul><h2 id="typeof-vs-instanceof"><a href="#typeof-vs-instanceof" class="headerlink" title="typeof vs. instanceof"></a>typeof vs. instanceof</h2><p>typeof 对于原始值类型来说，除了 null 都可以显示正确的类型：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">42</span>; <span class="comment">// &quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&quot;abc&quot;</span>; <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// &quot;boolean&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// &quot;undefined&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// &quot;object&quot; -- oops, JS bug!</span></span><br><span class="line"><span class="keyword">typeof</span> &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;; <span class="comment">// &quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// &quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// &quot;function&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>; <span class="comment">// &quot;symbol&quot;</span></span><br></pre></td></tr></table></figure><p>typeof 对于对象来说，除了函数，都会显示成 object：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log; <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure><p>如果我们想要判断一个正确的对象类型，就需要用 instanceof，它的内部机制是通过原型链来判断的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person();</span><br><span class="line">p1 <span class="keyword">instanceof</span> Person; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">str <span class="keyword">instanceof</span> <span class="built_in">String</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">str1 <span class="keyword">instanceof</span> <span class="built_in">String</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><blockquote><p>typeof 是用来判断 primitive values；instanceof 是用来判断 objects </p></blockquote><h3 id="instanceof-的原理"><a href="#instanceof-的原理" class="headerlink" title="instanceof 的原理"></a>instanceof 的原理</h3><p>instanceof 可以正确的判断对象的类型，因为内部机制是通过判断对象的原型链中是不是能找到类型的 prototype。</p><p>我们也可以试着实现一下 instanceof</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myInstanceof</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> prototype = right.prototype;</span><br><span class="line">  left = left.__proto__;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left === <span class="literal">null</span> || left === <span class="literal">undefined</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (prototype === left) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    left = left.__proto__;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以下是对实现的分析：</p><ul><li>首先获取类型的原型</li><li>然后获得对象的原型</li><li>然后一直循环判断对象的原型是否等于类型的原型，直到对象原型为 null，因为原型链最终为 null</li></ul><h2 id="vs"><a href="#vs" class="headerlink" title="== vs. ==="></a>== vs. ===</h2><p>对于 == 来说，如果对比双方的类型不一样的话，就会进行类型转换，这也就用到了我们上一章节讲的内容。</p><p>假如我们需要对比 x 和 y 是否相同，就会进行如下判断流程：</p><ul><li>首先会判断两者类型是否相同。相同的话就是比大小了</li><li>类型不相同的话，那么就会进行类型转换</li><li>会先判断是否在对比 null 和 undefined，是的话就会返回 true</li><li>判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span></span><br><span class="line">      ↓</span><br><span class="line"><span class="number">1</span> ==  <span class="number">1</span></span><br></pre></td></tr></table></figure><p>判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span> == <span class="literal">true</span></span><br><span class="line">        ↓</span><br><span class="line"><span class="string">&#x27;1&#x27;</span> ==  <span class="number">1</span></span><br><span class="line">        ↓</span><br><span class="line"> <span class="number">1</span>  ==  <span class="number">1</span></span><br></pre></td></tr></table></figure><p>判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span> == &#123; <span class="attr">name</span>: <span class="string">&#x27;yck&#x27;</span> &#125;</span><br><span class="line">        ↓</span><br><span class="line"><span class="string">&#x27;1&#x27;</span> == <span class="string">&#x27;[object Object]&#x27;</span></span><br></pre></td></tr></table></figure><p>需要注意的是：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> == <span class="literal">null</span>; <span class="comment">// true</span></span><br><span class="line"><span class="literal">undefined</span> === <span class="literal">null</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>对于 === 来说就简单多了，就是判断两者类型和值是否相同。需要注意的是有两个特殊情况：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">// false</span></span><br><span class="line"><span class="number">0</span> === -<span class="number">0</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>对于<code>NaN</code>的比较，用<code>Number.isNaN()</code>；对于<code>-0</code>的比较，用<code>Object.is()</code>。</p><blockquote><p>实际写代码的时候，建议用 === </p></blockquote><p>比 === 还要严格的是<code>Object.is()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="number">123</span>, <span class="number">123</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="number">123</span>, <span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; <span class="literal">NaN</span> === <span class="literal">NaN</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h2><p>Symbols 是 Primitive values，用<code>Symbol();</code>来创建</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mySymbol = <span class="keyword">new</span> <span class="built_in">Symbol</span>(<span class="string">&quot;mySymbol&quot;</span>);</span><br></pre></td></tr></table></figure><p>每个 Symbols 都是唯一的，并且不能通过值来比较：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">Symbol</span>() === <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure><p>Symbols 通常有两种用法：</p><ul><li>用来定义常量</li><li>用来定义 Objects 里唯一的 property key</li></ul><h3 id="Symbols-通常用来定义常量的值"><a href="#Symbols-通常用来定义常量的值" class="headerlink" title="Symbols 通常用来定义常量的值"></a>Symbols 通常用来定义常量的值</h3><p>比如我们需要用常量聊表示颜色，通常我们会这么定义：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="string">&quot;Blue&quot;</span>;</span><br></pre></td></tr></table></figure><p>如果我们不小心写错了，多加一个蓝色的常量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MOOD_BLUE = <span class="string">&quot;Blue&quot;</span>;</span><br></pre></td></tr></table></figure><p>这个时候这两个常量就没办法区分了：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; COLOR_BLUE === MOOD_BLUE <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>我们可以用 Symbol 来解决这个问题：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> MOOD_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(COLOR_BLUE === MOOD_BLUE); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> COLOR_RED = <span class="built_in">Symbol</span>(<span class="string">&quot;Red&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_ORANGE = <span class="built_in">Symbol</span>(<span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_YELLOW = <span class="built_in">Symbol</span>(<span class="string">&quot;Yellow&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_GREEN = <span class="built_in">Symbol</span>(<span class="string">&quot;Green&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_VIOLET = <span class="built_in">Symbol</span>(<span class="string">&quot;Violet&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComplement</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> COLOR_RED:</span><br><span class="line">      <span class="keyword">return</span> COLOR_GREEN;</span><br><span class="line">    <span class="keyword">case</span> COLOR_ORANGE:</span><br><span class="line">      <span class="keyword">return</span> COLOR_BLUE;</span><br><span class="line">    <span class="keyword">case</span> COLOR_YELLOW:</span><br><span class="line">      <span class="keyword">return</span> COLOR_VIOLET;</span><br><span class="line">    <span class="keyword">case</span> COLOR_GREEN:</span><br><span class="line">      <span class="keyword">return</span> COLOR_RED;</span><br><span class="line">    <span class="keyword">case</span> COLOR_BLUE:</span><br><span class="line">      <span class="keyword">return</span> COLOR_ORANGE;</span><br><span class="line">    <span class="keyword">case</span> COLOR_VIOLET:</span><br><span class="line">      <span class="keyword">return</span> COLOR_YELLOW;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Unknown color: &quot;</span> + color);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Symbols-用来定义-Objects-里唯一的-property-key"><a href="#Symbols-用来定义-Objects-里唯一的-property-key" class="headerlink" title="Symbols 用来定义 Objects 里唯一的 property key"></a>Symbols 用来定义 Objects 里唯一的 property key</h3><p>比如下面这个对象：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pt = &#123;</span><br><span class="line">  x: <span class="number">7</span>,</span><br><span class="line">  y: <span class="number">4</span>,</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="built_in">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="built_in">this</span>.y&#125;</span>)`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>其中 x 和 y 是<code>base level</code>的 key，<code>toString()</code>是<code>meta-level</code>的 key，这两种层次的 key 绝对不能定义成相同的名称，这个时候就可以用<code>Symbol</code>来定义对象的属性名称，因为<code>Symbol</code> 的值是唯一的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> specialMethod = <span class="built_in">Symbol</span>(<span class="string">&quot;specialMethod&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  _id: <span class="string">&quot;kf12oi&quot;</span>,</span><br><span class="line">  [specialMethod]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._id;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="undefined-vs-null"><a href="#undefined-vs-null" class="headerlink" title="undefined vs. null"></a>undefined vs. null</h2><ul><li><p>undefined 是指声明但是未被初始化的值，它有以下使用场景：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar1; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> myVar2; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;; <span class="comment">// property .unknowProp is also undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// function with no return statment, is also return undefined</span></span><br></pre></td></tr></table></figure></li><li><p>null 是指故意赋值为 null，有目的使值为 null，它有以下使用场景：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="built_in">Object</span>.prototype); <span class="comment">// 对于对象的 protptype 要不为对象，要不就是null</span></span><br><span class="line"></span><br><span class="line">/a/.exec(<span class="string">&quot;x&quot;</span>); <span class="comment">// 对于正则表达式，如果没有匹配那就是null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="literal">undefined</span>, <span class="attr">b</span>: <span class="literal">null</span> &#125;); <span class="comment">//&#x27;&#123;&quot;b&quot;: null&#125;&#x27;  //JSON data format 只支持null不支持undefined</span></span><br></pre></td></tr></table></figure></li></ul><p>如何来判断是 undefined 还是 null 呢？</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(x === <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(x === <span class="literal">undefined</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(x !== <span class="literal">undefined</span> &amp;&amp; x !== <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(x === <span class="literal">undefined</span> || x === <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(!x)</span><br></pre></td></tr></table></figure><h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>在<code>if(value)&#123;&#125;</code> 语句判断是否为 true 的时候，实际代码是<code>if(Boolean(value) === true)</code>:</p><p>以下的值在转为 Boolean 的时候，全是 false：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span>;</span><br><span class="line"><span class="literal">null</span>;</span><br><span class="line"><span class="built_in">Boolean</span>: <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">Number</span>: <span class="number">0</span>, <span class="literal">NaN</span>;</span><br><span class="line">Bigint: <span class="number">0n</span>;</span><br><span class="line">string: <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure><p>除此之外的（包括所有的 objects）在转为 Boolean 的时候，全是 true：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="string">&quot;abc&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>([]); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>(&#123;&#125;); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>boolean 转换规则</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common06.png" alt="js-common06">：</p><h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>JS 中的 Number 同时用来表示 integers 和 floating point numbers， 比如：98 和 123.45</p><p>需要注意的是, 对于 integers 是指没有小数的浮点数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">98</span> === <span class="number">98.0</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>用于 Number 的操作符有：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common07.png" alt="js-common07"></p><p>对于 + 号，除了用于加法计算以外，还有以下的用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 表示正数：+n</span><br><span class="line">    +(-<span class="number">7</span>) -&gt; -<span class="number">7</span></span><br><span class="line">    -(-<span class="number">7</span>) -&gt; <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 转换为数字</span><br><span class="line">    +<span class="string">&#x27;5&#x27;</span> -&gt; <span class="number">5</span></span><br><span class="line">    +<span class="string">&#x27;-12&#x27;</span> -&gt; -<span class="number">12</span></span><br><span class="line">    -<span class="string">&#x27;9&#x27;</span> -&gt; -<span class="number">9</span></span><br><span class="line">    +<span class="string">&#x27;abc&#x27;</span> -&gt; <span class="literal">NaN</span></span><br></pre></td></tr></table></figure><h3 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h3><p>对于 NaN 的判断：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> n = <span class="literal">NaN</span>;</span><br><span class="line"><span class="built_in">console</span>.log(n === n); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.isNaN(n, <span class="literal">NaN</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(n, <span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>如果需要在数组里找到 NaN：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>); <span class="comment">// -1, 这个方法不能用来找 NaN</span></span><br><span class="line">[<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">Number</span>.isNaN(x)); <span class="comment">// 0, 可以找到NaN</span></span><br><span class="line">[<span class="literal">NaN</span>].find(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">Number</span>.isNaN(x)); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><h3 id="Infinity"><a href="#Infinity" class="headerlink" title="Infinity"></a>Infinity</h3><p>如果 Number 太大的话，就会返回 Infinity</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">1023</span>); <span class="comment">// 8.98846567431158e+307</span></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">1024</span>); <span class="comment">// Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span> / <span class="number">0</span> - <span class="comment">// Infinity</span></span><br><span class="line">  <span class="number">5</span> / <span class="number">0</span>; <span class="comment">// -Infinity</span></span><br></pre></td></tr></table></figure><p>Infinity 比所有的数字都大（除了 NaN)， 推荐用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMinimum</span>(<span class="params">numbers</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> min = <span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> n <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; min) min = n;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">findMinimum([<span class="number">5</span>, -<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">// -1</span></span><br><span class="line">findMinimum([]); <span class="comment">// Infinity</span></span><br></pre></td></tr></table></figure><p>对于 Infinity 判断：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="literal">Infinity</span>;</span><br><span class="line"><span class="built_in">console</span>.log(x === <span class="literal">Infinity</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.isFinite(x)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>Number 的转换规则：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common08.png" alt="js-common08"></p><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>字符串可以通过数组的方式访问：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str[<span class="number">1</span>]); <span class="comment">//b</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length); <span class="comment">//3</span></span><br></pre></td></tr></table></figure><p>也可以通过 for-of 或者展开运算符（…）来访问：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> <span class="string">&quot;xuz&quot;</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// u</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure><p>可以通过<code>...</code> 把字符转换成数组：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([...<span class="string">&quot;xuz&quot;</span>]); <span class="comment">// [&#x27;x&#x27;,&#x27;u&#x27;,&#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure><p>通过 + 号来连接字符串，推荐使用这种方式，因为 JS 引擎对这种方式已经优化过了：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span> + <span class="string">&quot; times &quot;</span> + <span class="number">4</span>); <span class="comment">// &#x27;3 times 4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">str += <span class="string">&quot;say it&quot;</span>;</span><br><span class="line">str += <span class="string">&quot; one more&quot;</span>;</span><br><span class="line">str += <span class="string">&quot; time&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// &#x27;say it one more time&#x27;</span></span><br></pre></td></tr></table></figure><p>转换为 string 有以下三种方式：</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> String(<span class="symbol">x</span>); （推荐使用这种方式）</span><br><span class="line"><span class="number">2.</span> <span class="string">&#x27;&#x27;</span> + <span class="symbol">x</span></span><br><span class="line"><span class="number">3.</span> <span class="symbol">x</span>.toString() （这种方式对 <span class="literal">undefined</span> 和 null 不起作用）</span><br></pre></td></tr></table></figure><p>String 的转换规则：<br><img src="/assets/images/posts/js/js-common09.png" alt="js-common">{:height=”50%” width=”50%”}</p><h2 id="枚举对象属性"><a href="#枚举对象属性" class="headerlink" title="枚举对象属性"></a>枚举对象属性</h2><p>有三种原生的方法可以列出或者枚举对象的属性。</p><ul><li>for…in 循环，该方法会依次访问一个对象以及其原型链中所有可枚举的属性</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> proptery <span class="keyword">in</span> obj2) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;proptery is &quot;</span> + proptery + <span class="string">&quot; value is &quot;</span> + obj2[proptery]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//result:</span></span><br><span class="line"><span class="comment">//proptery is e value is 5</span></span><br><span class="line"><span class="comment">//proptery is a value is 1</span></span><br><span class="line"><span class="comment">//proptery is b value is 2</span></span><br><span class="line"><span class="comment">//proptery is c value is 3</span></span><br><span class="line"><span class="comment">//proptery is d value is 4</span></span><br></pre></td></tr></table></figure><ul><li>Object.keys(o)，该方法返回对象自身（不包括原型中）的所有属性的名称的数组。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line">obj2.f = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> items = <span class="built_in">Object</span>.keys(obj2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(items); <span class="comment">// [&quot;e&quot;,&quot;f&quot;]</span></span><br></pre></td></tr></table></figure><ul><li>Object.getOwnPropertyNames(o)，该方法返回一个数组，它包好了对象 o 所有的属性（无论是否可枚举）的名称。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line">obj2.f = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> items = <span class="built_in">Object</span>.getOwnPropertyNames(obj2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(items); <span class="comment">// [&quot;e&quot;,&quot;f&quot;]</span></span><br></pre></td></tr></table></figure><h2 id="判断对象是否为空"><a href="#判断对象是否为空" class="headerlink" title="判断对象是否为空"></a>判断对象是否为空</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> pro <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(pro)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj) === <span class="built_in">JSON</span>.stringify(&#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span> &amp;&amp; obj.constructor === <span class="built_in">Object</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四则运算符"><a href="#四则运算符" class="headerlink" title="四则运算符"></a>四则运算符</h2><p>加法运算符不同于其他几个运算符，它有以下几个特点：</p><p>运算中其中一方为字符串，那么就会把另一方也转换为字符串</p><p>如果一方不是字符串或者数字，那么会将它转换为数字或者字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">&quot;1&quot;</span>; <span class="comment">// &#x27;11&#x27;</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">true</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="number">4</span> + [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// &quot;41,2,3&quot;</span></span><br></pre></td></tr></table></figure><p>如果你对于答案有疑问的话，请看解析：</p><ul><li><p>对于第一行代码来说，触发特点一，所以将数字 1 转换为字符串，得到结果 ‘11’</p></li><li><p>对于第二行代码来说，触发特点二，所以将 true 转为数字 1</p></li><li><p>对于第三行代码来说，触发特点二，所以将数组通过 toString 转为字符串 1,2,3，得到结果 41,2,3</p></li></ul><p>另外对于加法还需要注意这个表达式 ‘a’ + + ‘b’</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;a&quot;</span> + +<span class="string">&quot;b&quot;</span>; <span class="comment">// -&gt; &quot;aNaN&quot;</span></span><br></pre></td></tr></table></figure><p>因为 + ‘b’ 等于 NaN，所以结果为 “aNaN”，你可能也会在一些代码中看到过 + ‘1’ 的形式来快速获取 number 类型。</p><p>那么对于除了加法的运算符来说，只要其中一方是数字，那么另一方就会被转为数字</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span> * <span class="string">&quot;3&quot;</span>; <span class="comment">// 12</span></span><br><span class="line"><span class="number">4</span> * []; <span class="comment">// 0</span></span><br><span class="line"><span class="number">4</span> * [<span class="number">1</span>, <span class="number">2</span>]; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><h2 id="map-filter-reduce"><a href="#map-filter-reduce" class="headerlink" title="map, filter, reduce"></a>map, filter, reduce</h2><p>map 作用是生成一个新数组，遍历原数组，将每个元素拿出来做一些变换然后放入到新的数组中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">v</span>) =&gt;</span> v + <span class="number">1</span>); <span class="comment">// -&gt; [2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>另外 map 的回调函数接受三个参数，分别是当前索引元素，索引，原数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>].map(<span class="built_in">parseInt</span>);</span><br><span class="line"><span class="comment">//第一轮遍历 parseInt(&#x27;1&#x27;, 0) -&gt; 1</span></span><br><span class="line"><span class="comment">//第二轮遍历 parseInt(&#x27;2&#x27;, 1) -&gt; NaN</span></span><br><span class="line"><span class="comment">//第三轮遍历 parseInt(&#x27;3&#x27;, 2) -&gt; NaN</span></span><br></pre></td></tr></table></figure><p>filter 的作用也是生成一个新数组，在遍历数组的时候将返回值为 true 的元素放入新数组，我们可以利用这个函数删除一些不需要的元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> newArray = array.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item !== <span class="number">6</span>);</span><br><span class="line"><span class="built_in">console</span>.log(newArray); <span class="comment">// [1, 2, 4]</span></span><br></pre></td></tr></table></figure><p>和 map 一样，filter 的回调函数也接受三个参数，用处也相同。</p><p>最后我们来讲解 reduce 这块的内容，同时也是最难理解的一块内容。reduce 可以将数组中的元素通过回调函数最终转换为一个值。</p><p>如果我们想实现一个功能将函数里的元素全部相加得到一个值，可能会这样写代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  total += arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(total); <span class="comment">//6</span></span><br></pre></td></tr></table></figure><p>但是如果我们使用 reduce 的话就可以将遍历部分的代码优化为一行代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> sum = arr.reduce(<span class="function">(<span class="params">acc, current</span>) =&gt;</span> acc + current, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum);</span><br></pre></td></tr></table></figure><p>对于 reduce 来说，它接受两个参数，分别是回调函数和初始值，接下来我们来分解上述代码中 reduce 的过程</p><ul><li>首先初始值为 0，该值会在执行第一次回调函数时作为第一个参数传入</li><li>回调函数接受四个参数，分别为累计值、当前元素、当前索引、原数组，后三者想必大家都可以明白作用，这里着重分析第一个参数</li><li>在一次执行回调函数时，当前值和初始值相加得出结果 1，该结果会在第二次执行回调函数时当做第一个参数传入</li><li>所以在第二次执行回调函数时，相加的值就分别是 1 和 2，以此类推，循环结束后得到结果 6</li></ul><p>想必通过以上的解析大家应该明白 reduce 是如何通过回调函数将所有元素最终转换为一个值的，当然 reduce 还可以实现很多功能，接下来我们就通过 reduce 来实现 map 函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> mapArray = arr.map(<span class="function">(<span class="params">value</span>) =&gt;</span> value * <span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> reduceArray = arr.reduce(<span class="function">(<span class="params">acc, current</span>) =&gt;</span> &#123;</span><br><span class="line">  acc.push(current * <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="built_in">console</span>.log(mapArray, reduceArray); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure><h2 id="如何判断相等性"><a href="#如何判断相等性" class="headerlink" title="如何判断相等性"></a>如何判断相等性</h2>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-核心基础知识点&quot;&gt;&lt;a href=&quot;#JavaScript-核心基础知识点&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 核心基础知识点&quot;&gt;&lt;/a&gt;JavaScript 核心基础知识点&lt;/h1&gt;&lt;h2 id=&quot;Primitive-values-vs-Objects&quot;&gt;&lt;a href=&quot;#Primitive-values-vs-Objects&quot; class=&quot;headerlink&quot; title=&quot;Primitive values vs. Objects&quot;&gt;&lt;/a&gt;Primitive values vs. Objects&lt;/h2&gt;&lt;p&gt;Primitive values 是指：undefined, null, boolean, number, bigint, string, symbol。除此之外的都是 Objects。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Primitive values 是通过值传递的，两个 Primitive 比较的时候，是比较它们两个的值。&lt;/li&gt;
&lt;li&gt;Objects 是通过引用传递，两个 Objects 比较的时候，是比较它们两个的引用。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 详解Event Loop运行机制</title>
    <link href="http://example.com/2021/10/08/JavaScript%20%E8%AF%A6%E8%A7%A3Event-Loop%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/"/>
    <id>http://example.com/2021/10/08/JavaScript%20%E8%AF%A6%E8%A7%A3Event-Loop%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/</id>
    <published>2021-10-08T09:35:04.000Z</published>
    <updated>2022-07-28T03:24:34.832Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-详解-Event-Loop-运行机制"><a href="#JavaScript-详解-Event-Loop-运行机制" class="headerlink" title="JavaScript 详解 Event Loop 运行机制"></a>JavaScript 详解 Event Loop 运行机制</h1><p>在这篇文章中会介绍以下内容：</p><ul><li><p>engine runtime 和 call stack 简介（以 V8 引擎为例）</p></li><li><p>Event Loop 运行机制的详解</p></li><li><p>microtasks 和 macrotask 的执行顺序</p></li></ul><h2 id="engine-runtime-和-call-stack-简介"><a href="#engine-runtime-和-call-stack-简介" class="headerlink" title="engine runtime 和 call stack 简介"></a>engine runtime 和 call stack 简介</h2><p>在 chrome 浏览器和 nodejs 里都是用 V8 引擎解析和运行 JS 代码，我们先来看下 V8 引擎的简化图：</p><span id="more"></span><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop01-20220728111457618.png" alt="js-eventloop01"></p><p>上图中 Heap 是用来做内存分配，<code>Call Stack</code>是用来执行 JS 代码，由于 JS 是单线程所以只有一个<code>Call Stack</code>。实际我们写网页开发的时候，除了一些 JS 代码，我们还会大量用到：DOM 事件、AJAX(XMLHttpRequest)、setTimeout 等等一些异步事件。从上图可以看出，这些异步事件都没有在 V8 引擎里，事实上这些异步事件不属于 V8 引擎，而是属于浏览器，并且 DOM 事件、AJAX(XMLHttpRequest)、setTimeout 都分别有单独的线程来处理。由于<code>Call Stack</code>执行（JS 运行线程）和页面渲染线程是互斥的，如果所有的事情都由 V8 引擎处理，这样肯定会导致页面卡顿。</p><p>浏览器多线程和 callback 机制完美避免了页面卡顿的问题。DOM 事件、AJAX(XMLHttpRequest)、setTimeout 这些异步事件在各自单独的线程处理完以后，每个异步事件都有 callback 回调函数，V8 引擎再把这些回调函数放在<code>Call Stack</code>执行。上述整个运行机制可以称为是 runtime，可以简化如下图：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop02.png" alt="js-eventloop02"></p><p>如上图所示，web 异步事件结束以后，会有 callback，然后 runtime 把这些 callback 事件放到<code>Callback Queue</code>里，一旦<code>Call Stack</code>所有的方法都执行完以后，<code>Event Loop</code>会依次把 <code>Callback Queue</code>里的回调函数放到<code>Call Stack</code>里执行。</p><h2 id="Event-Loop-运行机制的详解"><a href="#Event-Loop-运行机制的详解" class="headerlink" title="Event Loop 运行机制的详解"></a>Event Loop 运行机制的详解</h2><p>Event Loop 实际上就是一个 job，用来检测 Call Stack 和 Callback Queue，一旦 Call Stack 里代码执行完以后，就会把 Callback Queue 里第一个 callback 函数放到 Call Stack 里执行。我们来看个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure><p>运行运行结果如下:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">script</span> start</span><br><span class="line"><span class="keyword">script</span> <span class="keyword">end</span></span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure><p>我们具体一步一步看下整个流程：</p><p>1，代码没有运行之前，<code>Call Stack</code> <code>Callback Queue</code>都是空的</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop03.png" alt="js-eventloop03"></p><p>2，把<code>console.log(&#39;script start&#39;)</code>加到 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop04.png" alt="js-eventloop04"></p><p>3，执行<code>console.log(&#39;script start&#39;)</code>，在 console 里打印出<code>script start</code>，执行结束后把它移出 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop05.png" alt="js-eventloop05"></p><p>4，把 setTimeout 放到 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop06.png" alt="js-eventloop06"></p><p>5, 执行 setTimeout，用 setTimout 线程执行 timeout 时间，Call Stack 中 setTimeout 执行结束，把它移出 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop07.png" alt="js-eventloop07"></p><p>6, 把<code>console.log(&#39;script end&#39;)</code>加到 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop08.png" alt="js-eventloop08"></p><p>7，执行<code>console.log(&#39;script end&#39;)</code>，在 console 里打印出<code>script end</code></p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop09.png" alt="js-eventloop09"></p><p>8，<code>console.log(&#39;script end&#39;)</code>执行结束，把它移出 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop10.png" alt="js-eventloop10"></p><p>9，1000 毫秒以后，计时结束，把 callback<code>cb1</code>函数放到 Callback Queue 里</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop11.png" alt="js-eventloop11"></p><p>10，此时 Callback Stack 是空的，Event Loop 把 cb1 拿到 Callback Stack 里</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop12.png" alt="js-eventloop12"></p><p>11，执行 cb1，cb1 里有<code>console.log(&#39;setTimeout&#39;)</code>，把<code>console.log(&#39;setTimeout&#39;)</code>放到 Call Stack 里</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop13.png" alt="js-eventloop13"></p><p>12，执行<code>console.log(&#39;setTimeout&#39;)</code>，在 console 里打印出<code>setTimeout</code>，<code>console.log(&#39;setTimeout&#39;)</code>执行结束，把它移出 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop14.png" alt="js-eventloop14"></p><p>13，<code>cb1</code>执行结束，把它移出 Call Stack</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop15.png" alt="js-eventloop15"></p><p>总结来说就是，JS 是单线程的，只有一个 Call Stack，浏览器是多线程的，并且 DOM 事件、AJAX(XMLHttpRequest)、setTimeout 都是有单独的线程处理。在这些异步事件结束，runtime 会把它们的 callback 按顺序放到 Callback Queue 里，Event Loop 会检测 Call Stack，一旦它为空，就会把 Callback Queue 里的回调函数依次放到 Call Stack 里执行，直到 Callback Queue 为空。</p><h2 id="microtasks-和-macrotask-的执行顺序"><a href="#microtasks-和-macrotask-的执行顺序" class="headerlink" title="microtasks 和 macrotask 的执行顺序"></a>microtasks 和 macrotask 的执行顺序</h2><p>刚才用 setTimeout 为例，解释了 JS 中 Event Loop 机制是怎么运行的，也提到过 runtime 会把回调函数依次按时间先后顺序放到 Callback Queue 里，然后 Event Loop 再依次把这些回调函数放到 Call Stack 里运行。我们在浏览器 Console 运行以下代码，看下结果：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure><p>执行结果如下：</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">script</span> start</span><br><span class="line"><span class="keyword">script</span> <span class="keyword">end</span></span><br><span class="line">promise1</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure><blockquote><p>上述代码虽然 setTimeout 延时为0，其实还是异步的。因为H5标准规定 setTimeout 函数的第二个参数不能小于4毫秒，不足会自动增加。</p></blockquote><p>setTimeout 和 promise 都是异步事件，而且 setTimeout 写在 promise 之前，为什么 setTimeout 的回调要比 promise 后执行呢？那是因为 promise 属于微任务（microtasks）而 setTimeout 属于宏任务（macrotask），微任务（microtasks）的优先级要高于宏任务（macrotask）。</p><p>首先我们需要明白以下几件事情：</p><ul><li>JS 分为同步任务和异步任务</li><li>同步任务都在主线程上执行，形成一个执行栈</li><li>主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。</li><li>一旦执行栈中的所有同步任务执行完毕（此时 JS 引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。</li></ul><p>根据规范，事件循环是通过任务队列的机制来进行协调的。一个 Event Loop 中，可以有一个或者多个任务队列(task queue)，一个任务队列便是一系列有序任务(task)的集合；每个任务都有一个任务源(task source)，源自同一个任务源的 task 必须放到同一个任务队列，从不同源来的则被添加到不同队列。 setTimeout/Promise 等 API 便是任务源，而进入任务队列的是他们指定的具体执行任务。</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop16.png" alt="js-eventloop16"></p><p>Callback Queue（Task Queue）里的回调事件称为宏任务（macrotask），每次异步事件结束后，它们的回调函数会依次按时间顺序放在 Callback Queue 里，等待 Event Loop 依次把它们放到 Call Stack 里执行。比如：<code>setInterval</code> <code>setTimeout</code> <code>script</code> <code>setImmediate</code> <code>I/O</code> <code>UI rendering</code>就是宏任务（macrotask）。</p><p>微任务（microtasks）是指异步事件结束后，回调函数不会放到 Callback Queue，而是放到一个微任务队列里（Microtasks Queue），在 Call Stack 为空时，Event Loop 会先查看微任务队列里是否有任务，如果有就会先执行微任务队列里的回调事件；如果没有微任务，才会到 Callback Queue 执行回到事件。比如：<code>promise</code> <code>process.netTick</code> <code>Object.observe</code> <code>MutationObserver</code>就是微任务（microtasks）。</p><blockquote><p>在 ES6 规范中，microtask 称为 jobs，macrotask 称为 task。</p></blockquote><p>整个 Event Loop 的执行顺序如下：</p><ul><li>执行一个宏任务（栈中没有就从事件队列中获取）</li><li>执行过程中如果遇到微任务，就将它添加到微任务的任务队列中</li><li>宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）</li><li>当前宏任务执行完毕，开始检查渲染，然后 GUI 线程接管渲染</li><li>渲染完毕后，JS 线程继续接管，开始下一个宏任务（从事件队列中获取，也就是 callbacke queue）</li></ul><p>流程图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop17.jpg" alt="js-eventloop17"></p><p>我们再把代码改一下，在创建 promise 的时候，加一行<code>console.log(&#39;Promise&#39;)</code>，而且在第一个 promise resolve 的时候再加一个 setTimeout，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Promise&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout in promise1&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">Promise</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">setTimeout in promise1</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure><p><code>console.log(&#39;Promise&#39;)</code>在这里是同步代码，<code>console.log(&#39;script end&#39;)</code>是同步代码且放在最后，所以<code>Promise</code>在<code>script end</code>前面，而且在微任务（microtasks）里有宏任务（macrotask），macrotask 还是会依次被放到 Callback Queue 等待执行。</p><p>如果有 async await 呢？再来看一段代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请写出输出内容</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">async2</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">async1 end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure><p>我们知道 Promise 中的异步体现在 then 和 catch 中，所以写在 Promise 中的代码是被当做同步任务立即执行的。而在 async/await 中，在出现 await 出现之前，其中的代码也是立即执行的。那么出现了 await 时候发生了什么呢？</p><p>由于因为 async await 本身就是 promise+generator 的语法糖。所以 await 后面的代码是 microtask。所以对于上面代码中的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>等价于：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve(async2()).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们来看一个变式, 将 async2 中的函数也变成了 Promise 函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//async2做出如下更改：</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise3&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise4&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">promise3</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">async1 end</span></span><br><span class="line"><span class="comment">promise4</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure><p>我们再来看一个变式，将 async1 中 await 后面的代码和 async2 的代码都改为异步的，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="comment">//更改如下：</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//更改如下：</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout3&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout3</span></span><br><span class="line"><span class="comment">setTimeout2</span></span><br><span class="line"><span class="comment">setTimeout1</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure><p>我们再来看一个变式，代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> a2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">a2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">a1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&quot;promise2.then&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise2.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise3&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">a1 start</span></span><br><span class="line"><span class="comment">a2</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">a1 end</span></span><br><span class="line"><span class="comment">promise2.then</span></span><br><span class="line"><span class="comment">promise3</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-详解-Event-Loop-运行机制&quot;&gt;&lt;a href=&quot;#JavaScript-详解-Event-Loop-运行机制&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 详解 Event Loop 运行机制&quot;&gt;&lt;/a&gt;JavaScript 详解 Event Loop 运行机制&lt;/h1&gt;&lt;p&gt;在这篇文章中会介绍以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;engine runtime 和 call stack 简介（以 V8 引擎为例）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Event Loop 运行机制的详解&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;microtasks 和 macrotask 的执行顺序&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;engine-runtime-和-call-stack-简介&quot;&gt;&lt;a href=&quot;#engine-runtime-和-call-stack-简介&quot; class=&quot;headerlink&quot; title=&quot;engine runtime 和 call stack 简介&quot;&gt;&lt;/a&gt;engine runtime 和 call stack 简介&lt;/h2&gt;&lt;p&gt;在 chrome 浏览器和 nodejs 里都是用 V8 引擎解析和运行 JS 代码，我们先来看下 V8 引擎的简化图：&lt;/p&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 深入理解this</title>
    <link href="http://example.com/2021/07/26/JavaScript%20%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3this/"/>
    <id>http://example.com/2021/07/26/JavaScript%20%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3this/</id>
    <published>2021-07-26T09:01:56.000Z</published>
    <updated>2022-07-30T09:13:30.171Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-深入理解-this"><a href="#JavaScript-深入理解-this" class="headerlink" title="JavaScript 深入理解 this"></a>JavaScript 深入理解 this</h1><p>有四种可执行代码可以创建执行上下文，分别是<code>global code</code> <code>function code</code> <code>module</code>和<code>eval code</code>。接下来分别介绍这<code>global code</code> <code>function code</code>可执行代码中的 this（ThisBinding）到底指的是什么。</p><h2 id="global-code-的-this"><a href="#global-code-的-this" class="headerlink" title="global code 的 this"></a>global code 的 this</h2><p>在 JS 引擎运行 global code 之前，会创建一个全局执行上下文压入执行栈的栈底，这个全局执行上文的 ThisBinding 绑定的是全局对象，在浏览器里指的就是 window。</p><h2 id="function-code-的-this"><a href="#function-code-的-this" class="headerlink" title="function code 的 this"></a>function code 的 this</h2><span id="more"></span><p>词法环境是由代码结构决定的，开发把代码写成什么样，词法环境就是怎么样，跟方法在哪里调用没有关系。但是对于函数的 this 刚好反过来，跟代码在哪里定义没有关系，而跟代码在哪里调用有关系。一般我们调用函数有以下四种方式：</p><ul><li>普通函数调用，比如 foo()或者(functon(){})()</li><li>作为对象方法调用，比如 obj.foo()</li><li>构造函数调用，比如 new foo()</li><li>使用 call、apply、bind 等方法调用</li></ul><p>在介绍着几种函数调用之前，我们先来看下 ECMAScript 对 this 的规范：</p><blockquote><p>ECMAScript规范： 严格模式时，函数内的this绑定严格指向传入的thisArgument。非严格模式时，若传入的thisArgument不为undefined或null时，函数内的this绑定指向传入的thisArgument；为undefined或null时，函数内的this绑定指向全局的this。</p></blockquote><h3 id="普通函数调用"><a href="#普通函数调用" class="headerlink" title="普通函数调用"></a>普通函数调用</h3><p>普通函数的调用，包括函数调用 foo()和立即调用函数表达式(functon(){})()，传到函数里的 thisArgument 是 undefined。根据 ECMAScript 规范，如果在非严格模式下，普通函数里的 this 就是全局对象，而在严格模式下就为 undefined。</p><p>比如有以下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">//window</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a); <span class="comment">//2</span></span><br><span class="line">  <span class="built_in">console</span>.log(val); <span class="comment">//3</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">3</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">foo(3) 相当于是：foo().call(undefined,3) 的简化版本。</span></span><br><span class="line"><span class="comment">为了代码方便，所以有直接普通函数调用，thisArgument 默认是undefined，不用每次都敲这个undefined。</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure><p>如果把 foo 方法改为严格模式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &quot;use strict&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// undefind</span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure><p>执行上面这段代码，会报错：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">VM162:<span class="number">4</span> Uncaught TypeError: Cannot <span class="keyword">read</span> <span class="keyword">property</span><span class="title"> </span>&#x27;a&#x27; of undefined</span><br><span class="line">    at foo (<span class="tag">&lt;anonymous&gt;</span>:<span class="number">4</span>:<span class="number">22</span>)</span><br></pre></td></tr></table></figure><h3 id="对象方法调用"><a href="#对象方法调用" class="headerlink" title="对象方法调用"></a>对象方法调用</h3><p>作为对象方法调用，传到函数里的 thisArgument 是该对象。比如有如下代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>需要注意的是，只有离函数最近的这个对象，才是该函数的 this，比如有代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  a: <span class="number">42</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  obj2: obj2,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj1.obj2.foo(); <span class="comment">//42</span></span><br></pre></td></tr></table></figure><p>还有一种比较看起来像对象方法调用，实际上是普通函数调用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = obj.foo;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;global variable&quot;</span>;</span><br><span class="line">bar(); <span class="comment">// global variable</span></span><br></pre></td></tr></table></figure><h3 id="构造函数调用"><a href="#构造函数调用" class="headerlink" title="构造函数调用"></a>构造函数调用</h3><p>new functionname()构造函数调用，this 指的是构造出来的新对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bar.a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="使用-call、apply、bind-等方法调用"><a href="#使用-call、apply、bind-等方法调用" class="headerlink" title="使用 call、apply、bind 等方法调用"></a>使用 call、apply、bind 等方法调用</h3><p>call、apply、bind 调用，可以显示传递对象给函数的 thisArg，默认这几个函数的第一个形参是 thisArg:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply( thisArg, argArray )</span><br><span class="line"><span class="built_in">Function</span>.prototype.call( thisArg , arg1, [ arg2, ... ] )</span><br><span class="line"><span class="built_in">Function</span>.prototype.bind( thisArg , [ arg1, [ arg2, ... ] ] )</span><br></pre></td></tr></table></figure><p>需要注意的是当 thisArg 为 null 或者 undefined，在非严格模式下，this 是全局对象。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print.call(<span class="literal">null</span>); <span class="comment">//window</span></span><br><span class="line">print.call(<span class="literal">undefined</span>); <span class="comment">//window</span></span><br><span class="line">print.call(obj); <span class="comment">//obj</span></span><br></pre></td></tr></table></figure><h2 id="箭头函数的-this"><a href="#箭头函数的-this" class="headerlink" title="箭头函数的 this"></a>箭头函数的 this</h2><p>箭头函数在调用的时候不会绑定 this，它会去词法环境链上寻找 this（parent scope），所以箭头函数的 this 取决于它定义的位置（包裹箭头函数的第一个普通函数的 this），也就是箭头函数会跟包着它的作用域共享一个词法作用域。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> foo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;;</span><br><span class="line">foo.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">20</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line">obj.foo(); <span class="comment">//10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo();</span><br><span class="line">&#125;</span><br><span class="line">bar.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;); <span class="comment">//10</span></span><br></pre></td></tr></table></figure><h2 id="回调函数的-this"><a href="#回调函数的-this" class="headerlink" title="回调函数的 this"></a>回调函数的 this</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">20</span>,</span><br><span class="line">  foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">setTimeout</span>(obj.foo, <span class="number">0</span>); <span class="comment">//10</span></span><br></pre></td></tr></table></figure><p>上面代码运行结果是 10，作为回调函数的时候，传递的是函数体，并不是函数名。在执行栈里，obj.foo 已经执行完成被弹出执行栈，此时执行栈里只有全局执行上下文，setTimeout 回调函数体执行的时候 this 为全局对象。</p><p>要想避免这种情况，有两种方法，第一种方法是使用 bind 返回的指定好 this 绑定的函数作为回调函数传入：</p><ul><li>使用 bind 指定 this</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(obj.foo.bind(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;), <span class="number">0</span>); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure><ul><li>使用箭头函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> arrowFn = foo.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;);</span><br><span class="line">arrowFn(); <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">setTimeout</span>(arrowFn, <span class="number">0</span>); <span class="comment">//20</span></span><br></pre></td></tr></table></figure><h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure><p>在这个例子中，在 <code>createCardPicker</code>里面本身会返回一个匿名函数，这个匿名函数在倒数第二行代码的时候才会执行，这个时候<code>deck</code>并不是<code>this</code>的指向，在非严格模式的情况下，这里的<code>this</code>指的是全局对象<code>window</code>(如果是严格模式，那么<code>this</code>指向的是<code>undefined</code>)， 所以在指向代码的时候会报错而不是弹出相关的信息。</p><p>为了修复这里的 error，我们可以把 return 的方法改为箭头函数：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> 箭头函数的this，指向包裹它最近普通函数的this</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure><p>或者，我们可以用 bind 来绑定 this:</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li><p>箭头函数中没有 this 绑定，this 的值取决于其创建时所在词法环境链中最近的 this 绑定</p></li><li><p>非严格模式下，函数普通调用，this 指向全局对象</p></li><li><p>严格模式下，函数普通调用，this 为 undefined</p></li><li><p>函数作为对象方法调用，this 指向该对象</p></li><li><p>函数作为构造函数配合 new 调用，this 指向构造出的新对象</p></li><li><p>非严格模式下，函数通过 call、apply、bind 等间接调用，this 指向传入的第一个参数, 传入的第一个参数若为 undefined 或 null，this 指向全局对象</p></li><li><p>格模式下函数通过 call、apply、bind 等间接调用，this 严格指向传入的第一个参数</p></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-深入理解-this&quot;&gt;&lt;a href=&quot;#JavaScript-深入理解-this&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 深入理解 this&quot;&gt;&lt;/a&gt;JavaScript 深入理解 this&lt;/h1&gt;&lt;p&gt;有四种可执行代码可以创建执行上下文，分别是&lt;code&gt;global code&lt;/code&gt; &lt;code&gt;function code&lt;/code&gt; &lt;code&gt;module&lt;/code&gt;和&lt;code&gt;eval code&lt;/code&gt;。接下来分别介绍这&lt;code&gt;global code&lt;/code&gt; &lt;code&gt;function code&lt;/code&gt;可执行代码中的 this（ThisBinding）到底指的是什么。&lt;/p&gt;
&lt;h2 id=&quot;global-code-的-this&quot;&gt;&lt;a href=&quot;#global-code-的-this&quot; class=&quot;headerlink&quot; title=&quot;global code 的 this&quot;&gt;&lt;/a&gt;global code 的 this&lt;/h2&gt;&lt;p&gt;在 JS 引擎运行 global code 之前，会创建一个全局执行上下文压入执行栈的栈底，这个全局执行上文的 ThisBinding 绑定的是全局对象，在浏览器里指的就是 window。&lt;/p&gt;
&lt;h2 id=&quot;function-code-的-this&quot;&gt;&lt;a href=&quot;#function-code-的-this&quot; class=&quot;headerlink&quot; title=&quot;function code 的 this&quot;&gt;&lt;/a&gt;function code 的 this&lt;/h2&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 深浅拷贝</title>
    <link href="http://example.com/2021/07/17/JavaScript%20%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    <id>http://example.com/2021/07/17/JavaScript%20%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</id>
    <published>2021-07-17T09:25:35.000Z</published>
    <updated>2022-07-27T07:25:27.736Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-深浅拷贝"><a href="#JavaScript-深浅拷贝" class="headerlink" title="JavaScript 深浅拷贝"></a>JavaScript 深浅拷贝</h1><p>我们先来看下数组的拷贝，通常我们会用<code>slice()</code> <code>concat()</code>方法实现数组拷贝：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr1 = arr.concat();</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.slice();</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><span id="more"></span><p><code>slice()</code> <code>concat()</code>都是返回了一个新数组，没有改变原来的数组，看起来像是深拷贝。</p><p>我们再来看一个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr1 = arr.concat();</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.slice();</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//[1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br></pre></td></tr></table></figure><p>这边可以看到，如果数组里有对象，那么不会拷贝对象的值，而是拷贝对象的引用，原来数据对象的值发生改变，由于拷贝的是对象的引用，新拷贝的数组中对象的值也发生改变，拷贝的不是很彻底，<code>slice()</code> <code>concat()</code>是<strong>浅拷贝</strong>，对于对象，我们通常通过<code>assign()</code>或者展开运算符<code>...</code>来实现拷贝，同样如果对象里嵌套了对象，也只能实现浅拷贝：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;fuck&quot;</span>,</span><br><span class="line">  address: &#123; <span class="attr">city</span>: <span class="string">&quot;shanghai&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj);</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; ...obj &#125;;</span><br><span class="line">obj.address.city = <span class="string">&quot;beijing&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;beijing&quot;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;beijing&quot;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="利用-JSON-stringify-实现对数组和对象的深拷贝"><a href="#利用-JSON-stringify-实现对数组和对象的深拷贝" class="headerlink" title="利用 JSON.stringify 实现对数组和对象的深拷贝"></a>利用 JSON.stringify 实现对数组和对象的深拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr1 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(arr));</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, &#123; value: 5 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;fuck&quot;</span>,</span><br><span class="line">  address: &#123; <span class="attr">city</span>: <span class="string">&quot;shanghai&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br><span class="line">obj.address.city = <span class="string">&quot;beijing&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;shanghai&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>该方法不能对<code>undefined</code> <code>symbol</code> <code>函数</code> 进行深度拷贝。</p><h2 id="利用递归实现数组和对象深拷贝"><a href="#利用递归实现数组和对象深拷贝" class="headerlink" title="利用递归实现数组和对象深拷贝"></a>利用递归实现数组和对象深拷贝</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> newObj = obj <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] =</span><br><span class="line">        <span class="keyword">typeof</span> obj[key] === <span class="string">&quot;object&quot;</span> ? deepCopy(obj[key]) : obj[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们来验证下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr2 = deepCopy(arr);</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//1, 2, 3, 4, &#123; value: 5 &#125;]</span></span><br></pre></td></tr></table></figure><p>对于数组和对象的浅拷贝，去掉递归就可以了：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> newObj = obj <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] = obj[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>验证一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr2 = shallowCopy(arr);</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-深浅拷贝&quot;&gt;&lt;a href=&quot;#JavaScript-深浅拷贝&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 深浅拷贝&quot;&gt;&lt;/a&gt;JavaScript 深浅拷贝&lt;/h1&gt;&lt;p&gt;我们先来看下数组的拷贝，通常我们会用&lt;code&gt;slice()&lt;/code&gt; &lt;code&gt;concat()&lt;/code&gt;方法实现数组拷贝：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; arr = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; arr1 = arr.concat();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; arr2 = arr.slice();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(arr1); &lt;span class=&quot;comment&quot;&gt;//[1, 2, 3, 4, 5]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(arr2); &lt;span class=&quot;comment&quot;&gt;//[1, 2, 3, 4, 5]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript let和const</title>
    <link href="http://example.com/2021/07/16/JavaScript%20let%E5%92%8Cconst/"/>
    <id>http://example.com/2021/07/16/JavaScript%20let%E5%92%8Cconst/</id>
    <published>2021-07-16T05:35:15.000Z</published>
    <updated>2022-07-27T07:16:29.225Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-let-和-const"><a href="#JavaScript-let-和-const" class="headerlink" title="JavaScript let 和 const"></a>JavaScript let 和 const</h1><p>在 JS 中用 var 声明变量存在变量提升，比如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><p>这段代码输出的是 undefined，而不是 ReferenceError。这是因为 var 有变量提升，实际这段代码相当于：</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><p>还有在 for 循环中：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">//5</span></span><br></pre></td></tr></table></figure><p>数组里输出的值都是 5，并且 for 循环结束了，还是可以访问 i 的值。在 ES6 之前，是没有块级作用域，在 ES6 中引入了块级作用域，块级作用域是指：</p><ul><li>函数内部</li><li>块中(字符 { 和 } 之间的区域)</li></ul><h2 id="let-和-const"><a href="#let-和-const" class="headerlink" title="let 和 const"></a>let 和 const</h2><p>let 和 const 是用来声明块级作用域变量，它们有以下特性：</p><h3 id="1-不会被提升"><a href="#1-不会被提升" class="headerlink" title="1. 不会被提升"></a>1. 不会被提升</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//Uncaught ReferenceError: a is not defined</span></span><br></pre></td></tr></table></figure><h3 id="2-重复声明会报错"><a href="#2-重复声明会报错" class="headerlink" title="2. 重复声明会报错"></a>2. 重复声明会报错</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span>; <span class="comment">//Uncaught SyntaxError: Identifier &#x27;a&#x27; has already been declared</span></span><br></pre></td></tr></table></figure><h3 id="3-不绑定全局作用域"><a href="#3-不绑定全局作用域" class="headerlink" title="3. 不绑定全局作用域"></a>3. 不绑定全局作用域</h3><p>在全局作用就里使用<code>var</code>声明变量或者 <code>function</code>(只用这两种形式)，这个变量会作为全局对象的属性。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>但是用 let 和 const 不会：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><h3 id="let-和-const-的区别"><a href="#let-和-const-的区别" class="headerlink" title="let 和 const 的区别"></a>let 和 const 的区别</h3><p>const 用来声明常量，一旦初始化，就不能再被修改，否则会报错。<br>但是对于 const 声明的对象，对象的引用不能被修改，但是对象里的属性值是可以被修改的：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">data.a = <span class="number">2</span>; <span class="comment">//可以被修改</span></span><br><span class="line">data.b = <span class="number">3</span>; <span class="comment">//会加一个属性b</span></span><br><span class="line"></span><br><span class="line">data = &#123;&#125;; <span class="comment">//报错：Uncaught TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure><h3 id="暂时性死区-Temporal-Dead-Zone"><a href="#暂时性死区-Temporal-Dead-Zone" class="headerlink" title="暂时性死区(Temporal Dead Zone)"></a>暂时性死区(Temporal Dead Zone)</h3><p>在 JS 引擎扫描代码发现变量声明时，遇到 var 声明就提升到作用域顶部，遇到 let 和 const 就把这些声明放在暂时性死区。对于 let 和 const 变量，如果在执行它们的声明语句之前访问会报错，只有执行完声明语句之后才会从暂时性死区移出。</p><blockquote><p>The time between entering the scope of a variable and executing its declaration is called the temporal dead zone (TDZ) of that variable.</p><p>During this time, the variable is considered to be uninitialized (as if that were a special value it has).</p><p>If you access an uninitialized variable, you get a ReferenceError.</p><p>Once you reach a variable declaration, the variable is set to either the value of the initializer (specified via the assignment symbol) or undefined – if there is no initializer.</p></blockquote><p>需要注意的是 let const 会变量提升，但是在执行声明语句之前，是放在暂时性死区，提前调用就会报错；想象一下如果 let const 没有变量提升的话，在声明之前调用 let const 变量，就会当成<code>var = halo</code>处理了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saySomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  greeting = <span class="string">&quot;halo&quot;</span>; <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;greeting&#x27; before initialization</span></span><br><span class="line">  <span class="keyword">let</span> greeting;</span><br><span class="line">  <span class="built_in">console</span>.log(greeting);</span><br><span class="line">&#125;</span><br><span class="line">saySomething();</span><br></pre></td></tr></table></figure><h3 id="循环中的块级作用域"><a href="#循环中的块级作用域" class="headerlink" title="循环中的块级作用域"></a>循环中的块级作用域</h3><p>之前有代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//5</span></span><br></pre></td></tr></table></figure><p>我们实际想要的输出 0 1 2 3 4，解决方案有：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;)(i)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//4</span></span><br></pre></td></tr></table></figure><p>还可以用 ES6 中的 let：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//4</span></span><br></pre></td></tr></table></figure><p>之前说过，let 不提升，不能重复定义，在第二次循环的时候，又用 let 声明了 i，为什么在这里不报错，可以正确输出值呢？<br>比如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里会输出三个 abc，但是用 var：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>只会输出一个 abc。</p><p>JS 引擎对 var 和 let 使用了不同的方式处理，对于 let 每次循环都会创建一个新变量，对于代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实际相当于：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">let</span> i = <span class="number">0</span>) &#123;</span><br><span class="line">    result[<span class="number">0</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">0</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">1</span>) &#123;</span><br><span class="line">    result[<span class="number">1</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">1</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">2</span>) &#123;</span><br><span class="line">    result[<span class="number">2</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">2</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">4</span>) &#123;</span><br><span class="line">    result[<span class="number">4</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">4</span>) &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是在上面代码里不能用 const，虽然我们每次创建了一个新的变量，但是我们尝试修改 const 的值，所以会报错</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>在开发过程中，默认推荐使用 const，只有当确定变量的值会发生改变使用 let</li><li>函数提升优先于变量提升，函数提升会把整个函数挪到作用域顶部，变量提升只会把声明挪到作用域顶部</li><li>var 存在提升，我们能在声明之前使用。let、const 因为暂时性死区的原因，不能在声明前使用</li><li>var 在全局作用域下声明变量会导致变量挂载在 window 上，其他两者不会</li><li>let 和 const 作用基本一致，但是后者声明的变量不能再次赋值</li><li>只有 var 函数 有变量提升，其他的 class let const import 都没有变量提升， 如果函数表达式是 let const 也不会变量提升</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-let-和-const&quot;&gt;&lt;a href=&quot;#JavaScript-let-和-const&quot; class=&quot;headerlink&quot; title=&quot;JavaScript let 和 const&quot;&gt;&lt;/a&gt;JavaScript let 和 const&lt;/h1&gt;&lt;p&gt;在 JS 中用 var 声明变量存在变量提升，比如：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(a); &lt;span class=&quot;comment&quot;&gt;//undefined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;这段代码输出的是 undefined，而不是 ReferenceError。这是因为 var 有变量提升，实际这段代码相当于：&lt;/p&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 箭头函数</title>
    <link href="http://example.com/2021/07/16/JavaScript%20%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/"/>
    <id>http://example.com/2021/07/16/JavaScript%20%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/</id>
    <published>2021-07-16T04:01:20.000Z</published>
    <updated>2022-07-27T07:05:09.544Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-箭头函数"><a href="#JavaScript-箭头函数" class="headerlink" title="JavaScript 箭头函数"></a>JavaScript 箭头函数</h1><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>ES6 中箭头函数的基本语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value</span>) =&gt;</span> value;</span><br></pre></td></tr></table></figure><p>相当于：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><span id="more"></span><p>如果需要传入多个参数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> value * num;</span><br></pre></td></tr></table></figure><p>上面箭头函数例子中都省略了<code>return</code>关键字和代码的花括号，在箭头函数中如果方法体中只有一行代码，可以省略关键字和方法体的花括号，直接简化成<code>value =&gt; value</code>。</p><p>如果函数的代码块需要有多条语句：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value * num;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>如果需要返回一个对象，箭头函数的方法体必须放在大括号<code>()</code>中，这样做的原因是：没有大括号，JS 引擎没办分区分是正常定义一个对象还是一个箭头函数体:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> (&#123; <span class="attr">value</span>: value, <span class="attr">num</span>: num &#125;); <span class="comment">//正确写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> &#123; <span class="attr">value</span>: value, <span class="attr">num</span>: num &#125;; <span class="comment">//会报错</span></span><br></pre></td></tr></table></figure><h2 id="与普通函数的区别"><a href="#与普通函数的区别" class="headerlink" title="与普通函数的区别"></a>与普通函数的区别</h2><h3 id="1-没有-this"><a href="#1-没有-this" class="headerlink" title="1.没有 this"></a>1.没有 this</h3><p>箭头函数式的 this 需要通过查找作用域链来确定，它的 this 是指包在它外面的作用域的 this，我们来看下以下代码中的 this 分别指的是什么：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// obj</span></span><br><span class="line">  &#125;,</span><br><span class="line">  b: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// windows</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>obj.b 是一个箭头函数，它的 this 是包在它外层的词法作用域的 this（离它最近的词法作用域），obj 对象不是可执行代码，所以它不是离箭头函数最近的词法作用域，再往外就是全局作用域 window 了，所以 obj.b 的 this 指的是 windows。</p><p>再来看一段代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line"></span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething(event.type); <span class="comment">// error</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling &quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在调用<code>pageHandler.init</code>方法的时候会报错，报错的函数是个回调函数，这个回调函数的 this 指的全局变量 windows，在全局变量里没有 doSomething 这个方法，所以会报错。那么怎么才能让它不报错呢？</p><p>第一种方式是通过 bind 来指定 this：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething(event.type);</span><br><span class="line">      &#125;.bind(<span class="built_in">this</span>),</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling&quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>.bind(this)中的 this 是指 pageHandler 这个对象，通过 bind 生成一个 this 指向 pageHandler 的新函数，这样执行 init 方法的时候不会报错，看起来怪怪的有没有。</p><p>第二种方式是通过箭头函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething();</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling&quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>把 init 中的回调函数改成了箭头函数，箭头函数的 this 是它最近的作用域链上的 this，也就是 init 这个方法的 this，也就是 pageHandler 这个对象，这样就可以达到目的不报错啦。</p><p><strong>需要注意的是，箭头函数不能改变 this 的值，普通函数可以通过 call、apply、bind 来指定 this，但是箭头函数的 this 是不能改的。</strong></p><h3 id="2-没有-arguments"><a href="#2-没有-arguments" class="headerlink" title="2.没有 arguments"></a>2.没有 arguments</h3><p>访问箭头函数的 arguments，其实也是访问包在它外面的非箭头函数的 arguments。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo(<span class="number">1</span>, <span class="number">2</span>)()); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><h3 id="3-不能通过-new-关键字调用。"><a href="#3-不能通过-new-关键字调用。" class="headerlink" title="3.不能通过 new 关键字调用。"></a>3.不能通过 new 关键字调用。</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Foo = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo(); <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure><h3 id="4-没有原型"><a href="#4-没有原型" class="headerlink" title="4.没有原型"></a>4.没有原型</h3><p>没有<code>prototype</code>, 但是有<code>__proto__</code>指向 function。</p><h3 id="5-没有-super，也是通过包在它外面的非箭头函数来决定的。"><a href="#5-没有-super，也是通过包在它外面的非箭头函数来决定的。" class="headerlink" title="5.没有 super，也是通过包在它外面的非箭头函数来决定的。"></a>5.没有 super，也是通过包在它外面的非箭头函数来决定的。</h3>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;JavaScript-箭头函数&quot;&gt;&lt;a href=&quot;#JavaScript-箭头函数&quot; class=&quot;headerlink&quot; title=&quot;JavaScript 箭头函数&quot;&gt;&lt;/a&gt;JavaScript 箭头函数&lt;/h1&gt;&lt;h2 id=&quot;基本语法&quot;&gt;&lt;a href=&quot;#基本语法&quot; class=&quot;headerlink&quot; title=&quot;基本语法&quot;&gt;&lt;/a&gt;基本语法&lt;/h2&gt;&lt;p&gt;ES6 中箭头函数的基本语法：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; func = &lt;span class=&quot;function&quot;&gt;(&lt;span class=&quot;params&quot;&gt;value&lt;/span&gt;) =&amp;gt;&lt;/span&gt; value;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;相当于：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; func = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; (&lt;span class=&quot;params&quot;&gt;value&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="JavaScript" scheme="http://example.com/categories/JavaScript/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Webpack高级优化</title>
    <link href="http://example.com/2021/06/16/Webpack%E9%AB%98%E7%BA%A7%E4%BC%98%E5%8C%96/"/>
    <id>http://example.com/2021/06/16/Webpack%E9%AB%98%E7%BA%A7%E4%BC%98%E5%8C%96/</id>
    <published>2021-06-16T14:25:40.000Z</published>
    <updated>2022-06-23T05:56:12.228Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Webpack高级优化"><a href="#Webpack高级优化" class="headerlink" title="Webpack高级优化"></a>Webpack高级优化</h1><h2 id="提升开发体验"><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h2><h3 id="sourcemap"><a href="#sourcemap" class="headerlink" title="sourcemap"></a>sourcemap</h3><ol><li><p>打包完后的代码不便与阅读</p></li><li><p>因此需要sourcemap来生成源代码与构建后代码的一一映射</p></li><li><p>会生成xxx.map文件，包含源代码与构建后代码每一行，每一列的映射关系</p><ol><li>如果构建代码出错，通过xxx.map文件可以定位到源代码出错位置</li></ol></li><li><p>使用</p></li></ol><span id="more"></span><ol><li><p>开发模式</p><ol><li><p><code>cheap-module-source-map</code></p><ul><li><p>优点：打包编译快，只含行映射</p></li><li><p>缺点：没有列映射</p></li><li><pre><code class="javascript">module.exports = &#123;  // 其他省略  mode: &quot;development&quot;,  devtool: &quot;cheap-module-source-map&quot;,&#125;;<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. 生产模式</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. `source-map`</span><br><span class="line"></span><br><span class="line">      - 优点：包含行/列映射 （生产模式打包后的代码时是压缩为一行的，没有列映射很难定位出错位置）</span><br><span class="line"></span><br><span class="line">      - 缺点：打包编译速度更慢</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        module.exports = &#123;</span><br><span class="line">          // 其他省略</span><br><span class="line"><span class="title">          mode:</span> <span class="string">&quot;production&quot;</span>,</span><br><span class="line"><span class="title">          devtool:</span> <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">        &#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ol></li></ol><h2 id="提升打包构建速度"><a href="#提升打包构建速度" class="headerlink" title="提升打包构建速度"></a>提升打包构建速度</h2><h4 id="HotModuleReplacement"><a href="#HotModuleReplacement" class="headerlink" title="HotModuleReplacement"></a>HotModuleReplacement</h4><ol><li><p>开发过程中，我们修改了一个模块的代码，webpack默认将所有模块重新编译打包，速度很慢</p><ul><li>因此我们只需要对修改的模块重新编译打包，其他模块不变就可以提升打包速度</li></ul></li><li><p>HotModuleReplacement（HMR/热模块替换）：在程序运行中，替换、添加或删除模块，而无需重新加载整个页面</p></li><li><p>配置</p><ol><li><pre><code class="javascript">module.exports = &#123;  // 其他省略  devServer: &#123;    host: &quot;localhost&quot;, // 启动服务器域名    port: &quot;3000&quot;, // 启动服务器端口号    open: true, // 是否自动打开浏览器    hot: true, // 开启HMR功能（只能用于开发环境，生产环境不需要了）  &#125;,&#125;;<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">2</span>. 可以在js中判断是否支持hmr，但是会非常麻烦</span><br><span class="line"></span><br><span class="line">      - ![image-<span class="number">20220607180103928</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607180103928</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">3</span>. 实际开发过程中用loader来解决</span><br><span class="line"></span><br><span class="line">      - React-hot-loader</span><br><span class="line"></span><br><span class="line"><span class="comment">### OneOf</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 打包过程中，每个文件会经过所有loader处理，虽然正则没有匹配上，但是都需要经过一遍，浪费时间</span><br><span class="line"><span class="number">2</span>. 使用oneof：只要有一个匹配上了就不进行多余操作</span><br><span class="line"><span class="number">3</span>. 配置webpack</span><br><span class="line">   - ![image-<span class="number">20220607182231155</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182231155</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Include/Exclude</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 开发过程中我们需要使用第三方库或者插件，这些文件都会下载到node_module文件夹中</span><br><span class="line">   - 这些文件是不需要编译就可以使用的</span><br><span class="line">   - 因此我们在编译js的时候要排除node_module</span><br><span class="line"><span class="number">2</span>. 配置webpack</span><br><span class="line">   <span class="number">1</span>. ![image-<span class="number">20220607182501230</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182501230</span>.png)</span><br><span class="line">   <span class="number">2</span>. ![image-<span class="number">20220607182527569</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182527569</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Cache</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 每次打包都需要经过Eslint检查以及babel编译，速度慢</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 我们可以缓存eslint检查和babel的编译结果，这样在第二次打包的速度就更快了</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 配置webpack （缓存文件不要压缩，可以提高检索效率）</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. ```javascript</span><br><span class="line">      options: &#123;</span><br><span class="line">                    cacheDirectory: true, <span class="regexp">//</span> 开启babel编译缓存</span><br><span class="line">                    cacheCompression: false, <span class="regexp">//</span> 缓存文件不要压缩</span><br><span class="line">                  &#125;,</span><br></pre></td></tr></table></figure></code></pre></li><li><pre><code class="javascript">cache: true, // 开启缓存      // 缓存目录      cacheLocation: path.resolve(        __dirname,        &quot;../node_modules/.cache/.eslintcache&quot;      ),<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">3</span>. ![image-<span class="number">20220607182755181</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182755181</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">4</span>. ![image-<span class="number">20220607182839166</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182839166</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Thread</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 项目越庞大，打包速度越慢</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 对js文件的处理主要是eslint，babel，terser三个工具，所以我们要提升他们的速度</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 开启多进程同时处理js</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置webpack</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 获取cpu的核数</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        <span class="regexp">//</span> nodejs核心模块，直接使用</span><br><span class="line">        const os = require(<span class="string">&quot;os&quot;</span>);</span><br><span class="line">        <span class="regexp">//</span> cpu核数</span><br><span class="line">        const threads = os.cpus().length;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>下载包 <code>npm i thread-loader -D</code></p></li><li><pre><code class="javascript">use: [              &#123;                loader: &quot;thread-loader&quot;, // 开启多进程                options: &#123;                  workers: threads, // 数量                &#125;,              &#125;,              &#123;                loader: &quot;babel-loader&quot;,                options: &#123;                  cacheDirectory: true, // 开启babel编译缓存                &#125;,              &#125;,            ],<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">   4.</span> ![<span class="string">image-20220607193846738</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193846738.png</span>)</span><br><span class="line"><span class="bullet">   5.</span> ![<span class="string">image-20220607193819516</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193819516.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">   6.</span> ![<span class="string">image-20220607193928589</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193928589.png</span>)</span><br><span class="line"><span class="bullet">   7.</span> 项目较小的时候开多线程打包速度反而变慢，因为开启线程也是耗时操作，因此只有项目到达一定大小的时候开启多线程才能提高打包速度</span><br><span class="line"></span><br><span class="line"><span class="section">## 减少代码体积</span></span><br><span class="line"></span><br><span class="line"><span class="section">### Tree Shaking</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 开发过程中我们定义了一些工具函数库，或者使用了第三方的工具库或者组件库</span><br><span class="line"><span class="bullet">   -</span> 如果没有特殊处理，当我们只使用了一小部分功能时，打包却要引入整个库，这无疑会增大打包后的体积</span><br><span class="line"><span class="bullet">2.</span> tree shaking 是个术语，用于描述移除js中没有使用上的代码</span><br><span class="line"><span class="bullet">   -</span> 依赖于es module</span><br><span class="line"><span class="bullet">3.</span> webpack默认开启该功能，无需其他配置</span><br><span class="line"></span><br><span class="line"><span class="section">### Babel</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> babel在编译时为每个文件都插入了辅助代码，使代码体积过大</span><br><span class="line"><span class="bullet">2.</span> 可以将这些辅助代码作为一个独立的模块，避免重复引入</span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @babel/plugin-transform-runtime -D`</span></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">`@babel/plugin-transform-runtime`</span>可以禁用babel的自动引入</span><br><span class="line"><span class="bullet">   3.</span> ![<span class="string">image-20220607195613506</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607195613506.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="section">### Image Minimizer</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 如果项目中有很多图片，那么打包后图片体积会很大，请求速度会慢</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 因此需要对图片进行压缩，减少图片体积</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i image-minimizer-webpack-plugin imagemin -D`</span></span><br><span class="line"><span class="bullet">      1.</span> 无损压缩</span><br><span class="line"><span class="bullet">         -</span> <span class="code">`npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D`</span></span><br><span class="line"><span class="bullet">      2.</span> 有损压缩</span><br><span class="line"><span class="bullet">         -</span> <span class="code">`npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">      const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;);</span></span><br></pre></td></tr></table></figure></code></pre></li><li><pre><code class="javascript">// 压缩图片      new ImageMinimizerPlugin(&#123;        minimizer: &#123;          implementation: ImageMinimizerPlugin.imageminGenerate,          options: &#123;            plugins: [              [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],              [&quot;jpegtran&quot;, &#123; progressive: true &#125;],              [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],              [                &quot;svgo&quot;,                &#123;                  plugins: [                    &quot;preset-default&quot;,                    &quot;prefixIds&quot;,                    &#123;                      name: &quot;sortAttrs&quot;,                      params: &#123;                        xmlnsOrder: &quot;alphabetical&quot;,                      &#125;,                    &#125;,                  ],                &#125;,              ],            ],          &#125;,        &#125;,      &#125;),<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">4</span>. ![image-<span class="number">20220607200319039</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607200319039</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 优化代码性能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Code split</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 打包代码会把所有代码打包到一个文件中，体积太大</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 如果我们只需要渲染首页，就应该只加载首页的js文件</span><br><span class="line">   <span class="number">2</span>. 所以我们在打包的时候对文件进行代码分割，生成多个js文件，渲染哪个页面就只加载某个js文件</span><br><span class="line">   <span class="number">3</span>. 这样加载的资源少，速度就快</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. code split主要做两件事</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 分割文件：将打包生成的文件进行分割，生成多个js文件</span><br><span class="line">   <span class="number">2</span>. 按需加载：需要哪个文件就加载哪个文件</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 多入口</span><br><span class="line"></span><br><span class="line">   - 多个入口文件</span><br><span class="line">   - ![image-<span class="number">20220607202046597</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607202046597</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 下载包 `npm i webpack webpack-cli html-webpack-plugin -D`</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>. 配置webpack</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        <span class="regexp">//</span> webpack.config.js</span><br><span class="line">        const path = require(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">        const HtmlWebpackPlugin = require(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        module.exports = &#123;</span><br><span class="line">          <span class="regexp">//</span> 单入口</span><br><span class="line">          <span class="regexp">//</span> entry: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">          <span class="regexp">//</span> 多入口</span><br><span class="line">          entry: &#123;</span><br><span class="line">            main: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">            app: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          output: &#123;</span><br><span class="line">            path: path.resolve(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">            <span class="regexp">//</span> [name]是webpack命名规则，使用chunk的name作为输出的文件名。</span><br><span class="line">            <span class="regexp">//</span> 什么是chunk？打包的资源就是chunk，输出出去叫bundle。</span><br><span class="line">            <span class="regexp">//</span> chunk的name是啥呢？ 比如： entry中xxx: <span class="string">&quot;./src/xxx.js&quot;</span>, name就是xxx。注意是前面的xxx，和文件名无关。</span><br><span class="line">            <span class="regexp">//</span> 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)</span><br><span class="line">            filename: <span class="string">&quot;js/[name].js&quot;</span>,</span><br><span class="line">            clear: true,</span><br><span class="line">          &#125;,</span><br><span class="line">          plugins: [</span><br><span class="line">            new HtmlWebpackPlugin(&#123;</span><br><span class="line">              template: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">          ],</span><br><span class="line">          mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>- ```javascript    optimization: &#123;      // 代码分割配置      splitChunks: &#123;        chunks: &quot;all&quot;, // 对所有模块都进行分割        // 以下是默认值        // minSize: 20000, // 分割代码最小的大小        // minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0        // minChunks: 1, // 至少被引用的次数，满足条件才会代码分割        // maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量        // maxInitialRequests: 30, // 入口js文件最大并行请求数量        // enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）        // cacheGroups: &#123; // 组，哪些模块要打包到一个组        //   defaultVendors: &#123; // 组名        //     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块        //     priority: -10, // 权重（越大越高）        //     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块        //   &#125;,        //   default: &#123; // 其他没有写的配置会使用上面的默认值        //     minChunks: 2, // 这里的minChunks权重更大        //     priority: -20,        //     reuseExistingChunk: true,        //   &#125;,        // &#125;,        // 修改配置        cacheGroups: &#123;          // 组，哪些模块要打包到一个组          // defaultVendors: &#123; // 组名          //   test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块          //   priority: -10, // 权重（越大越高）          //   reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块          // &#125;,          default: &#123;            // 其他没有写的配置会使用上面的默认值            minSize: 0, // 我们定义的文件体积太小了，所以要改打包的最小文件体积            minChunks: 2,            priority: -20,            reuseExistingChunk: true,          &#125;,        &#125;,      &#125;,  <figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3.</span> 配置按需加载，动态导入</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```<span class="javascript">javascript</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;hello main&quot;</span>);</span></span><br><span class="line"><span class="javascript">      </span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 动态导入 --&gt; 实现按需加载</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 即使只被引用了一次，也会代码分割</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">import</span>(<span class="string">&quot;./math.js&quot;</span>).then(<span class="function">(<span class="params">&#123; sum &#125;</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          alert(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">      &#125;;</span></span><br></pre></td></tr></table></figure>2. 一旦通过 import 动态导入语法导入模块，模块就被代码分割，同时也能按需加载了</code></pre></li></ol></li><li><p>单入口</p><ol><li><p>单页面应用（spa），只有一个入口（单入口）</p></li><li><p>配置webpack</p><ol><li><pre><code class="javascript">const path = require(&quot;path&quot;);const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);module.exports = &#123;  // 单入口  entry: &quot;./src/main.js&quot;,  // 多入口  // entry: &#123;  //   main: &quot;./src/main.js&quot;,  //   app: &quot;./src/app.js&quot;,  // &#125;,  output: &#123;    path: path.resolve(__dirname, &quot;./dist&quot;),    // [name]是webpack命名规则，使用chunk的name作为输出的文件名。    // 什么是chunk？打包的资源就是chunk，输出出去叫bundle。    // chunk的name是啥呢？ 比如： entry中xxx: &quot;./src/xxx.js&quot;, name就是xxx。注意是前面的xxx，和文件名无关。    // 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)    filename: &quot;js/[name].js&quot;,    clean: true,  &#125;,  plugins: [    new HtmlWebpackPlugin(&#123;      template: &quot;./public/index.html&quot;,    &#125;),  ],  mode: &quot;production&quot;,  optimization: &#123;    // 代码分割配置    splitChunks: &#123;      chunks: &quot;all&quot;, // 对所有模块都进行分割      // 以下是默认值      // minSize: 20000, // 分割代码最小的大小      // minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0      // minChunks: 1, // 至少被引用的次数，满足条件才会代码分割      // maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量      // maxInitialRequests: 30, // 入口js文件最大并行请求数量      // enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）      // cacheGroups: &#123; // 组，哪些模块要打包到一个组      //   defaultVendors: &#123; // 组名      //     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块      //     priority: -10, // 权重（越大越高）      //     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块      //   &#125;,      //   default: &#123; // 其他没有写的配置会使用上面的默认值      //     minChunks: 2, // 这里的minChunks权重更大      //     priority: -20,      //     reuseExistingChunk: true,      //   &#125;,      // &#125;,  &#125;,&#125;;<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. ```javascript</span><br><span class="line">       <span class="regexp">//</span> 代码分割配置</span><br><span class="line">       splitChunks: &#123;</span><br><span class="line">         chunks: <span class="string">&quot;all&quot;</span>, <span class="regexp">//</span> 对所有模块都进行分割</span><br><span class="line">         <span class="regexp">//</span> 其他内容用默认配置即可</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure></code></pre></li><li><p>![image-20220607203135751](/Users/xiaotian/Library/Application Support/typora-user-images/image-20220607203135751.png)</p></li><li><p>给动态导入的文件取名</p><ol><li><p>修改main.js</p><ul><li><pre><code class="javascript">document.getElementById(&quot;btn&quot;).onClick = function () &#123;  // eslint会对动态导入语法报错，需要修改eslint配置文件  // webpackChunkName: &quot;math&quot;：这是webpack动态导入模块命名的方式  // &quot;math&quot;将来就会作为[name]的值显示。  import(/* webpackChunkName: &quot;math&quot; */ &quot;./js/math.js&quot;).then((&#123; count &#125;) =&gt; &#123;    console.log(count(2, 1));  &#125;);&#125;;<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> 下载包 `npm i eslint-plugin-import -D`</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 配置eslint</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     <span class="comment">// .eslintrc.js</span></span><br><span class="line">     module.exports = &#123;</span><br><span class="line">       <span class="comment">// 继承 Eslint 规则</span></span><br><span class="line"><span class="symbol">       extends:</span> [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line"><span class="symbol">       env:</span> &#123;</span><br><span class="line"><span class="symbol">         node:</span> true, <span class="comment">// 启用node中全局变量</span></span><br><span class="line"><span class="symbol">         browser:</span> true, <span class="comment">// 启用浏览器中全局变量</span></span><br><span class="line">       &#125;,</span><br><span class="line"><span class="symbol">       plugins:</span> [<span class="string">&quot;import&quot;</span>], <span class="comment">// 解决动态导入import语法报错问题 --&gt; 实际使用eslint-plugin-import的规则解决的</span></span><br><span class="line"><span class="symbol">       parserOptions:</span> &#123;</span><br><span class="line"><span class="symbol">         ecmaVersion:</span> <span class="number">6</span>,</span><br><span class="line"><span class="symbol">         sourceType:</span> <span class="string">&quot;module&quot;</span>,</span><br><span class="line">       &#125;,</span><br><span class="line"><span class="symbol">       rules:</span> &#123;</span><br><span class="line">         <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// 不能使用 var 定义变量</span></span><br><span class="line">       &#125;,</span><br><span class="line">     &#125;;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li><li><p>配置webpack，统一命名</p><ul><li><pre><code class="javascript">filename: &quot;static/js/[name].js&quot;, // 入口文件打包输出资源命名方式    chunkFilename: &quot;static/js/[name].chunk.js&quot;, // 动态导入输出资源命名方式    assetModuleFilename: &quot;static/media/[name].[hash][ext]&quot;, // 图片、字体等资源命名方式（注意用hash）<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">            -</span> ![<span class="string">image-20220608111206852</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608111206852.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">            -</span> ![<span class="string">image-20220608111226416</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608111226416.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="section">### preload/prefetch</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 之前做了代码分割后实现了按需加载（也就是懒加载）</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 但是速度不够快，比如一个按钮用户点击了才加载资源，如果该资源非常大的话会有明显的卡顿现象</span><br><span class="line"><span class="bullet">   2.</span> 因此我们想在浏览器空闲的时候加载后续需要使用的资源（预加载）</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="code">`Preload`</span>：告诉浏览器立即加载资源。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="code">`Prefetch`</span>：告诉浏览器在空闲时才开始加载资源。</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="code">`Preload`</span> 与 <span class="code">`Prefetch`</span> 共同点</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 只加载资源，并不执行</span><br><span class="line"><span class="bullet">   2.</span> 都有缓存</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> <span class="code">`Preload`</span> 与 <span class="code">`Prefetch`</span> 区别</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> <span class="code">`Preload`</span>加载优先级高，<span class="code">`Prefetch`</span>加载优先级低。</span><br><span class="line"><span class="bullet">   2.</span> <span class="code">`preload`</span>只加载当前页面需要使用的资源，<span class="code">`prefetch`</span>可以加载当前页面需要使用的资源，也可以加载下一个页面需要使用的资源</span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> 兼容性比较差，<span class="code">`preload`</span>兼容性要高一点</span><br><span class="line"></span><br><span class="line"><span class="bullet">7.</span> 配置</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @vue/preload-webpack-plugin -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">      // css压缩</span></span><br><span class="line"><span class="code">          // new CssMinimizerPlugin(),</span></span><br><span class="line"><span class="code">          new PreloadWebpackPlugin(&#123;</span></span><br><span class="line"><span class="code">            rel: &quot;preload&quot;, // preload兼容性更好</span></span><br><span class="line"><span class="code">            as: &quot;script&quot;,</span></span><br><span class="line"><span class="code">            // rel: &#x27;prefetch&#x27; // prefetch兼容性更差</span></span><br><span class="line"><span class="code">          &#125;),</span></span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ol></li></ol></li><li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608114848178.png" alt="image-20220608114848178"></p></li></ol></li></ol><h3 id="network-cache"><a href="#network-cache" class="headerlink" title="network cache"></a>network cache</h3><ol><li><p>对静态资源使用缓存来优化，浏览器再二次请求直接读取缓存，速度更快</p></li><li><p>回出现一个问题：前后输出的文件名都是一样的，发布新版本浏览器会读取缓存，不会加载新资源</p><ol><li>我们要从文件名入手，确保更新后的文件名与之前不一样</li></ol></li><li><p>使用hash</p><ul><li><p>fullhash（webpack4 是 hash）每次修改任何一个文件，所有文件名的 hash 至都将改变。所以一旦修改了任何一个文件，整个项目的文件缓存都将失效。</p></li><li><p>chunkhash 根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们 js 和 css 是同一个引入，会共享一个 hash 值。</p></li><li><p>contenthash 根据文件内容生成 hash 值，只有文件内容变化了，hash 值才会变化。所有文件 hash 值是独享且不同的。</p></li><li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608120638753.png" alt="image-20220608120638753"></p></li><li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608120658005.png" alt="image-20220608120658005"></p></li></ul></li><li><p>出现问题：只修改了一个文件，但是main.js的hash也发生了变化，缓存失效</p><ol><li><p>原因：引用的文件发生变化，导致main.js的content也发生了变化，最终main.js生成新的hash，是我们不希望看到的</p></li><li><p>解决</p><ol><li><p>将hash值单独保存在runtime文件中</p></li><li><p>runtime 文件只保存文件的 hash 值和它们与文件关系，整个文件体积就比较小，所以变化重新请求的代价也小。</p></li><li><pre><code class="javascript">    // 提取runtime文件    runtimeChunk: &#123;      name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;`, // runtime文件命名规则    &#125;,<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">### core-js</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> babel已经对js代码进行了一定的兼容性处理，我们使用 @babel/preset-env 智能预设来处理兼容性</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 但是es6有些语法并没有编译转换，比如箭头函数，promise， async等</span><br><span class="line"><span class="bullet">   2.</span> 所以还是存在一定的兼容性问题，遇到低版本浏览器可能出现报错</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="code">`core-js`</span> 是专门用来做 ES6 以及以上 API 的 <span class="code">`polyfill`</span>。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @babel/eslint-parser -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> 下载包 <span class="code">`npm i core-js`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   3.</span> 可以手动全部引入和手动按需引入（体积大/麻烦）</span><br><span class="line"></span><br><span class="line"><span class="bullet">      1.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">         import &quot;core-js&quot;;</span></span><br></pre></td></tr></table></figure></code></pre></li><li><pre><code class="javascript">import &quot;core-js/es/promise&quot;;<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4.</span> 配置自动按需引入</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> 配置babel.config.js</span><br><span class="line"></span><br><span class="line">   <span class="number">2.</span> ```javascript</span><br><span class="line">      module.exports = &#123;</span><br><span class="line">        <span class="comment">// 智能预设：能够编译ES6语法</span></span><br><span class="line">        <span class="symbol">presets:</span> [</span><br><span class="line">          [</span><br><span class="line">            <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">            <span class="comment">// 按需加载core-js的polyfill</span></span><br><span class="line">            &#123; <span class="attr">useBuiltIns:</span> <span class="string">&quot;usage&quot;</span>, <span class="attr">corejs:</span> &#123; <span class="attr">version:</span> <span class="string">&quot;3&quot;</span>, <span class="attr">proposals:</span> <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">          ],</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure></code></pre></li></ol></li></ol></li></ol><h3 id="pwa"><a href="#pwa" class="headerlink" title="pwa"></a>pwa</h3><ol><li><p>希望提供离线服务</p></li><li><p>配置webpack</p><ol><li><p>下载包 <code>npm i workbox-webpack-plugin -D</code></p></li><li><p>修改webpack.config.js</p><ol><li><pre><code class="javascript">const WorkboxPlugin = require(&quot;workbox-webpack-plugin&quot;);<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span><span class="string">.</span> <span class="string">```javascript</span></span><br><span class="line">   <span class="string">new</span> <span class="string">WorkboxPlugin.GenerateSW(&#123;</span></span><br><span class="line">         <span class="string">//</span> <span class="string">这些选项帮助快速启用</span> <span class="string">ServiceWorkers</span></span><br><span class="line">         <span class="string">//</span> <span class="string">不允许遗留任何“旧的”</span> <span class="string">ServiceWorkers</span></span><br><span class="line">         <span class="attr">clientsClaim:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">         <span class="attr">skipWaiting:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">       <span class="string">&#125;),</span></span><br></pre></td></tr></table></figure></code></pre></li><li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608122751327.png" alt="image-20220608122751327"></p></li></ol></li><li><p>修改main.js</p><ul><li><pre><code class="javascript">if (&quot;serviceWorker&quot; in navigator) &#123;  window.addEventListener(&quot;load&quot;, () =&gt; &#123;    navigator.serviceWorker      .register(&quot;/service-worker.js&quot;)      .then((registration) =&gt; &#123;        console.log(&quot;SW registered: &quot;, registration);      &#125;)      .catch((registrationError) =&gt; &#123;        console.log(&quot;SW registration failed: &quot;, registrationError);      &#125;);  &#125;);&#125;</code></pre></li></ul></li></ol></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Webpack高级优化&quot;&gt;&lt;a href=&quot;#Webpack高级优化&quot; class=&quot;headerlink&quot; title=&quot;Webpack高级优化&quot;&gt;&lt;/a&gt;Webpack高级优化&lt;/h1&gt;&lt;h2 id=&quot;提升开发体验&quot;&gt;&lt;a href=&quot;#提升开发体验&quot; class=&quot;headerlink&quot; title=&quot;提升开发体验&quot;&gt;&lt;/a&gt;提升开发体验&lt;/h2&gt;&lt;h3 id=&quot;sourcemap&quot;&gt;&lt;a href=&quot;#sourcemap&quot; class=&quot;headerlink&quot; title=&quot;sourcemap&quot;&gt;&lt;/a&gt;sourcemap&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;打包完后的代码不便与阅读&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;因此需要sourcemap来生成源代码与构建后代码的一一映射&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;会生成xxx.map文件，包含源代码与构建后代码每一行，每一列的映射关系&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果构建代码出错，通过xxx.map文件可以定位到源代码出错位置&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="Webpack" scheme="http://example.com/categories/Webpack/"/>
    
    
    <category term="Webpack" scheme="http://example.com/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>Webpack基础配置</title>
    <link href="http://example.com/2021/06/15/Webpack%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/"/>
    <id>http://example.com/2021/06/15/Webpack%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</id>
    <published>2021-06-15T13:41:31.000Z</published>
    <updated>2022-06-23T04:26:44.386Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Webpack基础配置"><a href="#Webpack基础配置" class="headerlink" title="Webpack基础配置"></a>Webpack基础配置</h1><h2 id="五个概念"><a href="#五个概念" class="headerlink" title="五个概念"></a>五个概念</h2><ol><li>entry 入口<ul><li>指示webpack从哪个文件开始打包</li></ul></li><li>output 出口<ul><li>打包完的文件输出到哪里去，以及如何命名</li></ul></li><li>loader 加载器<ul><li>webpack本身只处理js，json等资源</li><li>其他资源需要借助loader才能解析</li></ul></li><li>plugins 插件<ul><li>扩展webpack功能</li></ul></li><li>mode 模式<ul><li>开发模式 development</li><li>生产模式 production</li></ul></li></ol><span id="more"></span><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><ol><li>基础配置文件<ul><li>在根目录创建 <code>webpack.config.js</code>文件</li></ul></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// node.js的核心模块，专门处理文件路径</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 出口</span></span><br><span class="line">    output : &#123;</span><br><span class="line">        <span class="comment">// path 文件输出目录，必须是绝对路径</span></span><br><span class="line">        <span class="comment">// path.resolve() 返回一个绝对路径</span></span><br><span class="line">        <span class="comment">// __dirname 当前文件所在绝对路径</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 加载器</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件</span></span><br><span class="line">    plugins: [],</span><br><span class="line">    <span class="comment">// 模式</span></span><br><span class="line">    mode : <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>运行 <code>npx webpack</code>进行打包</li></ol><h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h2><ul><li>主要做两件事<ol><li>编译代码，使浏览器能识别运行<ul><li>样式</li><li>字体</li><li>图片</li><li>html</li></ul></li><li>代码质量检查，设置代码规范<ul><li>提前检查代码隐患，使代码更健壮</li><li>统一团队编码风格</li></ul></li></ol></li></ul><h3 id="处理样式资源"><a href="#处理样式资源" class="headerlink" title="处理样式资源"></a>处理样式资源</h3><ol><li><p>css</p><ul><li><p>下载两个loader <code>npm i css-loader style-loader -D</code></p></li><li><p>配置module</p><ul><li><pre><code class="javascript">module: &#123;        rules: [            &#123;                test: /\.css$/,                use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]            &#125;        ],    &#125;,<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">     - ![image-<span class="number">20220606201544356</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606201544356</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. less </span><br><span class="line"></span><br><span class="line">   - 下载less loader `npm i less-loader -D`</span><br><span class="line"></span><br><span class="line">   - 配置module</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       &#123;</span><br><span class="line">               test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">               use: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">             &#125;,</span><br></pre></td></tr></table></figure></code></pre></li><li><p>use中的loader是从后往前执行，因此less-loader 需要放在 style-loader 与 css-loader之后</p></li></ul></li></ul></li><li><p>sass/scss</p><ul><li><p>下载sass-loader <code>npm i sass-loader sass -D</code></p></li><li><p>配置module</p><ul><li><pre><code class="javascript">&#123;        test: /\.s[ac]ss$/,        use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;sass-loader&quot;],      &#125;,<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. styl</span><br><span class="line"></span><br><span class="line">   - 下载stylus-loader `npm i stylus-loader -D`</span><br><span class="line"></span><br><span class="line">   - 配置module</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       &#123;</span><br><span class="line"><span class="title">               test:</span> /\.styl$/,</span><br><span class="line"><span class="title">               use:</span> [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">             &#125;,</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ol><h3 id="处理图片资源"><a href="#处理图片资源" class="headerlink" title="处理图片资源"></a>处理图片资源</h3><ol><li><p>webpack5已经内置了 file-loader 和 url-loader  两个loader</p></li><li><p>只需要在module中进行配置即可</p><ul><li><pre><code class="javascript">&#123;        test: /\.(png|jpe?g|gif|webp)$/,        type: &quot;asset&quot;,      &#125;,<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 优化图片资源</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 将小于某大小的图片转换为data url （base64）</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 优点：减少请求数量</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 缺点：体积变大</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">     parser: &#123;</span></span><br><span class="line"><span class="code">               dataUrlCondition: &#123;</span></span><br><span class="line"><span class="code">                 maxSize: 10 * 1024 // 小于10kb的图片会被base64处理</span></span><br><span class="line"><span class="code">               &#125;</span></span><br><span class="line"><span class="code">             &#125;</span></span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ol><h3 id="修改输出资源的名称和路径"><a href="#修改输出资源的名称和路径" class="headerlink" title="修改输出资源的名称和路径"></a>修改输出资源的名称和路径</h3><ol><li><p>修改js文件路径</p><ul><li><code>filename: &quot;static/js/main.js&quot;,</code></li><li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606224701172.png" alt="image-20220606224701172"></li></ul></li><li><p>修改html引入</p><ul><li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606224741833.png" alt="image-20220606224741833"></li></ul></li><li><p>修改图片输出路径以及命名</p><ul><li><pre><code class="javascript">generator: &#123;                    // 将图片文件输出到 static/imgs 目录中                    // 将图片文件命名 [hash:8][ext][query]                    // [hash:8]: hash值取8位                    // [ext]: 使用之前的文件扩展名                    // [query]: 添加之前的query参数                    filename: &quot;static/imgs/[hash:8][ext][query]&quot;,                &#125;,<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220606224852478</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606224852478</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 自动清空上次打包资源</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 配置output</span><br><span class="line">   - `clean: true`</span><br><span class="line">   - ![image-<span class="number">20220606225727622</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606225727622</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 处理字体图标资源</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 配置loader</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     &#123;</span><br><span class="line">                     test: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">                     type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">                     generator: &#123;</span><br><span class="line">                         filename: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">                     &#125;,</span><br><span class="line">                 &#125;,</span><br></pre></td></tr></table></figure></code></pre></li><li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606230029205.png" alt="image-20220606230029205"></p></li></ul></li></ol><h3 id="处理js资源"><a href="#处理js资源" class="headerlink" title="处理js资源"></a>处理js资源</h3><ol><li><p>处理代码格式，使用eslint</p><ol><li><p>在根目录创建 .eslintrc.js 文件</p></li><li><p>配置 .eslintrc.js文件</p></li><li><pre><code class="javascript">module.exports = &#123;    // 解析选项    parserOptions: &#123;        ecmaVersion: 6, // ES 语法版本        sourceType: &quot;module&quot;, // ES 模块化        ecmaFeatures: &#123; // ES 其他特性            jsx: true // 如果是 React 项目，就需要开启 jsx 语法        &#125;    &#125;,    // 继承其他规则，后期配置react项目可以继承react官方规则    extends: [&quot;react-app&quot;],    // 覆盖继承的规则，一个一个手rules写过于复杂    rules: &#123;        // 我们的规则会覆盖掉react-app的规则        semi: &quot;error&quot;, // 禁止使用分号        &#39;array-callback-return&#39;: &#39;warn&#39;, // 强制数组方法的回调函数中有 return 语句，否则警告        &#39;default-case&#39;: [            &#39;warn&#39;, // 要求 switch 语句中有 default 分支，否则警告            &#123; commentPattern: &#39;^no default$&#39; &#125; // 允许在最后注释 no default, 就不会有警告了        ],        eqeqeq: [            &#39;warn&#39;, // 强制使用 === 和 !==，否则警告            &#39;smart&#39; // https://eslint.bootcss.com/docs/rules/eqeqeq#smart 除了少数情况下不会有警告        ],    &#125;,    // ...    // 其他规则详见：https://eslint.bootcss.com/docs/user-guide/configuring&#125;;<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">4.</span> ![<span class="string">image-20220607000245951</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000245951.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> rules具体规则</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;off&quot;`</span> 或 <span class="code">`0`</span> - 关闭规则</span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;warn&quot;`</span> 或 <span class="code">`1`</span> - 开启规则，使用警告级别的错误：<span class="code">`warn`</span> (不会导致程序退出)</span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;error&quot;`</span> 或 <span class="code">`2`</span> - 开启规则，使用错误级别的错误：<span class="code">`error`</span> (当被触发的时候，程序会退出)</span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> 下载包 <span class="code">`npm i eslint-webpack-plugin eslint -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">7.</span> 配置webpack.config.js文件</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">`const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;);`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">     plugins: [</span></span><br><span class="line"><span class="code">         new ESLintWebpackPlugin(&#123;</span></span><br><span class="line"><span class="code">           // 指定检查文件的根目录</span></span><br><span class="line"><span class="code">           context: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line"><span class="code">         &#125;),</span></span><br><span class="line"><span class="code">       ],</span></span><br></pre></td></tr></table></figure>- ![image-20220607000723823](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000723823.png)- ![image-20220607000745553](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000745553.png)</code></pre></li><li><p>为了更好的开发体验，可以下载vscode的eslint插件，并且配置 .eslintignore 文件，忽略dist文件夹</p><ul><li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607001010979.png" alt="image-20220607001010979"></li></ul></li></ol></li><li><p>处理兼容性，使用babel</p><ol><li><p>在根目录创建 babel.config.js 文件</p></li><li><p>下载相关包 <code>npm i babel-loader @babel/core @babel/preset-env -D</code></p></li><li><p>配置 babel.config.js 文件</p><ol><li><p>presets 预设</p><ol><li><code>@babel/preset-env</code>: 一个智能预设，允许您使用最新的 JavaScript。</li><li><code>@babel/preset-react</code>：一个用来编译 React jsx 语法的预设</li><li><code>@babel/preset-typescript</code>：一个用来编译 TypeScript 语法的预设</li></ol></li><li><pre><code class="javascript">module.exports = &#123;    // 预设    presets: [&quot;@babel/preset-env&quot;],&#125;;<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置 webpack.config.js 文件</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 排除 node_modules 文件夹</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>. ```javascript</span><br><span class="line">      &#123;</span><br><span class="line">              test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">              exclude: <span class="regexp">/node_modules/</span>, <span class="regexp">//</span> 排除node_modules代码不编译</span><br><span class="line">              loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure></code></pre></li></ol></li></ol></li></ol><h3 id="处理Html资源"><a href="#处理Html资源" class="headerlink" title="处理Html资源"></a>处理Html资源</h3><ol><li><p>安装插件 <code>npm i html-webpack-plugin -D</code></p></li><li><p>配置 web pack.config.js 文件</p><ol><li><p><code>const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</code></p></li><li><pre><code class="javascript">new HtmlWebpackPlugin(&#123;      // 以 public/index.html 为模板创建文件      // 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源      template: path.resolve(__dirname, &quot;public/index.html&quot;),    &#125;),<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3</span>. 打包后的html会自动引入js文件，因此index.html中不需要手动引入了</span><br><span class="line"><span class="number">4</span>. ![image-<span class="number">20220607150650273</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607150650273</span>.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 开发服务器 &amp; 自动化</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 下载包 `npm i webpack-dev-server -D`</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 配置 webpack.config.js 文件</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     <span class="regexp">//</span> 开发服务器</span><br><span class="line">       devServer: &#123;</span><br><span class="line">         host: <span class="string">&quot;localhost&quot;</span>, <span class="regexp">//</span> 启动服务器域名</span><br><span class="line">         port: <span class="string">&quot;3000&quot;</span>, <span class="regexp">//</span> 启动服务器端口号</span><br><span class="line">         open: true, <span class="regexp">//</span> 是否自动打开浏览器</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure></code></pre></li></ol></li><li><p>当启用开发服务器后，所有代码都在内存中编译打包，因此并不会输出到dist目录下</p></li></ol><h2 id="生产模式"><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h2><ul><li><p>优化代码运行性能</p></li><li><p>优化代码打包速度</p></li></ul><ol><li><p>分别配置开发环境与生产环境文件，存入config文件夹</p><ul><li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607154900222.png"></li><li>因为存入了config文件夹，因此需要修改webpack配置文件中的路径</li></ul></li><li><p>配置package.json简化命令</p><ul><li><pre><code class="json">  // 其他省略  &quot;scripts&quot;: &#123;    &quot;start&quot;: &quot;npm run dev&quot;,    &quot;dev&quot;: &quot;npx webpack serve --config ./config/webpack.dev.js&quot;,    &quot;build&quot;: &quot;npx webpack --config ./config/webpack.prod.js&quot;  &#125;<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607155141887</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607155141887</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### css处理</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 目前css文件被打包到js文件中，当js文件加载时，会创建style标签来生成样式</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 网速慢的时候会产生屏闪现象</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 应该将css文件单独出来，用link标签加载，性能更好</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置webpack文件</span><br><span class="line"></span><br><span class="line">   - `const MiniCssExtractPlugin = require(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);`</span><br><span class="line"></span><br><span class="line">   - 替换所有的style-loader</span><br><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607155949418</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607155949418</span>.png)</span><br><span class="line"></span><br><span class="line">   - 提取css成单独文件</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       <span class="regexp">//</span> 提取css成单独文件</span><br><span class="line">           new MiniCssExtractPlugin(&#123;</span><br><span class="line">             <span class="regexp">//</span> 定义输出文件名和目录</span><br><span class="line">             filename: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">           &#125;),</span><br></pre></td></tr></table></figure>- ![image-20220607160048147](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607160048147.png)</code></pre></li></ul></li><li><p>css兼容性处理</p><ol><li><p>下载包 <code>npm i postcss-loader postcss postcss-preset-env -D</code></p></li><li><p>配置webpack文件</p><ul><li><p>在css-loader之后添加配置</p></li><li><pre><code class="javascript">&#123;            loader: &quot;postcss-loader&quot;,            options: &#123;              postcssOptions: &#123;                plugins: [                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题                ],              &#125;,            &#125;,          &#125;,<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607160452201</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607160452201</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 控制兼容性</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 在package.json中配置 browserslist</span><br><span class="line"></span><br><span class="line">      - 兼容到 ie8</span><br><span class="line"></span><br><span class="line">        - ```json</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="regexp">//</span> 其他省略</span><br><span class="line">            <span class="string">&quot;browserslist&quot;</span>: [<span class="string">&quot;ie &gt;= 8&quot;</span>]</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure> - 不考虑旧版本浏览器   - ```json     &#123;       // 其他省略       &quot;browserslist&quot;: [&quot;last 2 version&quot;, &quot;&gt; 1%&quot;, &quot;not dead&quot;]     &#125;     <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">      -</span> ![<span class="string">image-20220607161009633</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607161009633.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> css压缩</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载插件包 <span class="code">`npm i css-minimizer-webpack-plugin -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> 配置webpack文件</span><br><span class="line"></span><br><span class="line"><span class="bullet">      1.</span> <span class="code">`const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">      2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">         // css压缩</span></span><br><span class="line"><span class="code">             new CssMinimizerPlugin(),</span></span><br></pre></td></tr></table></figure></code></pre></li></ul></li><li><p>html压缩</p><ol><li>默认生产模式已经开启了：html 压缩和 js 压缩</li><li>不需要额外进行配置</li></ol></li></ol></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Webpack基础配置&quot;&gt;&lt;a href=&quot;#Webpack基础配置&quot; class=&quot;headerlink&quot; title=&quot;Webpack基础配置&quot;&gt;&lt;/a&gt;Webpack基础配置&lt;/h1&gt;&lt;h2 id=&quot;五个概念&quot;&gt;&lt;a href=&quot;#五个概念&quot; class=&quot;headerlink&quot; title=&quot;五个概念&quot;&gt;&lt;/a&gt;五个概念&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;entry 入口&lt;ul&gt;
&lt;li&gt;指示webpack从哪个文件开始打包&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;output 出口&lt;ul&gt;
&lt;li&gt;打包完的文件输出到哪里去，以及如何命名&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;loader 加载器&lt;ul&gt;
&lt;li&gt;webpack本身只处理js，json等资源&lt;/li&gt;
&lt;li&gt;其他资源需要借助loader才能解析&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;plugins 插件&lt;ul&gt;
&lt;li&gt;扩展webpack功能&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;mode 模式&lt;ul&gt;
&lt;li&gt;开发模式 development&lt;/li&gt;
&lt;li&gt;生产模式 production&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="Webpack" scheme="http://example.com/categories/Webpack/"/>
    
    
    <category term="Webpack" scheme="http://example.com/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>Hexo博客增加live2d</title>
    <link href="http://example.com/2020/12/16/Hexo%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0live2d/"/>
    <id>http://example.com/2020/12/16/Hexo%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0live2d/</id>
    <published>2020-12-16T13:37:45.000Z</published>
    <updated>2020-12-16T14:36:07.925Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hexo博客增加live2d插件"><a href="#Hexo博客增加live2d插件" class="headerlink" title="Hexo博客增加live2d插件"></a>Hexo博客增加live2d插件</h1><h2 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h2><ol><li>cmd进入到你的博客文件夹路径下</li><li>使用 <code>npm i hexo-helper-live2d --save</code> 安装依赖</li></ol><a id="more"></a><ol><li><p>安装成功后博客的package.json文件下会自动加入该包</p><p><img src="https://i.loli.net/2020/12/16/M3UrCJqVPN6Zp8K.png" alt="image-20201216215110041"></p></li></ol><h1 id="live2d-Model下载"><a href="#live2d-Model下载" class="headerlink" title="live2d Model下载"></a>live2d Model下载</h1><ol><li><p>进入GitHub下载<a href="https://github.com/xiazeyu/live2d-widget-models">live2d模型</a></p><p><img src="https://i.loli.net/2020/12/16/VZtsIemwj1h3TDl.png" alt="image-20201216215300880"></p></li><li><p>解压出该文件夹中的packages文件</p></li><li><p>将packages文件中的model复制到博客文件夹下的node_modules文件夹中</p><p><img src="https://i.loli.net/2020/12/16/6sZixo5y9IRnktT.png" alt="image-20201216222846076"></p></li></ol><h1 id="修改博客配置文件"><a href="#修改博客配置文件" class="headerlink" title="修改博客配置文件"></a>修改博客配置文件</h1><ol><li><p>进入博客的配置文件_config.yml，增加以下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#是否开启看板</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-hijiki</span> <span class="comment">#想切换模型直接修改为node_modules中的liv2d的各模型文件名称</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span> <span class="comment">#在右边显示</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span> <span class="comment">#看板的宽</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">345</span> <span class="comment">#看板的高</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span>  <span class="comment">#是否在手机进行显示</span></span><br></pre></td></tr></table></figure></li><li><p>想要预览live2d挑选喜欢的模型可以访问该<a href="https://huaji8.top/post/live2d-plugin-2.0/">网站</a></p></li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Hexo博客增加live2d插件&quot;&gt;&lt;a href=&quot;#Hexo博客增加live2d插件&quot; class=&quot;headerlink&quot; title=&quot;Hexo博客增加live2d插件&quot;&gt;&lt;/a&gt;Hexo博客增加live2d插件&lt;/h1&gt;&lt;h2 id=&quot;插件安装&quot;&gt;&lt;a href=&quot;#插件安装&quot; class=&quot;headerlink&quot; title=&quot;插件安装&quot;&gt;&lt;/a&gt;插件安装&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;cmd进入到你的博客文件夹路径下&lt;/li&gt;
&lt;li&gt;使用 &lt;code&gt;npm i hexo-helper-live2d --save&lt;/code&gt; 安装依赖&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="博客配置与搭建" scheme="http://example.com/categories/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Live2d" scheme="http://example.com/tags/Live2d/"/>
    
  </entry>
  
</feed>
