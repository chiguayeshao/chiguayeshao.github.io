<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Github+Hexo+NexT搭建个人博客（Windows）</title>
    <url>/2020/12/14/Github-Hexo-NexT%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88Windows%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Github-Hexo-NexT搭建个人博客（Windows）"><a href="#Github-Hexo-NexT搭建个人博客（Windows）" class="headerlink" title="Github+Hexo+NexT搭建个人博客（Windows）"></a>Github+Hexo+NexT搭建个人博客（Windows）</h1><h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><ol>
<li>GitHub仓库</li>
<li>安装Git</li>
<li>安装Node.js</li>
<li>安装Hexo</li>
<li>安装Next主题</li>
<li>购买域名</li>
</ol>
<span id="more"></span>

<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><ol>
<li><p>进入Git官网<a href="https://git-scm.com/download/win">下载</a></p>
</li>
<li><p>根据你的电脑选择64位或32位版本</p>
<p><img src="https://i.loli.net/2020/12/14/uDjagzShdHbJs6M.png" alt="image-20201214215323884"></p>
</li>
<li><p>无脑点击下一步，直到安装完成</p>
</li>
</ol>
<h2 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h2><ol>
<li><p>进入Node官网<a href="https://nodejs.org/en/download/">下载</a></p>
</li>
<li><p>根据你的电脑选择64位或32位版本</p>
<p><img src="https://i.loli.net/2020/12/14/7TdBAfmkriUSnKy.png" alt="image-20201214215254079"></p>
</li>
<li><p>无脑点击下一步，直到安装完成</p>
</li>
<li><p>测试是否安装成功：注意安装Node会同时安装npm</p>
<ul>
<li><p>打开命令行工具，输入<code>git -v</code> 查看Node是否安装成功</p>
</li>
<li><p>如图，显示Git版本则安装成功</p>
<p><img src="https://i.loli.net/2020/12/14/2Nm7nexZw31Cubp.png" alt="image-20201214221400043"></p>
</li>
<li><p>打开命令行工具，输入<code>npm -v</code> 查看npm是否安装成功</p>
</li>
<li><p>如图，显示npm版本则安装成功</p>
<p><img src="https://i.loli.net/2020/12/14/6OWRcPpxjGgl5Ls.png" alt="image-20201214221424224"></p>
</li>
</ul>
</li>
</ol>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><ol>
<li><p>选择合适的位置创建一个文件夹</p>
</li>
<li><p>输入cmd，打开命令行工具并定位到该文件夹</p>
<p><img src="https://i.loli.net/2020/12/14/KvIb7apfV9ASxOh.png" alt="image-20201214222613531"></p>
</li>
<li><p>使用npm命令安装Hexo</p>
<p><code>npm install hexo-cli -g</code></p>
</li>
<li><p>使用Hexo初始化博客</p>
<p><code>hexo init blogName</code></p>
<ul>
<li>blogName是你想要的任意名字</li>
<li>将创建出一个名为blogName的文件夹</li>
</ul>
</li>
<li><p>检查博客状态</p>
<ol>
<li><p>按顺序输入命令</p>
<p><code>hexo g</code></p>
<p><code>hexo s</code></p>
</li>
<li><p>在浏览器中输入loclhost:4000</p>
</li>
</ol>
</li>
<li><p>如图，博客初具形态，由于我做过些配置修改，因此和你的页面显示不完全一样。</p>
<p><img src="https://i.loli.net/2020/12/14/QZJR9ncsrTl5twm.png" alt="image-20201214221612356"></p>
</li>
</ol>
<h2 id="Github创建仓库"><a href="#Github创建仓库" class="headerlink" title="Github创建仓库"></a>Github创建仓库</h2><ol>
<li><p>Repository name需要创建为 username.github.io</p>
<ul>
<li>username是你的Github用户名</li>
</ul>
</li>
<li><p>使用Git Bash配置ssh密钥，连接GitHub</p>
<p><img src="https://i.loli.net/2020/12/14/TugAJGOYsCQf7mh.png" alt="image-20201214221753832"></p>
<ul>
<li><p>输入以下命令，设置username和useremail</p>
<p><code>git config --global user.name &quot;你的GitHub用户名&quot;</code></p>
<p><code>git config --global user.email &quot;你的GitHub注册邮箱&quot;</code></p>
</li>
<li><p>输入以下命令生成密钥文件(无脑回车)</p>
<p><code>ssh-keygen -t rsa -C &quot;你的GitHub注册邮箱&quot;</code></p>
</li>
<li><p>找到密钥文件，一般在C:\Users\username.ssh路径下，复制密钥内容</p>
<p><img src="https://i.loli.net/2020/12/14/c19gwksSavRVdym.png" alt="image-20201214222149511"></p>
</li>
<li><p>进入Github Setting页面</p>
<p><img src="https://i.loli.net/2020/12/14/doeuLRa9mj58ZfW.png" alt="image-20201214222315041"></p>
</li>
<li><p>new SSH KEY</p>
<p><img src="https://i.loli.net/2020/12/14/AFa91eMnJWgSIti.png" alt="image-20201214222419096"></p>
<ul>
<li><p>title随意，key输入刚刚复制的密钥内容</p>
<p><img src="https://i.loli.net/2020/12/14/3kt7D8MKSFv12go.png" alt="image-20201214222512434"></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p>至此配置完毕，将博客推送至GitHub，执行以下命令<br><code>hexo clean</code></p>
<p><code>hexo g</code></p>
<p><code>hexo d</code></p>
<ul>
<li>可以看到GitHub中已经有了我们的博客文件</li>
</ul>
</li>
<li><p>在浏览器中输入username.github.io访问博客</p>
</li>
</ol>
<h2 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h2><ol>
<li><p>购买域名我推荐使用美区<a href="https://www.godaddy.com/offers/brand/new?isc=gofd2001aj&gclid=CjwKCAiAlNf-BRB_EiwA2osbxfBGER8_uvJGversF6txxsoGmWe-xcdK-SKtMlx08j7nU5M105M1gxoCU4cQAvD_BwE&gclsrc=aw.ds">Godaddy</a>（需要科学上网），其他途径如阿里云，腾讯云等可自行购买</p>
</li>
<li><p>注册Godaddy</p>
</li>
<li><p>输入你想要的域名</p>
<p><img src="https://i.loli.net/2020/12/14/bryT2CNck3MYxt5.png" alt="image-20201214215405386"></p>
</li>
<li><p>根据经济实力选择购买域名</p>
</li>
<li><p>配置域名，将域名与博客绑定</p>
<ul>
<li><p>进入Godaddy控制面板</p>
</li>
<li><p>选择你购买的域名，点击DNS开始配置DNS</p>
</li>
</ul>
<p><img src="https://i.loli.net/2020/12/14/QoSdh5H9OwnMpqP.png" alt="image-20201214215554340"></p>
<ul>
<li><p>添加一条A记录，value填入ip地址（ip地址通过 <code>ping username.github.io</code>获得）</p>
<p><img src="https://i.loli.net/2020/12/14/zyV31FjWvq4KoQm.png" alt="image-20201214221158651"></p>
</li>
<li><p>添加一条CNAME记录，value填入username.github.io`</p>
</li>
</ul>
<p><img src="https://i.loli.net/2020/12/14/NTOSvQCJo3rgdyw.png" alt="image-20201214220124019"></p>
</li>
</ol>
<ol start="6">
<li><p>配置博客</p>
<ul>
<li><p>进入博客目录中的source文件夹</p>
<p><img src="https://i.loli.net/2020/12/15/79tWVbOZUAMvQpi.png" alt="image-20201214220627487"></p>
</li>
<li><p>在source文件夹中新建一个没有后缀名的文件，文件名为CNAME</p>
<p><img src="https://i.loli.net/2020/12/14/gJPBdjL4tIQi2Zf.png" alt="image-20201214220736897"></p>
</li>
<li><p>编辑CNAME文件，在文件中输入你的域名</p>
<p><img src="https://i.loli.net/2020/12/14/ZSKLxwszYn1amvH.png" alt="image-20201214220910202"></p>
</li>
</ul>
</li>
</ol>
<ol start="7">
<li>配置完毕，在浏览器中输入域名访问，测试域名是否绑定成功</li>
</ol>
<h2 id="安装NexT主题"><a href="#安装NexT主题" class="headerlink" title="安装NexT主题"></a>安装NexT主题</h2><ol>
<li><p>安装，执行以下命令</p>
<p><code>npm install hexo-theme-next</code></p>
<p><code>git clone https://github.com/next-theme/hexo-theme-next themes/next</code></p>
</li>
<li><p>修改配置文件</p>
<p><img src="https://i.loli.net/2020/12/14/HhBmITV18tAe7Nd.png" alt="image-20201214222836213"></p>
<ul>
<li>将theme的的内容更改为next</li>
<li>重新执行以下命令可使next主题生效<ul>
<li><code>hexo g</code></li>
<li><code>hexo d</code></li>
</ul>
</li>
</ul>
</li>
<li><p>NexT主题的详细操作可访问<a href="https://theme-next.iissnan.com/getting-started.html">NexT官网</a>查看进阶功能或<a href="https://github.com/next-theme/hexo-theme-next">GitHub地址</a></p>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>根据Hexo<a href="https://hexo.io/zh-cn/docs/">官网文档</a>和NexT<a href="https://theme-next.iissnan.com/">官网文档</a>，我们可以高度自定义我们的博客</li>
<li>具体如何自定义使博客内容更丰富，我将在之后的文章中一一道来</li>
</ul>
]]></content>
      <categories>
        <category>博客配置与搭建</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo博客增加live2d</title>
    <url>/2020/12/16/Hexo%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0live2d/</url>
    <content><![CDATA[<h1 id="Hexo博客增加live2d插件"><a href="#Hexo博客增加live2d插件" class="headerlink" title="Hexo博客增加live2d插件"></a>Hexo博客增加live2d插件</h1><h2 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h2><ol>
<li>cmd进入到你的博客文件夹路径下</li>
<li>使用 <code>npm i hexo-helper-live2d --save</code> 安装依赖</li>
</ol>
<a id="more"></a>

<ol>
<li><p>安装成功后博客的package.json文件下会自动加入该包</p>
<p><img src="https://i.loli.net/2020/12/16/M3UrCJqVPN6Zp8K.png" alt="image-20201216215110041"></p>
</li>
</ol>
<h1 id="live2d-Model下载"><a href="#live2d-Model下载" class="headerlink" title="live2d Model下载"></a>live2d Model下载</h1><ol>
<li><p>进入GitHub下载<a href="https://github.com/xiazeyu/live2d-widget-models">live2d模型</a></p>
<p><img src="https://i.loli.net/2020/12/16/VZtsIemwj1h3TDl.png" alt="image-20201216215300880"></p>
</li>
<li><p>解压出该文件夹中的packages文件</p>
</li>
<li><p>将packages文件中的model复制到博客文件夹下的node_modules文件夹中</p>
<p><img src="https://i.loli.net/2020/12/16/6sZixo5y9IRnktT.png" alt="image-20201216222846076"></p>
</li>
</ol>
<h1 id="修改博客配置文件"><a href="#修改博客配置文件" class="headerlink" title="修改博客配置文件"></a>修改博客配置文件</h1><ol>
<li><p>进入博客的配置文件_config.yml，增加以下配置</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#是否开启看板</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-hijiki</span> <span class="comment">#想切换模型直接修改为node_modules中的liv2d的各模型文件名称</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span> <span class="comment">#在右边显示</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span> <span class="comment">#看板的宽</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">345</span> <span class="comment">#看板的高</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span>  <span class="comment">#是否在手机进行显示</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>想要预览live2d挑选喜欢的模型可以访问该<a href="https://huaji8.top/post/live2d-plugin-2.0/">网站</a></p>
</li>
</ol>
]]></content>
      <categories>
        <category>博客配置与搭建</category>
      </categories>
      <tags>
        <tag>Live2d</tag>
      </tags>
  </entry>
  <entry>
    <title>一键配置SSL证书</title>
    <url>/2020/12/15/%E4%B8%80%E9%94%AE%E9%85%8D%E7%BD%AESSL%E8%AF%81%E4%B9%A6/</url>
    <content><![CDATA[<h1 id="Github-Hexo博客一键配置证书"><a href="#Github-Hexo博客一键配置证书" class="headerlink" title="Github+Hexo博客一键配置证书"></a>Github+Hexo博客一键配置证书</h1><h1 id="一键配置"><a href="#一键配置" class="headerlink" title="一键配置"></a>一键配置</h1><ol>
<li><p>进入GitHub，找到博客所部署的仓库</p>
</li>
<li><p>点击Setting</p>
<p><img src="https://i.loli.net/2020/12/15/5SH98wXszenDiQW.png" alt="image-20201215204100107"></p>
</li>
</ol>
<a id="more"></a>

<ol>
<li><p>下拉找到GitHub Pages，勾选Enforce HTTPS</p>
<p><img src="https://i.loli.net/2020/12/15/tzY2wFrpsNum3XE.png" alt="image-20201215204231362"></p>
</li>
<li><p>证书配置完毕</p>
<p><img src="https://i.loli.net/2020/12/15/qXyrSZeQd7pW5Cv.png" alt="image-20201215204310992"></p>
</li>
</ol>
<h1 id="还想bb两句"><a href="#还想bb两句" class="headerlink" title="还想bb两句"></a>还想bb两句</h1><h2 id="通过Freessl获取免费证书"><a href="#通过Freessl获取免费证书" class="headerlink" title="通过Freessl获取免费证书"></a>通过Freessl获取免费证书</h2><ol>
<li><p>获取免费证书推荐通过FreeSSl<a href="https://freessl.cn/">官网</a></p>
</li>
<li><p>输入你的域名，点击创建证书</p>
<p><img src="https://i.loli.net/2020/12/15/Pg9wuTGWRZbpXrj.png" alt="image-20201215204649089"></p>
</li>
<li><p>之后应该会要求注册登录，输入邮箱为了快速方便选择浏览器生成(推荐chrome)</p>
<p><img src="https://i.loli.net/2020/12/15/ZTPO5sM3qdgDHBk.png" alt="image-20201215204827876"></p>
</li>
<li><p>之后会自动将私钥下载到本地，并且页面会如图所示要求DNS验证</p>
<p><img src="https://i.loli.net/2020/12/15/gxUdY75pABn2amo.png" alt="image-20201215205007751"></p>
</li>
<li><p>进入域名商网站配置域名(我用的是Godaddy<a href="https://www.godaddy.com/">官网</a>，其他供应商大同小异)</p>
<ul>
<li><p>根据freessl提示配置TXT记录</p>
<ul>
<li><p>Type输入TXT</p>
</li>
<li><p>Name输入freessl的TXT记录内容</p>
<p><img src="https://i.loli.net/2020/12/15/4AVpLatovb2TkhY.png" alt="image-20201215205413553"></p>
</li>
<li><p>Value输入freessl的记录值内容</p>
<p><img src="https://i.loli.net/2020/12/15/9lPns1VMHfTkXyx.png" alt="image-20201215205458547"></p>
</li>
</ul>
</li>
<li><p>然后回到freessl点击 配置完成，检测一下</p>
</li>
<li><p>检查成功后可以点击 点击验证按钮，生成免费的SSL证书</p>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>博客配置与搭建</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Webpack基础配置</title>
    <url>/2021/06/15/Webpack%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="Webpack基础配置"><a href="#Webpack基础配置" class="headerlink" title="Webpack基础配置"></a>Webpack基础配置</h1><h2 id="五个概念"><a href="#五个概念" class="headerlink" title="五个概念"></a>五个概念</h2><ol>
<li>entry 入口<ul>
<li>指示webpack从哪个文件开始打包</li>
</ul>
</li>
<li>output 出口<ul>
<li>打包完的文件输出到哪里去，以及如何命名</li>
</ul>
</li>
<li>loader 加载器<ul>
<li>webpack本身只处理js，json等资源</li>
<li>其他资源需要借助loader才能解析</li>
</ul>
</li>
<li>plugins 插件<ul>
<li>扩展webpack功能</li>
</ul>
</li>
<li>mode 模式<ul>
<li>开发模式 development</li>
<li>生产模式 production</li>
</ul>
</li>
</ol>
<span id="more"></span>

<h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><ol>
<li>基础配置文件<ul>
<li>在根目录创建 <code>webpack.config.js</code>文件</li>
</ul>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// node.js的核心模块，专门处理文件路径</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 入口</span></span><br><span class="line">    entry: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="comment">// 出口</span></span><br><span class="line">    output : &#123;</span><br><span class="line">        <span class="comment">// path 文件输出目录，必须是绝对路径</span></span><br><span class="line">        <span class="comment">// path.resolve() 返回一个绝对路径</span></span><br><span class="line">        <span class="comment">// __dirname 当前文件所在绝对路径</span></span><br><span class="line">        path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        filename: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 加载器</span></span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 插件</span></span><br><span class="line">    plugins: [],</span><br><span class="line">    <span class="comment">// 模式</span></span><br><span class="line">    mode : <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>运行 <code>npx webpack</code>进行打包</li>
</ol>
<h2 id="开发模式"><a href="#开发模式" class="headerlink" title="开发模式"></a>开发模式</h2><ul>
<li>主要做两件事<ol>
<li>编译代码，使浏览器能识别运行<ul>
<li>样式</li>
<li>字体</li>
<li>图片</li>
<li>html</li>
</ul>
</li>
<li>代码质量检查，设置代码规范<ul>
<li>提前检查代码隐患，使代码更健壮</li>
<li>统一团队编码风格</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="处理样式资源"><a href="#处理样式资源" class="headerlink" title="处理样式资源"></a>处理样式资源</h3><ol>
<li><p>css</p>
<ul>
<li><p>下载两个loader <code>npm i css-loader style-loader -D</code></p>
</li>
<li><p>配置module</p>
<ul>
<li><pre><code class="javascript">module: &#123;
        rules: [
            &#123;
                test: /\.css$/,
                use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]
            &#125;
        ],
    &#125;,
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">     - ![image-<span class="number">20220606201544356</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606201544356</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. less </span><br><span class="line"></span><br><span class="line">   - 下载less loader `npm i less-loader -D`</span><br><span class="line"></span><br><span class="line">   - 配置module</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       &#123;</span><br><span class="line">               test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">               use: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;less-loader&quot;</span>],</span><br><span class="line">             &#125;,</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>use中的loader是从后往前执行，因此less-loader 需要放在 style-loader 与 css-loader之后</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>sass/scss</p>
<ul>
<li><p>下载sass-loader <code>npm i sass-loader sass -D</code></p>
</li>
<li><p>配置module</p>
<ul>
<li><pre><code class="javascript">&#123;
        test: /\.s[ac]ss$/,
        use: [&quot;style-loader&quot;, &quot;css-loader&quot;, &quot;sass-loader&quot;],
      &#125;,
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. styl</span><br><span class="line"></span><br><span class="line">   - 下载stylus-loader `npm i stylus-loader -D`</span><br><span class="line"></span><br><span class="line">   - 配置module</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       &#123;</span><br><span class="line"><span class="title">               test:</span> /\.styl$/,</span><br><span class="line"><span class="title">               use:</span> [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;stylus-loader&quot;</span>],</span><br><span class="line">             &#125;,</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="处理图片资源"><a href="#处理图片资源" class="headerlink" title="处理图片资源"></a>处理图片资源</h3><ol>
<li><p>webpack5已经内置了 file-loader 和 url-loader  两个loader</p>
</li>
<li><p>只需要在module中进行配置即可</p>
<ul>
<li><pre><code class="javascript">&#123;
        test: /\.(png|jpe?g|gif|webp)$/,
        type: &quot;asset&quot;,
      &#125;,
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 优化图片资源</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 将小于某大小的图片转换为data url （base64）</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 优点：减少请求数量</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> 缺点：体积变大</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">     parser: &#123;</span></span><br><span class="line"><span class="code">               dataUrlCondition: &#123;</span></span><br><span class="line"><span class="code">                 maxSize: 10 * 1024 // 小于10kb的图片会被base64处理</span></span><br><span class="line"><span class="code">               &#125;</span></span><br><span class="line"><span class="code">             &#125;</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ol>
<h3 id="修改输出资源的名称和路径"><a href="#修改输出资源的名称和路径" class="headerlink" title="修改输出资源的名称和路径"></a>修改输出资源的名称和路径</h3><ol>
<li><p>修改js文件路径</p>
<ul>
<li><code>filename: &quot;static/js/main.js&quot;,</code></li>
<li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606224701172.png" alt="image-20220606224701172"></li>
</ul>
</li>
<li><p>修改html引入</p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606224741833.png" alt="image-20220606224741833"></li>
</ul>
</li>
<li><p>修改图片输出路径以及命名</p>
<ul>
<li><pre><code class="javascript">generator: &#123;
                    // 将图片文件输出到 static/imgs 目录中
                    // 将图片文件命名 [hash:8][ext][query]
                    // [hash:8]: hash值取8位
                    // [ext]: 使用之前的文件扩展名
                    // [query]: 添加之前的query参数
                    filename: &quot;static/imgs/[hash:8][ext][query]&quot;,
                &#125;,
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220606224852478</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606224852478</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 自动清空上次打包资源</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 配置output</span><br><span class="line">   - `clean: true`</span><br><span class="line">   - ![image-<span class="number">20220606225727622</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220606225727622</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 处理字体图标资源</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 配置loader</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     &#123;</span><br><span class="line">                     test: <span class="regexp">/\.(ttf|woff2?)$/</span>,</span><br><span class="line">                     type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">                     generator: &#123;</span><br><span class="line">                         filename: <span class="string">&quot;static/media/[hash:8][ext][query]&quot;</span>,</span><br><span class="line">                     &#125;,</span><br><span class="line">                 &#125;,</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220606230029205.png" alt="image-20220606230029205"></p>
</li>
</ul>
</li>
</ol>
<h3 id="处理js资源"><a href="#处理js资源" class="headerlink" title="处理js资源"></a>处理js资源</h3><ol>
<li><p>处理代码格式，使用eslint</p>
<ol>
<li><p>在根目录创建 .eslintrc.js 文件</p>
</li>
<li><p>配置 .eslintrc.js文件</p>
</li>
<li><pre><code class="javascript">module.exports = &#123;
    // 解析选项
    parserOptions: &#123;
        ecmaVersion: 6, // ES 语法版本
        sourceType: &quot;module&quot;, // ES 模块化
        ecmaFeatures: &#123; // ES 其他特性
            jsx: true // 如果是 React 项目，就需要开启 jsx 语法
        &#125;
    &#125;,
    // 继承其他规则，后期配置react项目可以继承react官方规则
    extends: [&quot;react-app&quot;],
    // 覆盖继承的规则，一个一个手rules写过于复杂
    rules: &#123;
        // 我们的规则会覆盖掉react-app的规则
        semi: &quot;error&quot;, // 禁止使用分号
        &#39;array-callback-return&#39;: &#39;warn&#39;, // 强制数组方法的回调函数中有 return 语句，否则警告
        &#39;default-case&#39;: [
            &#39;warn&#39;, // 要求 switch 语句中有 default 分支，否则警告
            &#123; commentPattern: &#39;^no default$&#39; &#125; // 允许在最后注释 no default, 就不会有警告了
        ],
        eqeqeq: [
            &#39;warn&#39;, // 强制使用 === 和 !==，否则警告
            &#39;smart&#39; // https://eslint.bootcss.com/docs/rules/eqeqeq#smart 除了少数情况下不会有警告
        ],
    &#125;,
    // ...
    // 其他规则详见：https://eslint.bootcss.com/docs/user-guide/configuring
&#125;;
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">4.</span> ![<span class="string">image-20220607000245951</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000245951.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> rules具体规则</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;off&quot;`</span> 或 <span class="code">`0`</span> - 关闭规则</span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;warn&quot;`</span> 或 <span class="code">`1`</span> - 开启规则，使用警告级别的错误：<span class="code">`warn`</span> (不会导致程序退出)</span><br><span class="line"><span class="bullet">   -</span> <span class="code">`&quot;error&quot;`</span> 或 <span class="code">`2`</span> - 开启规则，使用错误级别的错误：<span class="code">`error`</span> (当被触发的时候，程序会退出)</span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> 下载包 <span class="code">`npm i eslint-webpack-plugin eslint -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">7.</span> 配置webpack.config.js文件</span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">`const ESLintWebpackPlugin = require(&quot;eslint-webpack-plugin&quot;);`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   -</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">     plugins: [</span></span><br><span class="line"><span class="code">         new ESLintWebpackPlugin(&#123;</span></span><br><span class="line"><span class="code">           // 指定检查文件的根目录</span></span><br><span class="line"><span class="code">           context: path.resolve(__dirname, &quot;src&quot;),</span></span><br><span class="line"><span class="code">         &#125;),</span></span><br><span class="line"><span class="code">       ],</span></span><br></pre></td></tr></table></figure>

- ![image-20220607000723823](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000723823.png)

- ![image-20220607000745553](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607000745553.png)</code></pre>
</li>
<li><p>为了更好的开发体验，可以下载vscode的eslint插件，并且配置 .eslintignore 文件，忽略dist文件夹</p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607001010979.png" alt="image-20220607001010979"></li>
</ul>
</li>
</ol>
</li>
<li><p>处理兼容性，使用babel</p>
<ol>
<li><p>在根目录创建 babel.config.js 文件</p>
</li>
<li><p>下载相关包 <code>npm i babel-loader @babel/core @babel/preset-env -D</code></p>
</li>
<li><p>配置 babel.config.js 文件</p>
<ol>
<li><p>presets 预设</p>
<ol>
<li><code>@babel/preset-env</code>: 一个智能预设，允许您使用最新的 JavaScript。</li>
<li><code>@babel/preset-react</code>：一个用来编译 React jsx 语法的预设</li>
<li><code>@babel/preset-typescript</code>：一个用来编译 TypeScript 语法的预设</li>
</ol>
</li>
<li><pre><code class="javascript">module.exports = &#123;
    // 预设
    presets: [&quot;@babel/preset-env&quot;],
&#125;;
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置 webpack.config.js 文件</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 排除 node_modules 文件夹</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>. ```javascript</span><br><span class="line">      &#123;</span><br><span class="line">              test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">              exclude: <span class="regexp">/node_modules/</span>, <span class="regexp">//</span> 排除node_modules代码不编译</span><br><span class="line">              loader: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="处理Html资源"><a href="#处理Html资源" class="headerlink" title="处理Html资源"></a>处理Html资源</h3><ol>
<li><p>安装插件 <code>npm i html-webpack-plugin -D</code></p>
</li>
<li><p>配置 web pack.config.js 文件</p>
<ol>
<li><p><code>const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</code></p>
</li>
<li><pre><code class="javascript">new HtmlWebpackPlugin(&#123;
      // 以 public/index.html 为模板创建文件
      // 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源
      template: path.resolve(__dirname, &quot;public/index.html&quot;),
    &#125;),
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3</span>. 打包后的html会自动引入js文件，因此index.html中不需要手动引入了</span><br><span class="line"><span class="number">4</span>. ![image-<span class="number">20220607150650273</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607150650273</span>.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### 开发服务器 &amp; 自动化</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 下载包 `npm i webpack-dev-server -D`</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 配置 webpack.config.js 文件</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     <span class="regexp">//</span> 开发服务器</span><br><span class="line">       devServer: &#123;</span><br><span class="line">         host: <span class="string">&quot;localhost&quot;</span>, <span class="regexp">//</span> 启动服务器域名</span><br><span class="line">         port: <span class="string">&quot;3000&quot;</span>, <span class="regexp">//</span> 启动服务器端口号</span><br><span class="line">         open: true, <span class="regexp">//</span> 是否自动打开浏览器</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ol>
</li>
<li><p>当启用开发服务器后，所有代码都在内存中编译打包，因此并不会输出到dist目录下</p>
</li>
</ol>
<h2 id="生产模式"><a href="#生产模式" class="headerlink" title="生产模式"></a>生产模式</h2><ul>
<li><p>优化代码运行性能</p>
</li>
<li><p>优化代码打包速度</p>
</li>
</ul>
<ol>
<li><p>分别配置开发环境与生产环境文件，存入config文件夹</p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607154900222.png"></li>
<li>因为存入了config文件夹，因此需要修改webpack配置文件中的路径</li>
</ul>
</li>
<li><p>配置package.json简化命令</p>
<ul>
<li><pre><code class="json">  // 其他省略
  &quot;scripts&quot;: &#123;
    &quot;start&quot;: &quot;npm run dev&quot;,
    &quot;dev&quot;: &quot;npx webpack serve --config ./config/webpack.dev.js&quot;,
    &quot;build&quot;: &quot;npx webpack --config ./config/webpack.prod.js&quot;
  &#125;
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607155141887</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607155141887</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### css处理</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 目前css文件被打包到js文件中，当js文件加载时，会创建style标签来生成样式</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 网速慢的时候会产生屏闪现象</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 应该将css文件单独出来，用link标签加载，性能更好</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置webpack文件</span><br><span class="line"></span><br><span class="line">   - `const MiniCssExtractPlugin = require(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);`</span><br><span class="line"></span><br><span class="line">   - 替换所有的style-loader</span><br><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607155949418</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607155949418</span>.png)</span><br><span class="line"></span><br><span class="line">   - 提取css成单独文件</span><br><span class="line"></span><br><span class="line">     - ```javascript</span><br><span class="line">       <span class="regexp">//</span> 提取css成单独文件</span><br><span class="line">           new MiniCssExtractPlugin(&#123;</span><br><span class="line">             <span class="regexp">//</span> 定义输出文件名和目录</span><br><span class="line">             filename: <span class="string">&quot;static/css/main.css&quot;</span>,</span><br><span class="line">           &#125;),</span><br></pre></td></tr></table></figure>

- ![image-20220607160048147](https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607160048147.png)</code></pre>
</li>
</ul>
</li>
<li><p>css兼容性处理</p>
<ol>
<li><p>下载包 <code>npm i postcss-loader postcss postcss-preset-env -D</code></p>
</li>
<li><p>配置webpack文件</p>
<ul>
<li><p>在css-loader之后添加配置</p>
</li>
<li><pre><code class="javascript">&#123;
            loader: &quot;postcss-loader&quot;,
            options: &#123;
              postcssOptions: &#123;
                plugins: [
                  &quot;postcss-preset-env&quot;, // 能解决大多数样式兼容性问题
                ],
              &#125;,
            &#125;,
          &#125;,
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - ![image-<span class="number">20220607160452201</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607160452201</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 控制兼容性</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 在package.json中配置 browserslist</span><br><span class="line"></span><br><span class="line">      - 兼容到 ie8</span><br><span class="line"></span><br><span class="line">        - ```json</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="regexp">//</span> 其他省略</span><br><span class="line">            <span class="string">&quot;browserslist&quot;</span>: [<span class="string">&quot;ie &gt;= 8&quot;</span>]</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure>

 - 不考虑旧版本浏览器

   - ```json
     &#123;
       // 其他省略
       &quot;browserslist&quot;: [&quot;last 2 version&quot;, &quot;&gt; 1%&quot;, &quot;not dead&quot;]
     &#125;
     <figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">      -</span> ![<span class="string">image-20220607161009633</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607161009633.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> css压缩</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载插件包 <span class="code">`npm i css-minimizer-webpack-plugin -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> 配置webpack文件</span><br><span class="line"></span><br><span class="line"><span class="bullet">      1.</span> <span class="code">`const CssMinimizerPlugin = require(&quot;css-minimizer-webpack-plugin&quot;);`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">      2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">         // css压缩</span></span><br><span class="line"><span class="code">             new CssMinimizerPlugin(),</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>html压缩</p>
<ol>
<li>默认生产模式已经开启了：html 压缩和 js 压缩</li>
<li>不需要额外进行配置</li>
</ol>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>Webpack高级优化</title>
    <url>/2021/06/16/Webpack%E9%AB%98%E7%BA%A7%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h1 id="Webpack高级优化"><a href="#Webpack高级优化" class="headerlink" title="Webpack高级优化"></a>Webpack高级优化</h1><h2 id="提升开发体验"><a href="#提升开发体验" class="headerlink" title="提升开发体验"></a>提升开发体验</h2><h3 id="sourcemap"><a href="#sourcemap" class="headerlink" title="sourcemap"></a>sourcemap</h3><ol>
<li><p>打包完后的代码不便与阅读</p>
</li>
<li><p>因此需要sourcemap来生成源代码与构建后代码的一一映射</p>
</li>
<li><p>会生成xxx.map文件，包含源代码与构建后代码每一行，每一列的映射关系</p>
<ol>
<li>如果构建代码出错，通过xxx.map文件可以定位到源代码出错位置</li>
</ol>
</li>
<li><p>使用</p>
</li>
</ol>
<span id="more"></span>

<ol>
<li><p>开发模式</p>
<ol>
<li><p><code>cheap-module-source-map</code></p>
<ul>
<li><p>优点：打包编译快，只含行映射</p>
</li>
<li><p>缺点：没有列映射</p>
</li>
<li><pre><code class="javascript">module.exports = &#123;
  // 其他省略
  mode: &quot;development&quot;,
  devtool: &quot;cheap-module-source-map&quot;,
&#125;;
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. 生产模式</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. `source-map`</span><br><span class="line"></span><br><span class="line">      - 优点：包含行/列映射 （生产模式打包后的代码时是压缩为一行的，没有列映射很难定位出错位置）</span><br><span class="line"></span><br><span class="line">      - 缺点：打包编译速度更慢</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        module.exports = &#123;</span><br><span class="line">          // 其他省略</span><br><span class="line"><span class="title">          mode:</span> <span class="string">&quot;production&quot;</span>,</span><br><span class="line"><span class="title">          devtool:</span> <span class="string">&quot;source-map&quot;</span>,</span><br><span class="line">        &#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 id="提升打包构建速度"><a href="#提升打包构建速度" class="headerlink" title="提升打包构建速度"></a>提升打包构建速度</h2><h4 id="HotModuleReplacement"><a href="#HotModuleReplacement" class="headerlink" title="HotModuleReplacement"></a>HotModuleReplacement</h4><ol>
<li><p>开发过程中，我们修改了一个模块的代码，webpack默认将所有模块重新编译打包，速度很慢</p>
<ul>
<li>因此我们只需要对修改的模块重新编译打包，其他模块不变就可以提升打包速度</li>
</ul>
</li>
<li><p>HotModuleReplacement（HMR/热模块替换）：在程序运行中，替换、添加或删除模块，而无需重新加载整个页面</p>
</li>
<li><p>配置</p>
<ol>
<li><pre><code class="javascript">module.exports = &#123;
  // 其他省略
  devServer: &#123;
    host: &quot;localhost&quot;, // 启动服务器域名
    port: &quot;3000&quot;, // 启动服务器端口号
    open: true, // 是否自动打开浏览器
    hot: true, // 开启HMR功能（只能用于开发环境，生产环境不需要了）
  &#125;,
&#125;;
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">2</span>. 可以在js中判断是否支持hmr，但是会非常麻烦</span><br><span class="line"></span><br><span class="line">      - ![image-<span class="number">20220607180103928</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607180103928</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">3</span>. 实际开发过程中用loader来解决</span><br><span class="line"></span><br><span class="line">      - React-hot-loader</span><br><span class="line"></span><br><span class="line"><span class="comment">### OneOf</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 打包过程中，每个文件会经过所有loader处理，虽然正则没有匹配上，但是都需要经过一遍，浪费时间</span><br><span class="line"><span class="number">2</span>. 使用oneof：只要有一个匹配上了就不进行多余操作</span><br><span class="line"><span class="number">3</span>. 配置webpack</span><br><span class="line">   - ![image-<span class="number">20220607182231155</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182231155</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Include/Exclude</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 开发过程中我们需要使用第三方库或者插件，这些文件都会下载到node_module文件夹中</span><br><span class="line">   - 这些文件是不需要编译就可以使用的</span><br><span class="line">   - 因此我们在编译js的时候要排除node_module</span><br><span class="line"><span class="number">2</span>. 配置webpack</span><br><span class="line">   <span class="number">1</span>. ![image-<span class="number">20220607182501230</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182501230</span>.png)</span><br><span class="line">   <span class="number">2</span>. ![image-<span class="number">20220607182527569</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182527569</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Cache</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 每次打包都需要经过Eslint检查以及babel编译，速度慢</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 我们可以缓存eslint检查和babel的编译结果，这样在第二次打包的速度就更快了</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 配置webpack （缓存文件不要压缩，可以提高检索效率）</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. ```javascript</span><br><span class="line">      options: &#123;</span><br><span class="line">                    cacheDirectory: true, <span class="regexp">//</span> 开启babel编译缓存</span><br><span class="line">                    cacheCompression: false, <span class="regexp">//</span> 缓存文件不要压缩</span><br><span class="line">                  &#125;,</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><pre><code class="javascript">cache: true, // 开启缓存
      // 缓存目录
      cacheLocation: path.resolve(
        __dirname,
        &quot;../node_modules/.cache/.eslintcache&quot;
      ),
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">3</span>. ![image-<span class="number">20220607182755181</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182755181</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">4</span>. ![image-<span class="number">20220607182839166</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607182839166</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### Thread</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 项目越庞大，打包速度越慢</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. 对js文件的处理主要是eslint，babel，terser三个工具，所以我们要提升他们的速度</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 开启多进程同时处理js</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>. 配置webpack</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 获取cpu的核数</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        <span class="regexp">//</span> nodejs核心模块，直接使用</span><br><span class="line">        const os = require(<span class="string">&quot;os&quot;</span>);</span><br><span class="line">        <span class="regexp">//</span> cpu核数</span><br><span class="line">        const threads = os.cpus().length;</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>下载包 <code>npm i thread-loader -D</code></p>
</li>
<li><pre><code class="javascript">use: [
              &#123;
                loader: &quot;thread-loader&quot;, // 开启多进程
                options: &#123;
                  workers: threads, // 数量
                &#125;,
              &#125;,
              &#123;
                loader: &quot;babel-loader&quot;,
                options: &#123;
                  cacheDirectory: true, // 开启babel编译缓存
                &#125;,
              &#125;,
            ],
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">   4.</span> ![<span class="string">image-20220607193846738</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193846738.png</span>)</span><br><span class="line"><span class="bullet">   5.</span> ![<span class="string">image-20220607193819516</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193819516.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">   6.</span> ![<span class="string">image-20220607193928589</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607193928589.png</span>)</span><br><span class="line"><span class="bullet">   7.</span> 项目较小的时候开多线程打包速度反而变慢，因为开启线程也是耗时操作，因此只有项目到达一定大小的时候开启多线程才能提高打包速度</span><br><span class="line"></span><br><span class="line"><span class="section">## 减少代码体积</span></span><br><span class="line"></span><br><span class="line"><span class="section">### Tree Shaking</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 开发过程中我们定义了一些工具函数库，或者使用了第三方的工具库或者组件库</span><br><span class="line"><span class="bullet">   -</span> 如果没有特殊处理，当我们只使用了一小部分功能时，打包却要引入整个库，这无疑会增大打包后的体积</span><br><span class="line"><span class="bullet">2.</span> tree shaking 是个术语，用于描述移除js中没有使用上的代码</span><br><span class="line"><span class="bullet">   -</span> 依赖于es module</span><br><span class="line"><span class="bullet">3.</span> webpack默认开启该功能，无需其他配置</span><br><span class="line"></span><br><span class="line"><span class="section">### Babel</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> babel在编译时为每个文件都插入了辅助代码，使代码体积过大</span><br><span class="line"><span class="bullet">2.</span> 可以将这些辅助代码作为一个独立的模块，避免重复引入</span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @babel/plugin-transform-runtime -D`</span></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">`@babel/plugin-transform-runtime`</span>可以禁用babel的自动引入</span><br><span class="line"><span class="bullet">   3.</span> ![<span class="string">image-20220607195613506</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220607195613506.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="section">### Image Minimizer</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 如果项目中有很多图片，那么打包后图片体积会很大，请求速度会慢</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> 因此需要对图片进行压缩，减少图片体积</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i image-minimizer-webpack-plugin imagemin -D`</span></span><br><span class="line"><span class="bullet">      1.</span> 无损压缩</span><br><span class="line"><span class="bullet">         -</span> <span class="code">`npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D`</span></span><br><span class="line"><span class="bullet">      2.</span> 有损压缩</span><br><span class="line"><span class="bullet">         -</span> <span class="code">`npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">      const ImageMinimizerPlugin = require(&quot;image-minimizer-webpack-plugin&quot;);</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><pre><code class="javascript">// 压缩图片
      new ImageMinimizerPlugin(&#123;
        minimizer: &#123;
          implementation: ImageMinimizerPlugin.imageminGenerate,
          options: &#123;
            plugins: [
              [&quot;gifsicle&quot;, &#123; interlaced: true &#125;],
              [&quot;jpegtran&quot;, &#123; progressive: true &#125;],
              [&quot;optipng&quot;, &#123; optimizationLevel: 5 &#125;],
              [
                &quot;svgo&quot;,
                &#123;
                  plugins: [
                    &quot;preset-default&quot;,
                    &quot;prefixIds&quot;,
                    &#123;
                      name: &quot;sortAttrs&quot;,
                      params: &#123;
                        xmlnsOrder: &quot;alphabetical&quot;,
                      &#125;,
                    &#125;,
                  ],
                &#125;,
              ],
            ],
          &#125;,
        &#125;,
      &#125;),
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">4</span>. ![image-<span class="number">20220607200319039</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607200319039</span>.png)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 优化代码性能</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Code split</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>. 打包代码会把所有代码打包到一个文件中，体积太大</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 如果我们只需要渲染首页，就应该只加载首页的js文件</span><br><span class="line">   <span class="number">2</span>. 所以我们在打包的时候对文件进行代码分割，生成多个js文件，渲染哪个页面就只加载某个js文件</span><br><span class="line">   <span class="number">3</span>. 这样加载的资源少，速度就快</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. code split主要做两件事</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 分割文件：将打包生成的文件进行分割，生成多个js文件</span><br><span class="line">   <span class="number">2</span>. 按需加载：需要哪个文件就加载哪个文件</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. 多入口</span><br><span class="line"></span><br><span class="line">   - 多个入口文件</span><br><span class="line">   - ![image-<span class="number">20220607202046597</span>](https:<span class="regexp">//</span>cdn.jsdelivr.net<span class="regexp">/gh/</span>chiguayeshao<span class="regexp">/pic-bed/im</span>age-<span class="number">20220607202046597</span>.png)</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. 下载包 `npm i webpack webpack-cli html-webpack-plugin -D`</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>. 配置webpack</span><br><span class="line"></span><br><span class="line">      - ```javascript</span><br><span class="line">        <span class="regexp">//</span> webpack.config.js</span><br><span class="line">        const path = require(<span class="string">&quot;path&quot;</span>);</span><br><span class="line">        const HtmlWebpackPlugin = require(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        module.exports = &#123;</span><br><span class="line">          <span class="regexp">//</span> 单入口</span><br><span class="line">          <span class="regexp">//</span> entry: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">          <span class="regexp">//</span> 多入口</span><br><span class="line">          entry: &#123;</span><br><span class="line">            main: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">            app: <span class="string">&quot;./src/app.js&quot;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          output: &#123;</span><br><span class="line">            path: path.resolve(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">            <span class="regexp">//</span> [name]是webpack命名规则，使用chunk的name作为输出的文件名。</span><br><span class="line">            <span class="regexp">//</span> 什么是chunk？打包的资源就是chunk，输出出去叫bundle。</span><br><span class="line">            <span class="regexp">//</span> chunk的name是啥呢？ 比如： entry中xxx: <span class="string">&quot;./src/xxx.js&quot;</span>, name就是xxx。注意是前面的xxx，和文件名无关。</span><br><span class="line">            <span class="regexp">//</span> 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)</span><br><span class="line">            filename: <span class="string">&quot;js/[name].js&quot;</span>,</span><br><span class="line">            clear: true,</span><br><span class="line">          &#125;,</span><br><span class="line">          plugins: [</span><br><span class="line">            new HtmlWebpackPlugin(&#123;</span><br><span class="line">              template: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">          ],</span><br><span class="line">          mode: <span class="string">&quot;production&quot;</span>,</span><br><span class="line">        &#125;;</span><br></pre></td></tr></table></figure>

- ```javascript
    optimization: &#123;
      // 代码分割配置
      splitChunks: &#123;
        chunks: &quot;all&quot;, // 对所有模块都进行分割
        // 以下是默认值
        // minSize: 20000, // 分割代码最小的大小
        // minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0
        // minChunks: 1, // 至少被引用的次数，满足条件才会代码分割
        // maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量
        // maxInitialRequests: 30, // 入口js文件最大并行请求数量
        // enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）
        // cacheGroups: &#123; // 组，哪些模块要打包到一个组
        //   defaultVendors: &#123; // 组名
        //     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块
        //     priority: -10, // 权重（越大越高）
        //     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块
        //   &#125;,
        //   default: &#123; // 其他没有写的配置会使用上面的默认值
        //     minChunks: 2, // 这里的minChunks权重更大
        //     priority: -20,
        //     reuseExistingChunk: true,
        //   &#125;,
        // &#125;,
        // 修改配置
        cacheGroups: &#123;
          // 组，哪些模块要打包到一个组
          // defaultVendors: &#123; // 组名
          //   test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块
          //   priority: -10, // 权重（越大越高）
          //   reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块
          // &#125;,
          default: &#123;
            // 其他没有写的配置会使用上面的默认值
            minSize: 0, // 我们定义的文件体积太小了，所以要改打包的最小文件体积
            minChunks: 2,
            priority: -20,
            reuseExistingChunk: true,
          &#125;,
        &#125;,
      &#125;,
  <figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3.</span> 配置按需加载，动态导入</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```<span class="javascript">javascript</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;hello main&quot;</span>);</span></span><br><span class="line"><span class="javascript">      </span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn&quot;</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 动态导入 --&gt; 实现按需加载</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 即使只被引用了一次，也会代码分割</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">import</span>(<span class="string">&quot;./math.js&quot;</span>).then(<span class="function">(<span class="params">&#123; sum &#125;</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          alert(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>));</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript">      &#125;;</span></span><br></pre></td></tr></table></figure>

2. 一旦通过 import 动态导入语法导入模块，模块就被代码分割，同时也能按需加载了</code></pre>
</li>
</ol>
</li>
<li><p>单入口</p>
<ol>
<li><p>单页面应用（spa），只有一个入口（单入口）</p>
</li>
<li><p>配置webpack</p>
<ol>
<li><pre><code class="javascript">const path = require(&quot;path&quot;);
const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);

module.exports = &#123;
  // 单入口
  entry: &quot;./src/main.js&quot;,
  // 多入口
  // entry: &#123;
  //   main: &quot;./src/main.js&quot;,
  //   app: &quot;./src/app.js&quot;,
  // &#125;,
  output: &#123;
    path: path.resolve(__dirname, &quot;./dist&quot;),
    // [name]是webpack命名规则，使用chunk的name作为输出的文件名。
    // 什么是chunk？打包的资源就是chunk，输出出去叫bundle。
    // chunk的name是啥呢？ 比如： entry中xxx: &quot;./src/xxx.js&quot;, name就是xxx。注意是前面的xxx，和文件名无关。
    // 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)
    filename: &quot;js/[name].js&quot;,
    clean: true,
  &#125;,
  plugins: [
    new HtmlWebpackPlugin(&#123;
      template: &quot;./public/index.html&quot;,
    &#125;),
  ],
  mode: &quot;production&quot;,
  optimization: &#123;
    // 代码分割配置
    splitChunks: &#123;
      chunks: &quot;all&quot;, // 对所有模块都进行分割
      // 以下是默认值
      // minSize: 20000, // 分割代码最小的大小
      // minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0
      // minChunks: 1, // 至少被引用的次数，满足条件才会代码分割
      // maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量
      // maxInitialRequests: 30, // 入口js文件最大并行请求数量
      // enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）
      // cacheGroups: &#123; // 组，哪些模块要打包到一个组
      //   defaultVendors: &#123; // 组名
      //     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块
      //     priority: -10, // 权重（越大越高）
      //     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块
      //   &#125;,
      //   default: &#123; // 其他没有写的配置会使用上面的默认值
      //     minChunks: 2, // 这里的minChunks权重更大
      //     priority: -20,
      //     reuseExistingChunk: true,
      //   &#125;,
      // &#125;,
  &#125;,
&#125;;
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. ```javascript</span><br><span class="line">       <span class="regexp">//</span> 代码分割配置</span><br><span class="line">       splitChunks: &#123;</span><br><span class="line">         chunks: <span class="string">&quot;all&quot;</span>, <span class="regexp">//</span> 对所有模块都进行分割</span><br><span class="line">         <span class="regexp">//</span> 其他内容用默认配置即可</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>![image-20220607203135751](/Users/xiaotian/Library/Application Support/typora-user-images/image-20220607203135751.png)</p>
</li>
<li><p>给动态导入的文件取名</p>
<ol>
<li><p>修改main.js</p>
<ul>
<li><pre><code class="javascript">document.getElementById(&quot;btn&quot;).onClick = function () &#123;
  // eslint会对动态导入语法报错，需要修改eslint配置文件
  // webpackChunkName: &quot;math&quot;：这是webpack动态导入模块命名的方式
  // &quot;math&quot;将来就会作为[name]的值显示。
  import(/* webpackChunkName: &quot;math&quot; */ &quot;./js/math.js&quot;).then((&#123; count &#125;) =&gt; &#123;
    console.log(count(2, 1));
  &#125;);
&#125;;
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> 下载包 `npm i eslint-plugin-import -D`</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 配置eslint</span><br><span class="line"></span><br><span class="line">   - ```javascript</span><br><span class="line">     <span class="comment">// .eslintrc.js</span></span><br><span class="line">     module.exports = &#123;</span><br><span class="line">       <span class="comment">// 继承 Eslint 规则</span></span><br><span class="line"><span class="symbol">       extends:</span> [<span class="string">&quot;eslint:recommended&quot;</span>],</span><br><span class="line"><span class="symbol">       env:</span> &#123;</span><br><span class="line"><span class="symbol">         node:</span> true, <span class="comment">// 启用node中全局变量</span></span><br><span class="line"><span class="symbol">         browser:</span> true, <span class="comment">// 启用浏览器中全局变量</span></span><br><span class="line">       &#125;,</span><br><span class="line"><span class="symbol">       plugins:</span> [<span class="string">&quot;import&quot;</span>], <span class="comment">// 解决动态导入import语法报错问题 --&gt; 实际使用eslint-plugin-import的规则解决的</span></span><br><span class="line"><span class="symbol">       parserOptions:</span> &#123;</span><br><span class="line"><span class="symbol">         ecmaVersion:</span> <span class="number">6</span>,</span><br><span class="line"><span class="symbol">         sourceType:</span> <span class="string">&quot;module&quot;</span>,</span><br><span class="line">       &#125;,</span><br><span class="line"><span class="symbol">       rules:</span> &#123;</span><br><span class="line">         <span class="string">&quot;no-var&quot;</span>: <span class="number">2</span>, <span class="comment">// 不能使用 var 定义变量</span></span><br><span class="line">       &#125;,</span><br><span class="line">     &#125;;</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>配置webpack，统一命名</p>
<ul>
<li><pre><code class="javascript">filename: &quot;static/js/[name].js&quot;, // 入口文件打包输出资源命名方式
    chunkFilename: &quot;static/js/[name].chunk.js&quot;, // 动态导入输出资源命名方式
    assetModuleFilename: &quot;static/media/[name].[hash][ext]&quot;, // 图片、字体等资源命名方式（注意用hash）
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">            -</span> ![<span class="string">image-20220608111206852</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608111206852.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="bullet">            -</span> ![<span class="string">image-20220608111226416</span>](<span class="link">https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608111226416.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="section">### preload/prefetch</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 之前做了代码分割后实现了按需加载（也就是懒加载）</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 但是速度不够快，比如一个按钮用户点击了才加载资源，如果该资源非常大的话会有明显的卡顿现象</span><br><span class="line"><span class="bullet">   2.</span> 因此我们想在浏览器空闲的时候加载后续需要使用的资源（预加载）</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="code">`Preload`</span>：告诉浏览器立即加载资源。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> <span class="code">`Prefetch`</span>：告诉浏览器在空闲时才开始加载资源。</span><br><span class="line"></span><br><span class="line"><span class="bullet">4.</span> <span class="code">`Preload`</span> 与 <span class="code">`Prefetch`</span> 共同点</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 只加载资源，并不执行</span><br><span class="line"><span class="bullet">   2.</span> 都有缓存</span><br><span class="line"></span><br><span class="line"><span class="bullet">5.</span> <span class="code">`Preload`</span> 与 <span class="code">`Prefetch`</span> 区别</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> <span class="code">`Preload`</span>加载优先级高，<span class="code">`Prefetch`</span>加载优先级低。</span><br><span class="line"><span class="bullet">   2.</span> <span class="code">`preload`</span>只加载当前页面需要使用的资源，<span class="code">`prefetch`</span>可以加载当前页面需要使用的资源，也可以加载下一个页面需要使用的资源</span><br><span class="line"></span><br><span class="line"><span class="bullet">6.</span> 兼容性比较差，<span class="code">`preload`</span>兼容性要高一点</span><br><span class="line"></span><br><span class="line"><span class="bullet">7.</span> 配置</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @vue/preload-webpack-plugin -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">      // css压缩</span></span><br><span class="line"><span class="code">          // new CssMinimizerPlugin(),</span></span><br><span class="line"><span class="code">          new PreloadWebpackPlugin(&#123;</span></span><br><span class="line"><span class="code">            rel: &quot;preload&quot;, // preload兼容性更好</span></span><br><span class="line"><span class="code">            as: &quot;script&quot;,</span></span><br><span class="line"><span class="code">            // rel: &#x27;prefetch&#x27; // prefetch兼容性更差</span></span><br><span class="line"><span class="code">          &#125;),</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608114848178.png" alt="image-20220608114848178"></p>
</li>
</ol>
</li>
</ol>
<h3 id="network-cache"><a href="#network-cache" class="headerlink" title="network cache"></a>network cache</h3><ol>
<li><p>对静态资源使用缓存来优化，浏览器再二次请求直接读取缓存，速度更快</p>
</li>
<li><p>回出现一个问题：前后输出的文件名都是一样的，发布新版本浏览器会读取缓存，不会加载新资源</p>
<ol>
<li>我们要从文件名入手，确保更新后的文件名与之前不一样</li>
</ol>
</li>
<li><p>使用hash</p>
<ul>
<li><p>fullhash（webpack4 是 hash）每次修改任何一个文件，所有文件名的 hash 至都将改变。所以一旦修改了任何一个文件，整个项目的文件缓存都将失效。</p>
</li>
<li><p>chunkhash 根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们 js 和 css 是同一个引入，会共享一个 hash 值。</p>
</li>
<li><p>contenthash 根据文件内容生成 hash 值，只有文件内容变化了，hash 值才会变化。所有文件 hash 值是独享且不同的。</p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608120638753.png" alt="image-20220608120638753"></p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608120658005.png" alt="image-20220608120658005"></p>
</li>
</ul>
</li>
<li><p>出现问题：只修改了一个文件，但是main.js的hash也发生了变化，缓存失效</p>
<ol>
<li><p>原因：引用的文件发生变化，导致main.js的content也发生了变化，最终main.js生成新的hash，是我们不希望看到的</p>
</li>
<li><p>解决</p>
<ol>
<li><p>将hash值单独保存在runtime文件中</p>
</li>
<li><p>runtime 文件只保存文件的 hash 值和它们与文件关系，整个文件体积就比较小，所以变化重新请求的代价也小。</p>
</li>
<li><pre><code class="javascript">    // 提取runtime文件
    runtimeChunk: &#123;
      name: (entrypoint) =&gt; `runtime~$&#123;entrypoint.name&#125;`, // runtime文件命名规则
    &#125;,
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">### core-js</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> babel已经对js代码进行了一定的兼容性处理，我们使用 @babel/preset-env 智能预设来处理兼容性</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 但是es6有些语法并没有编译转换，比如箭头函数，promise， async等</span><br><span class="line"><span class="bullet">   2.</span> 所以还是存在一定的兼容性问题，遇到低版本浏览器可能出现报错</span><br><span class="line"></span><br><span class="line"><span class="bullet">2.</span> <span class="code">`core-js`</span> 是专门用来做 ES6 以及以上 API 的 <span class="code">`polyfill`</span>。</span><br><span class="line"></span><br><span class="line"><span class="bullet">3.</span> 配置webpack</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1.</span> 下载包 <span class="code">`npm i @babel/eslint-parser -D`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   2.</span> 下载包 <span class="code">`npm i core-js`</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">   3.</span> 可以手动全部引入和手动按需引入（体积大/麻烦）</span><br><span class="line"></span><br><span class="line"><span class="bullet">      1.</span> <span class="code">```javascript</span></span><br><span class="line"><span class="code">         import &quot;core-js&quot;;</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><pre><code class="javascript">import &quot;core-js/es/promise&quot;;
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4.</span> 配置自动按需引入</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> 配置babel.config.js</span><br><span class="line"></span><br><span class="line">   <span class="number">2.</span> ```javascript</span><br><span class="line">      module.exports = &#123;</span><br><span class="line">        <span class="comment">// 智能预设：能够编译ES6语法</span></span><br><span class="line">        <span class="symbol">presets:</span> [</span><br><span class="line">          [</span><br><span class="line">            <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">            <span class="comment">// 按需加载core-js的polyfill</span></span><br><span class="line">            &#123; <span class="attr">useBuiltIns:</span> <span class="string">&quot;usage&quot;</span>, <span class="attr">corejs:</span> &#123; <span class="attr">version:</span> <span class="string">&quot;3&quot;</span>, <span class="attr">proposals:</span> <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">          ],</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="pwa"><a href="#pwa" class="headerlink" title="pwa"></a>pwa</h3><ol>
<li><p>希望提供离线服务</p>
</li>
<li><p>配置webpack</p>
<ol>
<li><p>下载包 <code>npm i workbox-webpack-plugin -D</code></p>
</li>
<li><p>修改webpack.config.js</p>
<ol>
<li><pre><code class="javascript">const WorkboxPlugin = require(&quot;workbox-webpack-plugin&quot;);
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span><span class="string">.</span> <span class="string">```javascript</span></span><br><span class="line">   <span class="string">new</span> <span class="string">WorkboxPlugin.GenerateSW(&#123;</span></span><br><span class="line">         <span class="string">//</span> <span class="string">这些选项帮助快速启用</span> <span class="string">ServiceWorkers</span></span><br><span class="line">         <span class="string">//</span> <span class="string">不允许遗留任何“旧的”</span> <span class="string">ServiceWorkers</span></span><br><span class="line">         <span class="attr">clientsClaim:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">         <span class="attr">skipWaiting:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">       <span class="string">&#125;),</span></span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220608122751327.png" alt="image-20220608122751327"></p>
</li>
</ol>
</li>
<li><p>修改main.js</p>
<ul>
<li><pre><code class="javascript">if (&quot;serviceWorker&quot; in navigator) &#123;
  window.addEventListener(&quot;load&quot;, () =&gt; &#123;
    navigator.serviceWorker
      .register(&quot;/service-worker.js&quot;)
      .then((registration) =&gt; &#123;
        console.log(&quot;SW registered: &quot;, registration);
      &#125;)
      .catch((registrationError) =&gt; &#123;
        console.log(&quot;SW registration failed: &quot;, registrationError);
      &#125;);
  &#125;);
&#125;</code></pre>
</li>
</ul>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 箭头函数</title>
    <url>/2021/07/16/JavaScript%20%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h1 id="JavaScript-箭头函数"><a href="#JavaScript-箭头函数" class="headerlink" title="JavaScript 箭头函数"></a>JavaScript 箭头函数</h1><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>ES6 中箭头函数的基本语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value</span>) =&gt;</span> value;</span><br></pre></td></tr></table></figure>

<p>相当于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p>如果需要传入多个参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> value * num;</span><br></pre></td></tr></table></figure>

<p>上面箭头函数例子中都省略了<code>return</code>关键字和代码的花括号，在箭头函数中如果方法体中只有一行代码，可以省略关键字和方法体的花括号，直接简化成<code>value =&gt; value</code>。</p>
<p>如果函数的代码块需要有多条语句：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value * num;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果需要返回一个对象，箭头函数的方法体必须放在大括号<code>()</code>中，这样做的原因是：没有大括号，JS 引擎没办分区分是正常定义一个对象还是一个箭头函数体:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> (&#123; <span class="attr">value</span>: value, <span class="attr">num</span>: num &#125;); <span class="comment">//正确写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> func = <span class="function">(<span class="params">value, num</span>) =&gt;</span> &#123; <span class="attr">value</span>: value, <span class="attr">num</span>: num &#125;; <span class="comment">//会报错</span></span><br></pre></td></tr></table></figure>

<h2 id="与普通函数的区别"><a href="#与普通函数的区别" class="headerlink" title="与普通函数的区别"></a>与普通函数的区别</h2><h3 id="1-没有-this"><a href="#1-没有-this" class="headerlink" title="1.没有 this"></a>1.没有 this</h3><p>箭头函数式的 this 需要通过查找作用域链来确定，它的 this 是指包在它外面的作用域的 this，我们来看下以下代码中的 this 分别指的是什么：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// obj</span></span><br><span class="line">  &#125;,</span><br><span class="line">  b: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// windows</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>obj.b 是一个箭头函数，它的 this 是包在它外层的词法作用域的 this（离它最近的词法作用域），obj 对象不是可执行代码，所以它不是离箭头函数最近的词法作用域，再往外就是全局作用域 window 了，所以 obj.b 的 this 指的是 windows。</p>
<p>再来看一段代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line"></span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething(event.type); <span class="comment">// error</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling &quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在调用<code>pageHandler.init</code>方法的时候会报错，报错的函数是个回调函数，这个回调函数的 this 指的全局变量 windows，在全局变量里没有 doSomething 这个方法，所以会报错。那么怎么才能让它不报错呢？</p>
<p>第一种方式是通过 bind 来指定 this：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething(event.type);</span><br><span class="line">      &#125;.bind(<span class="built_in">this</span>),</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling&quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>.bind(this)中的 this 是指 pageHandler 这个对象，通过 bind 生成一个 this 指向 pageHandler 的新函数，这样执行 init 方法的时候不会报错，看起来怪怪的有没有。</p>
<p>第二种方式是通过箭头函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pageHandler = &#123;</span><br><span class="line">  id: <span class="string">&quot;12345&quot;</span>,</span><br><span class="line">  init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(</span><br><span class="line">      <span class="string">&quot;click&quot;</span>,</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        <span class="built_in">this</span>.doSomething();</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">false</span></span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">  doSomething: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Handling&quot;</span> + type + <span class="string">&quot; for &quot;</span> + <span class="built_in">this</span>.id);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>把 init 中的回调函数改成了箭头函数，箭头函数的 this 是它最近的作用域链上的 this，也就是 init 这个方法的 this，也就是 pageHandler 这个对象，这样就可以达到目的不报错啦。</p>
<p><strong>需要注意的是，箭头函数不能改变 this 的值，普通函数可以通过 call、apply、bind 来指定 this，但是箭头函数的 this 是不能改的。</strong></p>
<h3 id="2-没有-arguments"><a href="#2-没有-arguments" class="headerlink" title="2.没有 arguments"></a>2.没有 arguments</h3><p>访问箭头函数的 arguments，其实也是访问包在它外面的非箭头函数的 arguments。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo(<span class="number">1</span>, <span class="number">2</span>)()); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<h3 id="3-不能通过-new-关键字调用。"><a href="#3-不能通过-new-关键字调用。" class="headerlink" title="3.不能通过 new 关键字调用。"></a>3.不能通过 new 关键字调用。</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> Foo = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo(); <span class="comment">// TypeError: Foo is not a constructor</span></span><br></pre></td></tr></table></figure>

<h3 id="4-没有原型"><a href="#4-没有原型" class="headerlink" title="4.没有原型"></a>4.没有原型</h3><p>没有<code>prototype</code>, 但是有<code>__proto__</code>指向 function。</p>
<h3 id="5-没有-super，也是通过包在它外面的非箭头函数来决定的。"><a href="#5-没有-super，也是通过包在它外面的非箭头函数来决定的。" class="headerlink" title="5.没有 super，也是通过包在它外面的非箭头函数来决定的。"></a>5.没有 super，也是通过包在它外面的非箭头函数来决定的。</h3>]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript let和const</title>
    <url>/2021/07/16/JavaScript%20let%E5%92%8Cconst/</url>
    <content><![CDATA[<h1 id="JavaScript-let-和-const"><a href="#JavaScript-let-和-const" class="headerlink" title="JavaScript let 和 const"></a>JavaScript let 和 const</h1><p>在 JS 中用 var 声明变量存在变量提升，比如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<p>这段代码输出的是 undefined，而不是 ReferenceError。这是因为 var 有变量提升，实际这段代码相当于：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<p>还有在 for 循环中：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">//5</span></span><br></pre></td></tr></table></figure>

<p>数组里输出的值都是 5，并且 for 循环结束了，还是可以访问 i 的值。在 ES6 之前，是没有块级作用域，在 ES6 中引入了块级作用域，块级作用域是指：</p>
<ul>
<li>函数内部</li>
<li>块中(字符 { 和 } 之间的区域)</li>
</ul>
<h2 id="let-和-const"><a href="#let-和-const" class="headerlink" title="let 和 const"></a>let 和 const</h2><p>let 和 const 是用来声明块级作用域变量，它们有以下特性：</p>
<h3 id="1-不会被提升"><a href="#1-不会被提升" class="headerlink" title="1. 不会被提升"></a>1. 不会被提升</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//Uncaught ReferenceError: a is not defined</span></span><br></pre></td></tr></table></figure>

<h3 id="2-重复声明会报错"><a href="#2-重复声明会报错" class="headerlink" title="2. 重复声明会报错"></a>2. 重复声明会报错</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">2</span>; <span class="comment">//Uncaught SyntaxError: Identifier &#x27;a&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>

<h3 id="3-不绑定全局作用域"><a href="#3-不绑定全局作用域" class="headerlink" title="3. 不绑定全局作用域"></a>3. 不绑定全局作用域</h3><p>在全局作用就里使用<code>var</code>声明变量或者 <code>function</code>(只用这两种形式)，这个变量会作为全局对象的属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>

<p>但是用 let 和 const 不会：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.b); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="let-和-const-的区别"><a href="#let-和-const-的区别" class="headerlink" title="let 和 const 的区别"></a>let 和 const 的区别</h3><p>const 用来声明常量，一旦初始化，就不能再被修改，否则会报错。<br>但是对于 const 声明的对象，对象的引用不能被修改，但是对象里的属性值是可以被修改的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">data.a = <span class="number">2</span>; <span class="comment">//可以被修改</span></span><br><span class="line">data.b = <span class="number">3</span>; <span class="comment">//会加一个属性b</span></span><br><span class="line"></span><br><span class="line">data = &#123;&#125;; <span class="comment">//报错：Uncaught TypeError: Assignment to constant variable</span></span><br></pre></td></tr></table></figure>

<h3 id="暂时性死区-Temporal-Dead-Zone"><a href="#暂时性死区-Temporal-Dead-Zone" class="headerlink" title="暂时性死区(Temporal Dead Zone)"></a>暂时性死区(Temporal Dead Zone)</h3><p>在 JS 引擎扫描代码发现变量声明时，遇到 var 声明就提升到作用域顶部，遇到 let 和 const 就把这些声明放在暂时性死区。对于 let 和 const 变量，如果在执行它们的声明语句之前访问会报错，只有执行完声明语句之后才会从暂时性死区移出。</p>
<blockquote>
<p>
The time between entering the scope of a variable and executing its declaration is called the temporal dead zone (TDZ) of that variable.
</p>
<p>
During this time, the variable is considered to be uninitialized (as if that were a special value it has).
</p>
<p>
If you access an uninitialized variable, you get a ReferenceError.
</p>
<p>
Once you reach a variable declaration, the variable is set to either the value of the initializer (specified via the assignment symbol) or undefined – if there is no initializer.
</p>
</blockquote>

<p>需要注意的是 let const 会变量提升，但是在执行声明语句之前，是放在暂时性死区，提前调用就会报错；想象一下如果 let const 没有变量提升的话，在声明之前调用 let const 变量，就会当成<code>var = halo</code>处理了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saySomething</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  greeting = <span class="string">&quot;halo&quot;</span>; <span class="comment">// Uncaught ReferenceError: Cannot access &#x27;greeting&#x27; before initialization</span></span><br><span class="line">  <span class="keyword">let</span> greeting;</span><br><span class="line">  <span class="built_in">console</span>.log(greeting);</span><br><span class="line">&#125;</span><br><span class="line">saySomething();</span><br></pre></td></tr></table></figure>

<h3 id="循环中的块级作用域"><a href="#循环中的块级作用域" class="headerlink" title="循环中的块级作用域"></a>循环中的块级作用域</h3><p>之前有代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//5</span></span><br></pre></td></tr></table></figure>

<p>我们实际想要的输出 0 1 2 3 4，解决方案有：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;)(i)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//4</span></span><br></pre></td></tr></table></figure>

<p>还可以用 ES6 中的 let：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">0</span>]()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">1</span>]()); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">2</span>]()); <span class="comment">//2</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">3</span>]()); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(result[<span class="number">4</span>]()); <span class="comment">//4</span></span><br></pre></td></tr></table></figure>

<p>之前说过，let 不提升，不能重复定义，在第二次循环的时候，又用 let 声明了 i，为什么在这里不报错，可以正确输出值呢？<br>比如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里会输出三个 abc，但是用 var：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只会输出一个 abc。</p>
<p>JS 引擎对 var 和 let 使用了不同的方式处理，对于 let 每次循环都会创建一个新变量，对于代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  result.push(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实际相当于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">let</span> i = <span class="number">0</span>) &#123;</span><br><span class="line">    result[<span class="number">0</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">0</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">1</span>) &#123;</span><br><span class="line">    result[<span class="number">1</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">1</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">2</span>) &#123;</span><br><span class="line">    result[<span class="number">2</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">2</span>) &#125;;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line">......</span><br><span class="line">(<span class="keyword">let</span> i = <span class="number">4</span>) &#123;</span><br><span class="line">    result[<span class="number">4</span>]= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="number">4</span>) &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是在上面代码里不能用 const，虽然我们每次创建了一个新的变量，但是我们尝试修改 const 的值，所以会报错</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>在开发过程中，默认推荐使用 const，只有当确定变量的值会发生改变使用 let</li>
<li>函数提升优先于变量提升，函数提升会把整个函数挪到作用域顶部，变量提升只会把声明挪到作用域顶部</li>
<li>var 存在提升，我们能在声明之前使用。let、const 因为暂时性死区的原因，不能在声明前使用</li>
<li>var 在全局作用域下声明变量会导致变量挂载在 window 上，其他两者不会</li>
<li>let 和 const 作用基本一致，但是后者声明的变量不能再次赋值</li>
<li>只有 var 函数 有变量提升，其他的 class let const import 都没有变量提升， 如果函数表达式是 let const 也不会变量提升</li>
</ul>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 深浅拷贝</title>
    <url>/2021/07/17/JavaScript%20%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<h1 id="JavaScript-深浅拷贝"><a href="#JavaScript-深浅拷贝" class="headerlink" title="JavaScript 深浅拷贝"></a>JavaScript 深浅拷贝</h1><p>我们先来看下数组的拷贝，通常我们会用<code>slice()</code> <code>concat()</code>方法实现数组拷贝：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr1 = arr.concat();</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.slice();</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<span id="more"></span>

<p><code>slice()</code> <code>concat()</code>都是返回了一个新数组，没有改变原来的数组，看起来像是深拷贝。</p>
<p>我们再来看一个例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr1 = arr.concat();</span><br><span class="line"><span class="keyword">var</span> arr2 = arr.slice();</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//[1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br></pre></td></tr></table></figure>

<p>这边可以看到，如果数组里有对象，那么不会拷贝对象的值，而是拷贝对象的引用，原来数据对象的值发生改变，由于拷贝的是对象的引用，新拷贝的数组中对象的值也发生改变，拷贝的不是很彻底，<code>slice()</code> <code>concat()</code>是<strong>浅拷贝</strong>，对于对象，我们通常通过<code>assign()</code>或者展开运算符<code>...</code>来实现拷贝，同样如果对象里嵌套了对象，也只能实现浅拷贝：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;fuck&quot;</span>,</span><br><span class="line">  address: &#123; <span class="attr">city</span>: <span class="string">&quot;shanghai&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj);</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; ...obj &#125;;</span><br><span class="line">obj.address.city = <span class="string">&quot;beijing&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;beijing&quot;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;beijing&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="利用-JSON-stringify-实现对数组和对象的深拷贝"><a href="#利用-JSON-stringify-实现对数组和对象的深拷贝" class="headerlink" title="利用 JSON.stringify 实现对数组和对象的深拷贝"></a>利用 JSON.stringify 实现对数组和对象的深拷贝</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr1 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(arr));</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//[1, 2, 3, 4, &#123; value: 5 &#125;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">&quot;fuck&quot;</span>,</span><br><span class="line">  address: &#123; <span class="attr">city</span>: <span class="string">&quot;shanghai&quot;</span> &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj1 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br><span class="line">obj.address.city = <span class="string">&quot;beijing&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1); <span class="comment">//&#123;name: &quot;fuck&quot;, address:&#123;city: &quot;shanghai&quot;&#125;</span></span><br></pre></td></tr></table></figure>

<p>该方法不能对<code>undefined</code> <code>symbol</code> <code>函数</code> 进行深度拷贝。</p>
<h2 id="利用递归实现数组和对象深拷贝"><a href="#利用递归实现数组和对象深拷贝" class="headerlink" title="利用递归实现数组和对象深拷贝"></a>利用递归实现数组和对象深拷贝</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> newObj = obj <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] =</span><br><span class="line">        <span class="keyword">typeof</span> obj[key] === <span class="string">&quot;object&quot;</span> ? deepCopy(obj[key]) : obj[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们来验证下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr2 = deepCopy(arr);</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//1, 2, 3, 4, &#123; value: 5 &#125;]</span></span><br></pre></td></tr></table></figure>

<p>对于数组和对象的浅拷贝，去掉递归就可以了：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shallowCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> newObj = obj <span class="keyword">instanceof</span> <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">      newObj[key] = obj[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>验证一下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, &#123; <span class="attr">value</span>: <span class="number">5</span> &#125;];</span><br><span class="line"><span class="keyword">var</span> arr2 = shallowCopy(arr);</span><br><span class="line">arr[<span class="number">4</span>].value = <span class="number">6</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//1, 2, 3, 4, &#123; value: 6 &#125;]</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 详解Event Loop运行机制</title>
    <url>/2021/10/08/JavaScript%20%E8%AF%A6%E8%A7%A3Event-Loop%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<h1 id="JavaScript-详解-Event-Loop-运行机制"><a href="#JavaScript-详解-Event-Loop-运行机制" class="headerlink" title="JavaScript 详解 Event Loop 运行机制"></a>JavaScript 详解 Event Loop 运行机制</h1><p>在这篇文章中会介绍以下内容：</p>
<ul>
<li><p>engine runtime 和 call stack 简介（以 V8 引擎为例）</p>
</li>
<li><p>Event Loop 运行机制的详解</p>
</li>
<li><p>microtasks 和 macrotask 的执行顺序</p>
</li>
</ul>
<h2 id="engine-runtime-和-call-stack-简介"><a href="#engine-runtime-和-call-stack-简介" class="headerlink" title="engine runtime 和 call stack 简介"></a>engine runtime 和 call stack 简介</h2><p>在 chrome 浏览器和 nodejs 里都是用 V8 引擎解析和运行 JS 代码，我们先来看下 V8 引擎的简化图：</p>
<span id="more"></span>

<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop01-20220728111457618.png" alt="js-eventloop01"></p>
<p>上图中 Heap 是用来做内存分配，<code>Call Stack</code>是用来执行 JS 代码，由于 JS 是单线程所以只有一个<code>Call Stack</code>。实际我们写网页开发的时候，除了一些 JS 代码，我们还会大量用到：DOM 事件、AJAX(XMLHttpRequest)、setTimeout 等等一些异步事件。从上图可以看出，这些异步事件都没有在 V8 引擎里，事实上这些异步事件不属于 V8 引擎，而是属于浏览器，并且 DOM 事件、AJAX(XMLHttpRequest)、setTimeout 都分别有单独的线程来处理。由于<code>Call Stack</code>执行（JS 运行线程）和页面渲染线程是互斥的，如果所有的事情都由 V8 引擎处理，这样肯定会导致页面卡顿。</p>
<p>浏览器多线程和 callback 机制完美避免了页面卡顿的问题。DOM 事件、AJAX(XMLHttpRequest)、setTimeout 这些异步事件在各自单独的线程处理完以后，每个异步事件都有 callback 回调函数，V8 引擎再把这些回调函数放在<code>Call Stack</code>执行。上述整个运行机制可以称为是 runtime，可以简化如下图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop02.png" alt="js-eventloop02"></p>
<p>如上图所示，web 异步事件结束以后，会有 callback，然后 runtime 把这些 callback 事件放到<code>Callback Queue</code>里，一旦<code>Call Stack</code>所有的方法都执行完以后，<code>Event Loop</code>会依次把 <code>Callback Queue</code>里的回调函数放到<code>Call Stack</code>里执行。</p>
<h2 id="Event-Loop-运行机制的详解"><a href="#Event-Loop-运行机制的详解" class="headerlink" title="Event Loop 运行机制的详解"></a>Event Loop 运行机制的详解</h2><p>Event Loop 实际上就是一个 job，用来检测 Call Stack 和 Callback Queue，一旦 Call Stack 里代码执行完以后，就会把 Callback Queue 里第一个 callback 函数放到 Call Stack 里执行。我们来看个例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>运行运行结果如下:</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">script</span> start</span><br><span class="line"><span class="keyword">script</span> <span class="keyword">end</span></span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure>

<p>我们具体一步一步看下整个流程：</p>
<p>1，代码没有运行之前，<code>Call Stack</code> <code>Callback Queue</code>都是空的</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop03.png" alt="js-eventloop03"></p>
<p>2，把<code>console.log(&#39;script start&#39;)</code>加到 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop04.png" alt="js-eventloop04"></p>
<p>3，执行<code>console.log(&#39;script start&#39;)</code>，在 console 里打印出<code>script start</code>，执行结束后把它移出 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop05.png" alt="js-eventloop05"></p>
<p>4，把 setTimeout 放到 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop06.png" alt="js-eventloop06"></p>
<p>5, 执行 setTimeout，用 setTimout 线程执行 timeout 时间，Call Stack 中 setTimeout 执行结束，把它移出 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop07.png" alt="js-eventloop07"></p>
<p>6, 把<code>console.log(&#39;script end&#39;)</code>加到 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop08.png" alt="js-eventloop08"></p>
<p>7，执行<code>console.log(&#39;script end&#39;)</code>，在 console 里打印出<code>script end</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop09.png" alt="js-eventloop09"></p>
<p>8，<code>console.log(&#39;script end&#39;)</code>执行结束，把它移出 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop10.png" alt="js-eventloop10"></p>
<p>9，1000 毫秒以后，计时结束，把 callback<code>cb1</code>函数放到 Callback Queue 里</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop11.png" alt="js-eventloop11"></p>
<p>10，此时 Callback Stack 是空的，Event Loop 把 cb1 拿到 Callback Stack 里</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop12.png" alt="js-eventloop12"></p>
<p>11，执行 cb1，cb1 里有<code>console.log(&#39;setTimeout&#39;)</code>，把<code>console.log(&#39;setTimeout&#39;)</code>放到 Call Stack 里</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop13.png" alt="js-eventloop13"></p>
<p>12，执行<code>console.log(&#39;setTimeout&#39;)</code>，在 console 里打印出<code>setTimeout</code>，<code>console.log(&#39;setTimeout&#39;)</code>执行结束，把它移出 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop14.png" alt="js-eventloop14"></p>
<p>13，<code>cb1</code>执行结束，把它移出 Call Stack</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop15.png" alt="js-eventloop15"></p>
<p>总结来说就是，JS 是单线程的，只有一个 Call Stack，浏览器是多线程的，并且 DOM 事件、AJAX(XMLHttpRequest)、setTimeout 都是有单独的线程处理。在这些异步事件结束，runtime 会把它们的 callback 按顺序放到 Callback Queue 里，Event Loop 会检测 Call Stack，一旦它为空，就会把 Callback Queue 里的回调函数依次放到 Call Stack 里执行，直到 Callback Queue 为空。</p>
<h2 id="microtasks-和-macrotask-的执行顺序"><a href="#microtasks-和-macrotask-的执行顺序" class="headerlink" title="microtasks 和 macrotask 的执行顺序"></a>microtasks 和 macrotask 的执行顺序</h2><p>刚才用 setTimeout 为例，解释了 JS 中 Event Loop 机制是怎么运行的，也提到过 runtime 会把回调函数依次按时间先后顺序放到 Callback Queue 里，然后 Event Loop 再依次把这些回调函数放到 Call Stack 里运行。我们在浏览器 Console 运行以下代码，看下结果：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve()</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>执行结果如下：</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">script</span> start</span><br><span class="line"><span class="keyword">script</span> <span class="keyword">end</span></span><br><span class="line">promise1</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure>

<blockquote>
<p>
上述代码虽然 setTimeout 延时为0，其实还是异步的。因为H5标准规定 setTimeout 函数的第二个参数不能小于4毫秒，不足会自动增加。
</p>
</blockquote>

<p>setTimeout 和 promise 都是异步事件，而且 setTimeout 写在 promise 之前，为什么 setTimeout 的回调要比 promise 后执行呢？那是因为 promise 属于微任务（microtasks）而 setTimeout 属于宏任务（macrotask），微任务（microtasks）的优先级要高于宏任务（macrotask）。</p>
<p>首先我们需要明白以下几件事情：</p>
<ul>
<li>JS 分为同步任务和异步任务</li>
<li>同步任务都在主线程上执行，形成一个执行栈</li>
<li>主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。</li>
<li>一旦执行栈中的所有同步任务执行完毕（此时 JS 引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。</li>
</ul>
<p>根据规范，事件循环是通过任务队列的机制来进行协调的。一个 Event Loop 中，可以有一个或者多个任务队列(task queue)，一个任务队列便是一系列有序任务(task)的集合；每个任务都有一个任务源(task source)，源自同一个任务源的 task 必须放到同一个任务队列，从不同源来的则被添加到不同队列。 setTimeout/Promise 等 API 便是任务源，而进入任务队列的是他们指定的具体执行任务。</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop16.png" alt="js-eventloop16"></p>
<p>Callback Queue（Task Queue）里的回调事件称为宏任务（macrotask），每次异步事件结束后，它们的回调函数会依次按时间顺序放在 Callback Queue 里，等待 Event Loop 依次把它们放到 Call Stack 里执行。比如：<code>setInterval</code> <code>setTimeout</code> <code>script</code> <code>setImmediate</code> <code>I/O</code> <code>UI rendering</code>就是宏任务（macrotask）。</p>
<p>微任务（microtasks）是指异步事件结束后，回调函数不会放到 Callback Queue，而是放到一个微任务队列里（Microtasks Queue），在 Call Stack 为空时，Event Loop 会先查看微任务队列里是否有任务，如果有就会先执行微任务队列里的回调事件；如果没有微任务，才会到 Callback Queue 执行回到事件。比如：<code>promise</code> <code>process.netTick</code> <code>Object.observe</code> <code>MutationObserver</code>就是微任务（microtasks）。</p>
<blockquote>
<p>
在 ES6 规范中，microtask 称为 jobs，macrotask 称为 task。
</p>
</blockquote>

<p>整个 Event Loop 的执行顺序如下：</p>
<ul>
<li>执行一个宏任务（栈中没有就从事件队列中获取）</li>
<li>执行过程中如果遇到微任务，就将它添加到微任务的任务队列中</li>
<li>宏任务执行完毕后，立即执行当前微任务队列中的所有微任务（依次执行）</li>
<li>当前宏任务执行完毕，开始检查渲染，然后 GUI 线程接管渲染</li>
<li>渲染完毕后，JS 线程继续接管，开始下一个宏任务（从事件队列中获取，也就是 callbacke queue）</li>
</ul>
<p>流程图如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-eventloop17.jpg" alt="js-eventloop17"></p>
<p>我们再把代码改一下，在创建 promise 的时候，加一行<code>console.log(&#39;Promise&#39;)</code>，而且在第一个 promise resolve 的时候再加一个 setTimeout，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Promise&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout in promise1&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">Promise</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">setTimeout in promise1</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p><code>console.log(&#39;Promise&#39;)</code>在这里是同步代码，<code>console.log(&#39;script end&#39;)</code>是同步代码且放在最后，所以<code>Promise</code>在<code>script end</code>前面，而且在微任务（microtasks）里有宏任务（macrotask），macrotask 还是会依次被放到 Callback Queue 等待执行。</p>
<p>如果有 async await 呢？再来看一段代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//请写出输出内容</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">async2</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">async1 end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p>我们知道 Promise 中的异步体现在 then 和 catch 中，所以写在 Promise 中的代码是被当做同步任务立即执行的。而在 async/await 中，在出现 await 出现之前，其中的代码也是立即执行的。那么出现了 await 时候发生了什么呢？</p>
<p>由于因为 async await 本身就是 promise+generator 的语法糖。所以 await 后面的代码是 microtask。所以对于上面代码中的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>等价于：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve(async2()).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们来看一个变式, 将 async2 中的函数也变成了 Promise 函数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//async2做出如下更改：</span></span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise3&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise4&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">promise3</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">async1 end</span></span><br><span class="line"><span class="comment">promise4</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p>我们再来看一个变式，将 async1 中 await 后面的代码和 async2 的代码都改为异步的，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;async1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> async2();</span><br><span class="line">  <span class="comment">//更改如下：</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//更改如下：</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout3&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">async1 start</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">setTimeout3</span></span><br><span class="line"><span class="comment">setTimeout2</span></span><br><span class="line"><span class="comment">setTimeout1</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p>我们再来看一个变式，代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">a1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a1 start&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> a2();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a1 end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">a2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;a2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;setTimeout&quot;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">a1();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&quot;promise2.then&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;promise2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise2.then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise3&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;script end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">script start</span></span><br><span class="line"><span class="comment">a1 start</span></span><br><span class="line"><span class="comment">a2</span></span><br><span class="line"><span class="comment">promise2</span></span><br><span class="line"><span class="comment">script end</span></span><br><span class="line"><span class="comment">promise1</span></span><br><span class="line"><span class="comment">a1 end</span></span><br><span class="line"><span class="comment">promise2.then</span></span><br><span class="line"><span class="comment">promise3</span></span><br><span class="line"><span class="comment">setTimeout</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 核心基础知识点</title>
    <url>/2021/10/18/JavaScript%20%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<h1 id="JavaScript-核心基础知识点"><a href="#JavaScript-核心基础知识点" class="headerlink" title="JavaScript 核心基础知识点"></a>JavaScript 核心基础知识点</h1><h2 id="Primitive-values-vs-Objects"><a href="#Primitive-values-vs-Objects" class="headerlink" title="Primitive values vs. Objects"></a>Primitive values vs. Objects</h2><p>Primitive values 是指：undefined, null, boolean, number, bigint, string, symbol。除此之外的都是 Objects。</p>
<ul>
<li>Primitive values 是通过值传递的，两个 Primitive 比较的时候，是比较它们两个的值。</li>
<li>Objects 是通过引用传递，两个 Objects 比较的时候，是比较它们两个的引用。</li>
</ul>
<span id="more"></span>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;; <span class="comment">// fresh empty object</span></span><br><span class="line"><span class="comment">// Pass the identity in `a` to `b`:</span></span><br><span class="line"><span class="keyword">const</span> b = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Now `a` and `b` point to the same object</span></span><br><span class="line"><span class="comment">// (they “share” that object):</span></span><br><span class="line"><span class="built_in">console</span>.log(a === b); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Changing `a` also changes `b`:</span></span><br><span class="line">a.foo = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(b.foo); <span class="comment">// 123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;; <span class="comment">// fresh empty object</span></span><br><span class="line"><span class="built_in">console</span>.log(obj === obj); <span class="comment">// true // same reference</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; === &#123;&#125;); <span class="comment">//false // different references, same content</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Primitive 的属性是不可以改变的<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">str.length = <span class="number">1</span>; <span class="comment">// TypeError: cannot assign to read only property &#x27;length&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>Objects 属性是可以改变的</li>
</ul>
<h2 id="typeof-vs-instanceof"><a href="#typeof-vs-instanceof" class="headerlink" title="typeof vs. instanceof"></a>typeof vs. instanceof</h2><p>typeof 对于原始值类型来说，除了 null 都可以显示正确的类型：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">42</span>; <span class="comment">// &quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&quot;abc&quot;</span>; <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// &quot;boolean&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// &quot;undefined&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// &quot;object&quot; -- oops, JS bug!</span></span><br><span class="line"><span class="keyword">typeof</span> &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;; <span class="comment">// &quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// &quot;object&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="title">Hello</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// &quot;function&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>; <span class="comment">// &quot;symbol&quot;</span></span><br></pre></td></tr></table></figure>

<p>typeof 对于对象来说，除了函数，都会显示成 object：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// &#x27;object&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log; <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure>

<p>如果我们想要判断一个正确的对象类型，就需要用 instanceof，它的内部机制是通过原型链来判断的：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person();</span><br><span class="line">p1 <span class="keyword">instanceof</span> Person; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">str <span class="keyword">instanceof</span> <span class="built_in">String</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">str1 <span class="keyword">instanceof</span> <span class="built_in">String</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>
typeof 是用来判断 primitive values；instanceof 是用来判断 objects 
</p>
</blockquote>

<h3 id="instanceof-的原理"><a href="#instanceof-的原理" class="headerlink" title="instanceof 的原理"></a>instanceof 的原理</h3><p>instanceof 可以正确的判断对象的类型，因为内部机制是通过判断对象的原型链中是不是能找到类型的 prototype。</p>
<p>我们也可以试着实现一下 instanceof</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myInstanceof</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> prototype = right.prototype;</span><br><span class="line">  left = left.__proto__;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (left === <span class="literal">null</span> || left === <span class="literal">undefined</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (prototype === left) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    left = left.__proto__;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下是对实现的分析：</p>
<ul>
<li>首先获取类型的原型</li>
<li>然后获得对象的原型</li>
<li>然后一直循环判断对象的原型是否等于类型的原型，直到对象原型为 null，因为原型链最终为 null</li>
</ul>
<h2 id="vs"><a href="#vs" class="headerlink" title="== vs. ==="></a>== vs. ===</h2><p>对于 == 来说，如果对比双方的类型不一样的话，就会进行类型转换，这也就用到了我们上一章节讲的内容。</p>
<p>假如我们需要对比 x 和 y 是否相同，就会进行如下判断流程：</p>
<ul>
<li>首先会判断两者类型是否相同。相同的话就是比大小了</li>
<li>类型不相同的话，那么就会进行类型转换</li>
<li>会先判断是否在对比 null 和 undefined，是的话就会返回 true</li>
<li>判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span></span><br><span class="line">      ↓</span><br><span class="line"><span class="number">1</span> ==  <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span> == <span class="literal">true</span></span><br><span class="line">        ↓</span><br><span class="line"><span class="string">&#x27;1&#x27;</span> ==  <span class="number">1</span></span><br><span class="line">        ↓</span><br><span class="line"> <span class="number">1</span>  ==  <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;1&#x27;</span> == &#123; <span class="attr">name</span>: <span class="string">&#x27;yck&#x27;</span> &#125;</span><br><span class="line">        ↓</span><br><span class="line"><span class="string">&#x27;1&#x27;</span> == <span class="string">&#x27;[object Object]&#x27;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">undefined</span> == <span class="literal">null</span>; <span class="comment">// true</span></span><br><span class="line"><span class="literal">undefined</span> === <span class="literal">null</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>对于 === 来说就简单多了，就是判断两者类型和值是否相同。需要注意的是有两个特殊情况：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">// false</span></span><br><span class="line"><span class="number">0</span> === -<span class="number">0</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>对于<code>NaN</code>的比较，用<code>Number.isNaN()</code>；对于<code>-0</code>的比较，用<code>Object.is()</code>。</p>
<blockquote>
<p>
实际写代码的时候，建议用 === 
</p>
</blockquote>

<p>比 === 还要严格的是<code>Object.is()</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="number">123</span>, <span class="number">123</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="number">123</span>, <span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">&gt; <span class="literal">NaN</span> === <span class="literal">NaN</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="Symbols"><a href="#Symbols" class="headerlink" title="Symbols"></a>Symbols</h2><p>Symbols 是 Primitive values，用<code>Symbol();</code>来创建</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mySymbol = <span class="keyword">new</span> <span class="built_in">Symbol</span>(<span class="string">&quot;mySymbol&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>每个 Symbols 都是唯一的，并且不能通过值来比较：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">Symbol</span>() === <span class="built_in">Symbol</span>()</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>Symbols 通常有两种用法：</p>
<ul>
<li>用来定义常量</li>
<li>用来定义 Objects 里唯一的 property key</li>
</ul>
<h3 id="Symbols-通常用来定义常量的值"><a href="#Symbols-通常用来定义常量的值" class="headerlink" title="Symbols 通常用来定义常量的值"></a>Symbols 通常用来定义常量的值</h3><p>比如我们需要用常量聊表示颜色，通常我们会这么定义：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="string">&quot;Blue&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>如果我们不小心写错了，多加一个蓝色的常量：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> MOOD_BLUE = <span class="string">&quot;Blue&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>这个时候这两个常量就没办法区分了：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&gt; COLOR_BLUE === MOOD_BLUE <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>我们可以用 Symbol 来解决这个问题：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> MOOD_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(COLOR_BLUE === MOOD_BLUE); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> COLOR_RED = <span class="built_in">Symbol</span>(<span class="string">&quot;Red&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_ORANGE = <span class="built_in">Symbol</span>(<span class="string">&quot;Orange&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_YELLOW = <span class="built_in">Symbol</span>(<span class="string">&quot;Yellow&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_GREEN = <span class="built_in">Symbol</span>(<span class="string">&quot;Green&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_BLUE = <span class="built_in">Symbol</span>(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> COLOR_VIOLET = <span class="built_in">Symbol</span>(<span class="string">&quot;Violet&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getComplement</span>(<span class="params">color</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> COLOR_RED:</span><br><span class="line">      <span class="keyword">return</span> COLOR_GREEN;</span><br><span class="line">    <span class="keyword">case</span> COLOR_ORANGE:</span><br><span class="line">      <span class="keyword">return</span> COLOR_BLUE;</span><br><span class="line">    <span class="keyword">case</span> COLOR_YELLOW:</span><br><span class="line">      <span class="keyword">return</span> COLOR_VIOLET;</span><br><span class="line">    <span class="keyword">case</span> COLOR_GREEN:</span><br><span class="line">      <span class="keyword">return</span> COLOR_RED;</span><br><span class="line">    <span class="keyword">case</span> COLOR_BLUE:</span><br><span class="line">      <span class="keyword">return</span> COLOR_ORANGE;</span><br><span class="line">    <span class="keyword">case</span> COLOR_VIOLET:</span><br><span class="line">      <span class="keyword">return</span> COLOR_YELLOW;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Unknown color: &quot;</span> + color);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Symbols-用来定义-Objects-里唯一的-property-key"><a href="#Symbols-用来定义-Objects-里唯一的-property-key" class="headerlink" title="Symbols 用来定义 Objects 里唯一的 property key"></a>Symbols 用来定义 Objects 里唯一的 property key</h3><p>比如下面这个对象：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pt = &#123;</span><br><span class="line">  x: <span class="number">7</span>,</span><br><span class="line">  y: <span class="number">4</span>,</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`(<span class="subst">$&#123;<span class="built_in">this</span>.x&#125;</span>, <span class="subst">$&#123;<span class="built_in">this</span>.y&#125;</span>)`</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>其中 x 和 y 是<code>base level</code>的 key，<code>toString()</code>是<code>meta-level</code>的 key，这两种层次的 key 绝对不能定义成相同的名称，这个时候就可以用<code>Symbol</code>来定义对象的属性名称，因为<code>Symbol</code> 的值是唯一的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> specialMethod = <span class="built_in">Symbol</span>(<span class="string">&quot;specialMethod&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  _id: <span class="string">&quot;kf12oi&quot;</span>,</span><br><span class="line">  [specialMethod]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._id;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="undefined-vs-null"><a href="#undefined-vs-null" class="headerlink" title="undefined vs. null"></a>undefined vs. null</h2><ul>
<li><p>undefined 是指声明但是未被初始化的值，它有以下使用场景：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar1; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> myVar2; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;&#125;; <span class="comment">// property .unknowProp is also undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// function with no return statment, is also return undefined</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>null 是指故意赋值为 null，有目的使值为 null，它有以下使用场景：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(<span class="built_in">Object</span>.prototype); <span class="comment">// 对于对象的 protptype 要不为对象，要不就是null</span></span><br><span class="line"></span><br><span class="line">/a/.exec(<span class="string">&quot;x&quot;</span>); <span class="comment">// 对于正则表达式，如果没有匹配那就是null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="literal">undefined</span>, <span class="attr">b</span>: <span class="literal">null</span> &#125;); <span class="comment">//&#x27;&#123;&quot;b&quot;: null&#125;&#x27;  //JSON data format 只支持null不支持undefined</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>如何来判断是 undefined 还是 null 呢？</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(x === <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(x === <span class="literal">undefined</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(x !== <span class="literal">undefined</span> &amp;&amp; x !== <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(x === <span class="literal">undefined</span> || x === <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">if</span>(!x)</span><br></pre></td></tr></table></figure>

<h2 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h2><p>在<code>if(value)&#123;&#125;</code> 语句判断是否为 true 的时候，实际代码是<code>if(Boolean(value) === true)</code>:</p>
<p>以下的值在转为 Boolean 的时候，全是 false：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">undefined</span>;</span><br><span class="line"><span class="literal">null</span>;</span><br><span class="line"><span class="built_in">Boolean</span>: <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">Number</span>: <span class="number">0</span>, <span class="literal">NaN</span>;</span><br><span class="line">Bigint: <span class="number">0n</span>;</span><br><span class="line">string: <span class="string">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>除此之外的（包括所有的 objects）在转为 Boolean 的时候，全是 true：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="string">&quot;abc&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>([]); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>(&#123;&#125;); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>boolean 转换规则</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common06.png" alt="js-common06">：</p>
<h2 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h2><p>JS 中的 Number 同时用来表示 integers 和 floating point numbers， 比如：98 和 123.45</p>
<p>需要注意的是, 对于 integers 是指没有小数的浮点数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">98</span> === <span class="number">98.0</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>用于 Number 的操作符有：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common07.png" alt="js-common07"></p>
<p>对于 + 号，除了用于加法计算以外，还有以下的用法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 表示正数：+n</span><br><span class="line">    +(-<span class="number">7</span>) -&gt; -<span class="number">7</span></span><br><span class="line">    -(-<span class="number">7</span>) -&gt; <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 转换为数字</span><br><span class="line">    +<span class="string">&#x27;5&#x27;</span> -&gt; <span class="number">5</span></span><br><span class="line">    +<span class="string">&#x27;-12&#x27;</span> -&gt; -<span class="number">12</span></span><br><span class="line">    -<span class="string">&#x27;9&#x27;</span> -&gt; -<span class="number">9</span></span><br><span class="line">    +<span class="string">&#x27;abc&#x27;</span> -&gt; <span class="literal">NaN</span></span><br></pre></td></tr></table></figure>

<h3 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h3><p>对于 NaN 的判断：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> n = <span class="literal">NaN</span>;</span><br><span class="line"><span class="built_in">console</span>.log(n === n); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.isNaN(n, <span class="literal">NaN</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(n, <span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>如果需要在数组里找到 NaN：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>); <span class="comment">// -1, 这个方法不能用来找 NaN</span></span><br><span class="line">[<span class="literal">NaN</span>].findIndex(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">Number</span>.isNaN(x)); <span class="comment">// 0, 可以找到NaN</span></span><br><span class="line">[<span class="literal">NaN</span>].find(<span class="function">(<span class="params">x</span>) =&gt;</span> <span class="built_in">Number</span>.isNaN(x)); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<h3 id="Infinity"><a href="#Infinity" class="headerlink" title="Infinity"></a>Infinity</h3><p>如果 Number 太大的话，就会返回 Infinity</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">1023</span>); <span class="comment">// 8.98846567431158e+307</span></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">1024</span>); <span class="comment">// Infinity</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span> / <span class="number">0</span> - <span class="comment">// Infinity</span></span><br><span class="line">  <span class="number">5</span> / <span class="number">0</span>; <span class="comment">// -Infinity</span></span><br></pre></td></tr></table></figure>

<p>Infinity 比所有的数字都大（除了 NaN)， 推荐用法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMinimum</span>(<span class="params">numbers</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> min = <span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> n <span class="keyword">of</span> numbers) &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; min) min = n;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">findMinimum([<span class="number">5</span>, -<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">// -1</span></span><br><span class="line">findMinimum([]); <span class="comment">// Infinity</span></span><br></pre></td></tr></table></figure>

<p>对于 Infinity 判断：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="literal">Infinity</span>;</span><br><span class="line"><span class="built_in">console</span>.log(x === <span class="literal">Infinity</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>.isFinite(x)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>Number 的转换规则：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/js-common08.png" alt="js-common08"></p>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>字符串可以通过数组的方式访问：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str[<span class="number">1</span>]); <span class="comment">//b</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length); <span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<p>也可以通过 for-of 或者展开运算符（…）来访问：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> <span class="string">&quot;xuz&quot;</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// output:</span></span><br><span class="line"><span class="comment">// x</span></span><br><span class="line"><span class="comment">// u</span></span><br><span class="line"><span class="comment">// z</span></span><br></pre></td></tr></table></figure>

<p>可以通过<code>...</code> 把字符转换成数组：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([...<span class="string">&quot;xuz&quot;</span>]); <span class="comment">// [&#x27;x&#x27;,&#x27;u&#x27;,&#x27;z&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>通过 + 号来连接字符串，推荐使用这种方式，因为 JS 引擎对这种方式已经优化过了：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span> + <span class="string">&quot; times &quot;</span> + <span class="number">4</span>); <span class="comment">// &#x27;3 times 4&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">str += <span class="string">&quot;say it&quot;</span>;</span><br><span class="line">str += <span class="string">&quot; one more&quot;</span>;</span><br><span class="line">str += <span class="string">&quot; time&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str); <span class="comment">// &#x27;say it one more time&#x27;</span></span><br></pre></td></tr></table></figure>

<p>转换为 string 有以下三种方式：</p>
<figure class="highlight gml"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> String(<span class="symbol">x</span>); （推荐使用这种方式）</span><br><span class="line"><span class="number">2.</span> <span class="string">&#x27;&#x27;</span> + <span class="symbol">x</span></span><br><span class="line"><span class="number">3.</span> <span class="symbol">x</span>.toString() （这种方式对 <span class="literal">undefined</span> 和 null 不起作用）</span><br></pre></td></tr></table></figure>

<p>String 的转换规则：<br><img src="/assets/images/posts/js/js-common09.png" alt="js-common">{:height=”50%” width=”50%”}</p>
<h2 id="枚举对象属性"><a href="#枚举对象属性" class="headerlink" title="枚举对象属性"></a>枚举对象属性</h2><p>有三种原生的方法可以列出或者枚举对象的属性。</p>
<ul>
<li>for…in 循环，该方法会依次访问一个对象以及其原型链中所有可枚举的属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> proptery <span class="keyword">in</span> obj2) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;proptery is &quot;</span> + proptery + <span class="string">&quot; value is &quot;</span> + obj2[proptery]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//result:</span></span><br><span class="line"><span class="comment">//proptery is e value is 5</span></span><br><span class="line"><span class="comment">//proptery is a value is 1</span></span><br><span class="line"><span class="comment">//proptery is b value is 2</span></span><br><span class="line"><span class="comment">//proptery is c value is 3</span></span><br><span class="line"><span class="comment">//proptery is d value is 4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Object.keys(o)，该方法返回对象自身（不包括原型中）的所有属性的名称的数组。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line">obj2.f = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> items = <span class="built_in">Object</span>.keys(obj2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(items); <span class="comment">// [&quot;e&quot;,&quot;f&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Object.getOwnPropertyNames(o)，该方法返回一个数组，它包好了对象 o 所有的属性（无论是否可枚举）的名称。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">  c: <span class="number">3</span>,</span><br><span class="line">  d: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj2 = <span class="built_in">Object</span>.create(obj);</span><br><span class="line">obj2.e = <span class="number">5</span>;</span><br><span class="line">obj2.f = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> items = <span class="built_in">Object</span>.getOwnPropertyNames(obj2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(items); <span class="comment">// [&quot;e&quot;,&quot;f&quot;]</span></span><br></pre></td></tr></table></figure>

<h2 id="判断对象是否为空"><a href="#判断对象是否为空" class="headerlink" title="判断对象是否为空"></a>判断对象是否为空</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> pro <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(pro)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(obj) === <span class="built_in">JSON</span>.stringify(&#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(obj).length === <span class="number">0</span> &amp;&amp; obj.constructor === <span class="built_in">Object</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四则运算符"><a href="#四则运算符" class="headerlink" title="四则运算符"></a>四则运算符</h2><p>加法运算符不同于其他几个运算符，它有以下几个特点：</p>
<p>运算中其中一方为字符串，那么就会把另一方也转换为字符串</p>
<p>如果一方不是字符串或者数字，那么会将它转换为数字或者字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="string">&quot;1&quot;</span>; <span class="comment">// &#x27;11&#x27;</span></span><br><span class="line"><span class="literal">true</span> + <span class="literal">true</span>; <span class="comment">// 2</span></span><br><span class="line"><span class="number">4</span> + [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// &quot;41,2,3&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果你对于答案有疑问的话，请看解析：</p>
<ul>
<li><p>对于第一行代码来说，触发特点一，所以将数字 1 转换为字符串，得到结果 ‘11’</p>
</li>
<li><p>对于第二行代码来说，触发特点二，所以将 true 转为数字 1</p>
</li>
<li><p>对于第三行代码来说，触发特点二，所以将数组通过 toString 转为字符串 1,2,3，得到结果 41,2,3</p>
</li>
</ul>
<p>另外对于加法还需要注意这个表达式 ‘a’ + + ‘b’</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;a&quot;</span> + +<span class="string">&quot;b&quot;</span>; <span class="comment">// -&gt; &quot;aNaN&quot;</span></span><br></pre></td></tr></table></figure>

<p>因为 + ‘b’ 等于 NaN，所以结果为 “aNaN”，你可能也会在一些代码中看到过 + ‘1’ 的形式来快速获取 number 类型。</p>
<p>那么对于除了加法的运算符来说，只要其中一方是数字，那么另一方就会被转为数字</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">4</span> * <span class="string">&quot;3&quot;</span>; <span class="comment">// 12</span></span><br><span class="line"><span class="number">4</span> * []; <span class="comment">// 0</span></span><br><span class="line"><span class="number">4</span> * [<span class="number">1</span>, <span class="number">2</span>]; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<h2 id="map-filter-reduce"><a href="#map-filter-reduce" class="headerlink" title="map, filter, reduce"></a>map, filter, reduce</h2><p>map 作用是生成一个新数组，遍历原数组，将每个元素拿出来做一些变换然后放入到新的数组中。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function">(<span class="params">v</span>) =&gt;</span> v + <span class="number">1</span>); <span class="comment">// -&gt; [2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<p>另外 map 的回调函数接受三个参数，分别是当前索引元素，索引，原数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>].map(<span class="built_in">parseInt</span>);</span><br><span class="line"><span class="comment">//第一轮遍历 parseInt(&#x27;1&#x27;, 0) -&gt; 1</span></span><br><span class="line"><span class="comment">//第二轮遍历 parseInt(&#x27;2&#x27;, 1) -&gt; NaN</span></span><br><span class="line"><span class="comment">//第三轮遍历 parseInt(&#x27;3&#x27;, 2) -&gt; NaN</span></span><br></pre></td></tr></table></figure>

<p>filter 的作用也是生成一个新数组，在遍历数组的时候将返回值为 true 的元素放入新数组，我们可以利用这个函数删除一些不需要的元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> newArray = array.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item !== <span class="number">6</span>);</span><br><span class="line"><span class="built_in">console</span>.log(newArray); <span class="comment">// [1, 2, 4]</span></span><br></pre></td></tr></table></figure>

<p>和 map 一样，filter 的回调函数也接受三个参数，用处也相同。</p>
<p>最后我们来讲解 reduce 这块的内容，同时也是最难理解的一块内容。reduce 可以将数组中的元素通过回调函数最终转换为一个值。</p>
<p>如果我们想实现一个功能将函数里的元素全部相加得到一个值，可能会这样写代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">  total += arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(total); <span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<p>但是如果我们使用 reduce 的话就可以将遍历部分的代码优化为一行代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> sum = arr.reduce(<span class="function">(<span class="params">acc, current</span>) =&gt;</span> acc + current, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum);</span><br></pre></td></tr></table></figure>

<p>对于 reduce 来说，它接受两个参数，分别是回调函数和初始值，接下来我们来分解上述代码中 reduce 的过程</p>
<ul>
<li>首先初始值为 0，该值会在执行第一次回调函数时作为第一个参数传入</li>
<li>回调函数接受四个参数，分别为累计值、当前元素、当前索引、原数组，后三者想必大家都可以明白作用，这里着重分析第一个参数</li>
<li>在一次执行回调函数时，当前值和初始值相加得出结果 1，该结果会在第二次执行回调函数时当做第一个参数传入</li>
<li>所以在第二次执行回调函数时，相加的值就分别是 1 和 2，以此类推，循环结束后得到结果 6</li>
</ul>
<p>想必通过以上的解析大家应该明白 reduce 是如何通过回调函数将所有元素最终转换为一个值的，当然 reduce 还可以实现很多功能，接下来我们就通过 reduce 来实现 map 函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> mapArray = arr.map(<span class="function">(<span class="params">value</span>) =&gt;</span> value * <span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> reduceArray = arr.reduce(<span class="function">(<span class="params">acc, current</span>) =&gt;</span> &#123;</span><br><span class="line">  acc.push(current * <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="built_in">console</span>.log(mapArray, reduceArray); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>

<h2 id="如何判断相等性"><a href="#如何判断相等性" class="headerlink" title="如何判断相等性"></a>如何判断相等性</h2>]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript Map 和 Set</title>
    <url>/2021/10/21/JavaScript%20Map%E5%92%8CSet/</url>
    <content><![CDATA[<h1 id="JavaScript-Map-和-Set"><a href="#JavaScript-Map-和-Set" class="headerlink" title="JavaScript Map 和 Set"></a>JavaScript Map 和 Set</h1><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>Map 是 JS(es6) 的一种字典数据结构, key 值不重复，如果有重复，就会覆盖前面的，任何值都可以作为 Map 的 key， 包括对象，字符，数字，NaN，symbol。</p>
<p>Map 跟 Object 很像，但是 Object 只能用 string / symbol 作为 Key，Map 可以通过 size 获取键值对个数，而 Object 只能手动计算。</p>
<p>在 JS 中，<code>NaN === NaN</code>是 false，不过在 Map 里 NaN 被认为是同一个 key：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="literal">NaN</span>, <span class="number">123</span>);</span><br><span class="line">map.get(<span class="literal">NaN</span>); <span class="comment">// 123</span></span><br></pre></td></tr></table></figure>

<p>但是对于 Object 的 Key，不同的对象，代表的 key 值不同：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Map</span>().set(&#123;&#125;, <span class="number">1</span>).set(&#123;&#125;, <span class="number">2</span>).size; <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p>Map 有以下 3 种创建方式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> emptyMap = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, <span class="string">&quot;one&quot;</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="string">&quot;two&quot;</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="string">&quot;three&quot;</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;one&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;two&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;three&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>复制 Map:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="literal">false</span>, <span class="string">&quot;no&quot;</span>).set(<span class="literal">true</span>, <span class="string">&quot;yes&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="keyword">new</span> <span class="built_in">Map</span>(original);</span><br></pre></td></tr></table></figure>

<p>通过 key 拿到 value：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">&quot;foo&quot;</span>, <span class="number">123</span>);</span><br><span class="line">map.get(<span class="string">&quot;foo&quot;</span>); <span class="comment">// 123</span></span><br><span class="line">map.get(<span class="string">&quot;bar&quot;</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>其他 Map 的方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// .has() checks if a Map has an entry with a given key</span></span><br><span class="line">map.has(<span class="string">&quot;foo&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .delete() remove entries</span></span><br><span class="line">map.delete(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">map.has(<span class="string">&quot;foo&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="string">&quot;foo&quot;</span>, <span class="literal">true</span>).set(<span class="string">&quot;bar&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .size retrun the number of entries in a Map</span></span><br><span class="line">map1.size; <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .clear() removes all entries of a Map</span></span><br><span class="line">map1.clear();</span><br><span class="line">map1.size; <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="literal">false</span>, <span class="string">&quot;no&quot;</span>).set(<span class="literal">true</span>, <span class="string">&quot;yes&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .keys() returns an iterable over the keys of a Map</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> map2.keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key); <span class="comment">// output: false true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// we can use spreading(...) to convert iterable returned by .keys() to an Array</span></span><br><span class="line">[...map2.keys()]; <span class="comment">// [false, true]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .values() quite like .keys(), but for values instead of keys</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//.entries() return an interable over the entries of a Map</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> map2.entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(entry);</span><br><span class="line">  <span class="comment">//output:</span></span><br><span class="line">  <span class="comment">//[false, &#x27;no&#x27;]</span></span><br><span class="line">  <span class="comment">//[ture, &#x27;yes&#x27;]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// we can use sperading(...) to convert iterable returned by .entries() to an Array;</span></span><br><span class="line">[...map.entries()]; <span class="comment">// [[false, &#x27;no&#x27;], [true, &#x27;yes&#x27;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// we also can use below way to access key and value</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value);</span><br><span class="line">  <span class="comment">// output:</span></span><br><span class="line">  <span class="comment">//false, &#x27;no&#x27;</span></span><br><span class="line">  <span class="comment">//true, &#x27;yes&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>只要 Map 只含有 strings 和 symbols 作为 key，那么就可以直接把这个 Map 转为 Object：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&quot;a&quot;</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="string">&quot;b&quot;</span>, <span class="number">2</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.fromEntries(map); <span class="comment">// &#123; a:1, b:2&#125;</span></span><br></pre></td></tr></table></figure>

<p>也可以把 Object 转换为 Map：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(<span class="built_in">Object</span>.entries(obj)); <span class="comment">// new Map([[&#x27;a&#x27;,1], [&#x27;b&#x27;,2]])</span></span><br></pre></td></tr></table></figure>

<p>应用： 计算字符串中，字符出现的次数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countChars</span>(<span class="params">chars</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> charCounts = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> ch <span class="keyword">of</span> chars) &#123;</span><br><span class="line">    ch = ch.toLowerCase();</span><br><span class="line">    <span class="keyword">const</span> prevCount = charCounts.get(ch);</span><br><span class="line">    prevCount ? charCounts.set(ch, prevCount + <span class="number">1</span>) : <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> charCounts;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果想要像数组一样，map 和 filter， 那么就必须要把 Map 先转化为数组：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> originalMap = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;a&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mappedMap = <span class="keyword">new</span> <span class="built_in">Map</span>( <span class="comment">//step 3</span></span><br><span class="line">  [...originalMap] <span class="comment">//setp 1</span></span><br><span class="line">    .map(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> [k * <span class="number">2</span>, <span class="string">&quot;_&quot;</span> + v]) <span class="comment">//step 2</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// 相当于：new Map([[2, &#x27;_a&#x27;], [4, &#x27;_b&#x27;], [6, &#x27;_c&#x27;]])</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filteredMap = <span class="keyword">new</span> <span class="built_in">Map</span>( <span class="comment">// step 3</span></span><br><span class="line">  [...originalMap] <span class="comment">//step 1</span></span><br><span class="line">    .filter(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> k &lt; <span class="number">3</span>) <span class="comment">//setp 2</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">// 相当于：new Map([[1,&#x27;a&#x27;], [2, &#x27;b&#x27;]])</span></span><br></pre></td></tr></table></figure>

<p>如果想要，合并两个 Map:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map1 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">1</span>, <span class="string">&quot;1a&quot;</span>).set(<span class="number">2</span>, <span class="string">&quot;1b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;1c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> map2 = <span class="keyword">new</span> <span class="built_in">Map</span>().set(<span class="number">2</span>, <span class="string">&quot;2b&quot;</span>).set(<span class="number">3</span>, <span class="string">&quot;2c&quot;</span>).set(<span class="number">4</span>, <span class="string">&quot;2d&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> combinedMap = <span class="keyword">new</span> <span class="built_in">Map</span>([...map1, ...map2]);</span><br><span class="line"><span class="comment">// 相当于：new Map([[1,&#x27;1a&#x27;],[2,&#x27;2b&#x27;],[3,&#x27;2c&#x27;],[4, &#x27;2d&#x27;]])</span></span><br></pre></td></tr></table></figure>

<h2 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h2><p>WeakMap 跟 Map 非常像，只不过多了以下的限制：</p>
<ul>
<li>WeakMap 就是一个黑盒子<ul>
<li>我们不能直接通过 keys / values / entries 来 iterate 或者是 loop WeakMap，并且不能计算它的 size。</li>
<li>我们不能清除 WeakMap，如有需要，只能重新创建一个。</li>
</ul>
</li>
<li>WeakMap 的 key，必须是 objects<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> wm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">wm.set(<span class="number">123</span>, <span class="string">&quot;test&quot;</span>); <span class="comment">// TypeError: Invalid value used as weak map key</span></span><br></pre></td></tr></table></figure></li>
<li>WeakMap 的 key 是弱引用<ul>
<li>正常来说，如果有对象还被引用，那么就不会被垃圾回收。但是 WeakMap 不一样，在 object 作为 key 的时候，是可以被垃圾回收的，这会导致整个 entry 也被删掉，并且这个没办法检测到这种行为。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  vm.set(obj, <span class="string">&quot;attachedValue&quot;</span>); <span class="comment">// (A)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// (B)</span></span><br></pre></td></tr></table></figure>
在 (A) 这一行我们给 obj 这个 key 赋值，但是在 (B) 这一行，obj 这个 entry 就有可能被垃圾回收掉了，但是 vm 还在，并且没办法手动删掉 vm</li>
</ul>
</li>
</ul>
<p>应用：</p>
<ul>
<li><p>用 WeakMap 来保存计算结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countOwnKeys</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (cache.has(obj)) &#123;</span><br><span class="line">    <span class="keyword">return</span> [cache.get(obj), <span class="string">&quot;cached&quot;</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="built_in">Object</span>.keys(obj).length;</span><br><span class="line">    cache.set(obj, count);</span><br><span class="line">    <span class="keyword">return</span> [count, <span class="string">&quot;computed&quot;</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>用 WeakMap 来保存 private data</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> _counter = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"><span class="keyword">const</span> _action = <span class="keyword">new</span> <span class="built_in">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Countdown</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">counter, action</span>)</span> &#123;</span><br><span class="line">    _counter.set(<span class="built_in">this</span>, counter);</span><br><span class="line">    _action.set(<span class="built_in">this</span>, action);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">dec</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> counter = _counter.get(<span class="built_in">this</span>);</span><br><span class="line">    counter--;</span><br><span class="line">    _counter.set(<span class="built_in">this</span>, counter);</span><br><span class="line">    <span class="keyword">if</span> (counter === <span class="number">0</span>) &#123;</span><br><span class="line">      _action.get(<span class="built_in">this</span>)();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>WeakMap 的方法有:</p>
</li>
<li><p>new WeakMap()</p>
</li>
<li><p>.delete(key)</p>
</li>
<li><p>.get(key)</p>
</li>
<li><p>.has(key)</p>
</li>
<li><p>.set(key,value)</p>
</li>
</ul>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Set 跟数组很像，但是成员的值都是唯一的，没有重复的值，并且 Set 对象允许存储任何类型的值，无论是原始值或者是对象引用。Set 函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。</p>
<p>有以下三种方式创建 Set：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> emptySet = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">&quot;red&quot;</span>).add(<span class="string">&quot;green&quot;</span>).add(<span class="string">&quot;blue&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>常用的 Set 方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .add() addsd an element to a Set</span></span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> set();</span><br><span class="line">set.add(<span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// .has() checks if an elements is a member of a Set</span></span><br><span class="line">set.has(<span class="string">&quot;red&quot;</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .delete() removes an element from a Set</span></span><br><span class="line">set.delete(<span class="string">&quot;red&quot;</span>); <span class="comment">// true</span></span><br><span class="line">set.has(<span class="string">&quot;red&quot;</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .size contains the number of elements in a Set</span></span><br><span class="line"><span class="keyword">const</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>().add(<span class="string">&quot;foo&quot;</span>).add(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">set1.size; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .clear() removes all elements of a Set</span></span><br><span class="line">set1.clear();</span><br><span class="line">set1.size; <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Iterating over Sets</span></span><br><span class="line"><span class="keyword">const</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> set2) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="comment">//outouts:</span></span><br><span class="line">  <span class="comment">//&#x27;red&#x27;</span></span><br><span class="line">  <span class="comment">//&#x27;green&#x27;,</span></span><br><span class="line">  <span class="comment">//&#x27;blue&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// use spreading(...) to convert set to array</span></span><br><span class="line"><span class="keyword">const</span> set3 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;red&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;blue&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> arr = [...set3]; <span class="comment">// [&#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>应用：</p>
<p>移除数组中的重复项：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set4 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> arr = [...set4]; <span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<p>字符串是 iterable，所以也可以作为 Set 的参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>]); <span class="comment">//这两个是一样的</span></span><br></pre></td></tr></table></figure>

<p>NaN 对于 Set 来说也是一个值，对于任何 Object 都是不同的值：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>]);</span><br><span class="line">set.size; <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">cosnt set1 = <span class="keyword">new</span> <span class="built_in">Set</span>([&#123;&#125;, &#123;&#125;]);</span><br><span class="line">set.size; <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p>Union 两个 Set：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> union = <span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b]); <span class="comment">// new Set([1,2,3,4])</span></span><br></pre></td></tr></table></figure>

<p>Intersection 两个 Set：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> intersection = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> b.has(x))); <span class="comment">// new Set([2,3])</span></span><br></pre></td></tr></table></figure>

<p>Difference 两个 Set：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> difference = <span class="keyword">new</span> <span class="built_in">Set</span>([...a].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> !b.has(x))); <span class="comment">// new Set([1, 4])</span></span><br></pre></td></tr></table></figure>

<p>Mapping over Set:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="keyword">const</span> mappedSet = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].map(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>)); <span class="comment">// new Set([2,4,6])</span></span><br></pre></td></tr></table></figure>

<p>Filtering Set:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="keyword">const</span> filteredSet = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].filter(<span class="function">(<span class="params">x</span>) =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>)); <span class="comment">// new Set([2,4])</span></span><br></pre></td></tr></table></figure>

<h2 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h2><p>WeakSet 跟 Set 很像，只不过多了下面的限制：</p>
<ul>
<li>WeakSet 是个黑盒子<ul>
<li>我们不能直接通过 keys / values / entries 来 iterate 或者是 loop WeakMap，并且不能计算它的 size。</li>
<li>我们不能清除 WeakMap，如有需要，只能重新创建一个。</li>
</ul>
</li>
<li>WeakSet 的 key 是弱引用<ul>
<li>正常来说，如果有对象还被引用，那么就不会被垃圾回收。但是 WeakSet 不一样，在 object 作为 key 的时候，是可以被垃圾回收的，这会导致整个 entry 也被删掉，并且这个没办法检测到这种行为。</li>
</ul>
</li>
</ul>
<p>WeakSet 的方法有:</p>
<ul>
<li>new WeakSet()</li>
<li>.delete(value)</li>
<li>.get(value)</li>
<li>.has(value)</li>
<li>.set(value)</li>
</ul>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 展开运算符</title>
    <url>/2021/10/22/JavaScript%20%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
    <content><![CDATA[<h1 id="JavaScript-展开运算符"><a href="#JavaScript-展开运算符" class="headerlink" title="JavaScript 展开运算符"></a>JavaScript 展开运算符</h1><h2 id="展开运算符-（…）"><a href="#展开运算符-（…）" class="headerlink" title="展开运算符 （…）"></a>展开运算符 （…）</h2><p>展开运算符，是 ES6 中的新语法，是把可迭代的对象（string，object，数组）展开，可以用在函数调用 / 数组构造的时候，将数组表达式 / string 在语法层面展开，还可以将对象表达式按照 key-value 的方式展开。</p>
<p>展开运算符只能用于可迭代对象。</p>
<span id="more"></span>

<p><strong>函数调用：</strong></p>
<p>假如你把<code>...</code>放在函数的参数里，就说明这个参数必须是<code>interable object</code>，然后这个对象会被展开成为函数的参数：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">  <span class="built_in">console</span>.log(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> someIterable = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line">func(...someIterable);</span><br><span class="line"><span class="comment">// same as func(&#x27;a&#x27;, &#x27;b&#x27;)</span></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(-<span class="number">1</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">3</span>)</span><br><span class="line"><span class="number">11</span></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(...[-<span class="number">1</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">3</span>])</span><br><span class="line"><span class="number">11</span></span><br><span class="line">&gt; <span class="built_in">Math</span>.max(-<span class="number">1</span>, ...[-<span class="number">5</span>, <span class="number">11</span>], <span class="number">3</span>)</span><br><span class="line"><span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line">arr1.push(...arr2); <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><strong>数组构造或字符串</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log([...numbers, <span class="string">&#x27;4&#x27;</span>, ...<span class="string">&#x27;hello&#x27;</span>, <span class="number">6</span>];) <span class="comment">// Array [1, 2, 3, &quot;4&quot;, &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> parts = [<span class="string">&#x27;shoulders&#x27;</span>, <span class="string">&#x27;knees&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> lyrics = [<span class="string">&#x27;head&#x27;</span>, ...parts, <span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;toes&#x27;</span>]; <span class="comment">//  [&quot;head&quot;, &quot;shoulders&quot;, &quot;knees&quot;, &quot;and&quot;, &quot;toes&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组拷贝</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [...arr];</span><br><span class="line">arr2.push(<span class="number">4</span>); <span class="comment">// arr2 此时变成了 [1,2,3,4]. arr不受影响</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//连接多个数组</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = [...arr1, ...arr2]; <span class="comment">// [0,1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对象拷贝（浅拷贝，并且不包含prototype）和合并</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">foo</span>:<span class="string">&#x27;bar&#x27;</span>, <span class="attr">x</span>:<span class="number">42</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">foo</span>:<span class="string">&#x27;baz&#x27;</span>, <span class="attr">y</span>:<span class="number">13</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> cloneObj = &#123;...obj1&#125;; <span class="comment">// &#123;foo:&#x27;bar&#x27;, x:42&#125;</span></span><br><span class="line"><span class="keyword">var</span> mergeObj = &#123;...obj1, ...obj2&#125;; <span class="comment">// &#123;foo:&#x27;baz&#x27;, x:42, y:13&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 场景应用基础02</title>
    <url>/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8002/</url>
    <content><![CDATA[<h1 id="CSS-场景应用基础-02"><a href="#CSS-场景应用基础-02" class="headerlink" title="CSS 场景应用基础 02"></a>CSS 场景应用基础 02</h1><h2 id="实现一个宽高自适应的正方形"><a href="#实现一个宽高自适应的正方形" class="headerlink" title="实现一个宽高自适应的正方形"></a>实现一个宽高自适应的正方形</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230648171.png" alt="image-20220728230648171"></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* vw */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      width: 10%;</span><br><span class="line">      height: 10vw;</span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 元素的margin/padding百分比是相对父元素width的性质来实现 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      width: 20%;</span><br><span class="line">      height: 0px;</span><br><span class="line">      padding-top: 20%;</span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实现一个梯形"><a href="#实现一个梯形" class="headerlink" title="实现一个梯形"></a>实现一个梯形</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230838771.png" alt="image-20220728230838771"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 直角梯形 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      height: 0px;</span><br><span class="line">      width: 100px;</span><br><span class="line">      border-bottom: 100px solid pink;</span><br><span class="line">      border-right: 40px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 等腰梯形 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      height: 0px;</span><br><span class="line">      width: 100px;</span><br><span class="line">      border-bottom: 100px solid pink;</span><br><span class="line">      border-left: 40px solid transparent;</span><br><span class="line">      border-right: 40px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 直角梯形 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 等腰梯形01 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实现一根-0-5px-的线"><a href="#实现一根-0-5px-的线" class="headerlink" title="实现一根 0.5px 的线"></a>实现一根 0.5px 的线</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231159877.png" alt="image-20220728231159877"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck</span> &#123;</span></span><br><span class="line">      border-bottom: 0.5px solid black;</span><br><span class="line">      transform: scale(0.5, 0.5);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 场景应用基础01</title>
    <url>/2021/11/07/CSS%20%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%E5%9F%BA%E7%A1%8001/</url>
    <content><![CDATA[<h1 id="CSS-场景应用基础-01"><a href="#CSS-场景应用基础-01" class="headerlink" title="CSS 场景应用基础 01"></a>CSS 场景应用基础 01</h1><h2 id="实现一个三角形"><a href="#实现一个三角形" class="headerlink" title="实现一个三角形"></a>实现一个三角形</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230033309.png" alt="image-20220728230033309"></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle01</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border: 100px solid;</span><br><span class="line">      border-color: orange blue pink green;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle02</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-top: 50px solid pink;</span><br><span class="line">      border-left: 50px solid transparent;</span><br><span class="line">      border-right: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle03</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-bottom: 50px solid pink;</span><br><span class="line">      border-left: 50px solid transparent;</span><br><span class="line">      border-right: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle04</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-left: 50px solid pink;</span><br><span class="line">      border-top: 50px solid transparent;</span><br><span class="line">      border-bottom: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.triangle05</span> &#123;</span></span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-right: 50px solid pink;</span><br><span class="line">      border-top: 50px solid transparent;</span><br><span class="line">      border-bottom: 50px solid transparent;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle03&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle04&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;triangle05&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实现一个扇形"><a href="#实现一个扇形" class="headerlink" title="实现一个扇形"></a>实现一个扇形</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230227060.png" alt="image-20220728230227060"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    div &#123;</span><br><span class="line">      width: 0px;</span><br><span class="line">      height: 0px;</span><br><span class="line">      border-radius: 100px;</span><br><span class="line">      border: 100px solid transparent;</span><br><span class="line">      border-top-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="实现一个圆和半圆"><a href="#实现一个圆和半圆" class="headerlink" title="实现一个圆和半圆"></a>实现一个圆和半圆</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728230348986.png" alt="image-20220728230348986"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.circle</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      background-color: pink;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.half-circle</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      background-color: pink;</span><br><span class="line">      border-radius: 0px 0px 100px 100px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;half-circle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 基本布局</title>
    <url>/2021/11/13/CSS%20%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<h1 id="CSS-基本布局"><a href="#CSS-基本布局" class="headerlink" title="CSS 基本布局"></a>CSS 基本布局</h1><h2 id="两栏布局"><a href="#两栏布局" class="headerlink" title="两栏布局"></a>两栏布局</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231435086.png" alt="image-20220728231435086"></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="comment">/* 浮动 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">      float: left;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 500px;</span><br><span class="line">      background-color: aqua;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">      margin-left: 200px;</span><br><span class="line">      width: auto;</span><br><span class="line">      height: 500px;</span><br><span class="line">      background-color: gold;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* =============================================== */</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* flex */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.outer</span> &#123;</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 200px;</span><br><span class="line">      display: flex;</span><br><span class="line">      background: pink;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.left01</span> &#123;</span></span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background: gold;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right01</span> &#123;</span></span><br><span class="line">      flex: 1;</span><br><span class="line">      height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/* =============================================== */</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* 子绝父相 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.father</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 100%;</span><br><span class="line">      background: aqua;</span><br><span class="line">      position: relative;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.son01</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background: palevioletred;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.son02</span> &#123;</span></span><br><span class="line">      position: absolute;</span><br><span class="line">      height: 100%;</span><br><span class="line">      left: 200px;</span><br><span class="line">      right: 0px;</span><br><span class="line">      background: navy;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 浮动 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 左边一栏固定 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右边一栏宽度自适应 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 子绝父相 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son01&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son02&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三栏布局"><a href="#三栏布局" class="headerlink" title="三栏布局"></a>三栏布局</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231614300.png" alt="image-20220728231614300"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 250px;</span><br><span class="line">      background: palegreen;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      background: palevioletred;</span><br><span class="line">      flex: 1;</span><br><span class="line">      margin: 0 10px;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">      height: 200px;</span><br><span class="line">      width: 250px;</span><br><span class="line">      background: blueviolet;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;middle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="水平垂直居中"><a href="#水平垂直居中" class="headerlink" title="水平垂直居中"></a>水平垂直居中</h2><p>效果图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220728231658773.png" alt="image-20220728231658773"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.fuck01</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      position: absolute;</span><br><span class="line">      top: 50%;</span><br><span class="line">      left: 50%;</span><br><span class="line"><span class="css">      <span class="comment">/* transform: translate */</span></span></span><br><span class="line">      transform: translate(-50%, -50%);</span><br><span class="line"></span><br><span class="line"><span class="css">      <span class="comment">/* 移动自身一半 */</span></span></span><br><span class="line">      /* margin-left: -50px;</span><br><span class="line">        margin-top: -50px; */</span><br><span class="line">      background: pink;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/* flex */</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line">      background: blue;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.fuck02</span> &#123;</span></span><br><span class="line">      width: 50px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      background: greenyellow;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 父相对定位 子绝对定位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck01&quot;</span>&gt;</span>01<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- flex --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fuck02&quot;</span>&gt;</span>02<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>二叉树的前中后序遍历（递归）</title>
    <url>/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E9%80%92%E5%BD%92%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Leetcode-二叉树的前中后序遍历（递归）"><a href="#Leetcode-二叉树的前中后序遍历（递归）" class="headerlink" title="Leetcode 二叉树的前中后序遍历（递归）"></a>Leetcode 二叉树的前中后序遍历（递归）</h1><h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">144. 二叉树的前序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：根节点 左节点 右节点</p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 前序遍历</span></span><br><span class="line">  <span class="comment">// 根节点 左节点 右节点</span></span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    result.push(root.val);</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">94. 二叉树的中序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：左节点 根节点 右节点</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 中序遍历</span></span><br><span class="line">  <span class="comment">// 左子树 根节点 右子树</span></span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    result.push(root.val);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="后续遍历"><a href="#后续遍历" class="headerlink" title="后续遍历"></a>后续遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/">145. 二叉树的后序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：左节点 右节点 根节点</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="comment">// 后续遍历</span></span><br><span class="line">  <span class="comment">// 左节点 右节点 根节点</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">const</span> accessTree = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    accessTree(root.left);</span><br><span class="line">    accessTree(root.right);</span><br><span class="line">    result.push(root.val);</span><br><span class="line">  &#125;;</span><br><span class="line">  accessTree(root);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>二叉树的前中后序遍历（迭代）</title>
    <url>/2022/03/04/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%EF%BC%88%E8%BF%AD%E4%BB%A3%EF%BC%89/</url>
    <content><![CDATA[<h1 id="Leetcode-二叉树的前中后序遍历（迭代）"><a href="#Leetcode-二叉树的前中后序遍历（迭代）" class="headerlink" title="Leetcode 二叉树的前中后序遍历（迭代）"></a>Leetcode 二叉树的前中后序遍历（迭代）</h1><p>前文讲过二叉树的递归遍历版本，今天讲一下二叉树的迭代遍历</p>
<h2 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a>前序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">144. 二叉树的前序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：根节点 左节点 右节点</p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> preorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 前序遍历</span></span><br><span class="line">  <span class="comment">// 根节点 左节点 右节点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 需要借助栈来实现</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">// 先把根节点记录下来</span></span><br><span class="line">      result.push(root.val);</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line">    root = stack.pop();</span><br><span class="line">    root = root.right;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-inorder-traversal/">94. 二叉树的中序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：左节点 根节点 右节点</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 中序遍历</span></span><br><span class="line">  <span class="comment">// 左子树 根节点 右子树</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 借助栈</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当二叉树遍历完毕 或者 栈中没有元素 停止遍历</span></span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 将根节点到所有的左节点存入栈中</span></span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开始出栈</span></span><br><span class="line">    root = stack.pop();</span><br><span class="line">    <span class="comment">// 出栈元素存入result</span></span><br><span class="line">    result.push(root.val);</span><br><span class="line">    <span class="comment">// 将root改为原root的右节点</span></span><br><span class="line">    root = root.right;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="后续遍历"><a href="#后续遍历" class="headerlink" title="后续遍历"></a>后续遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-postorder-traversal/">145. 二叉树的后序遍历 - 力扣（LeetCode）</a></p>
<p>顺序：左节点 右节点 根节点</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 递归</span></span><br><span class="line">  <span class="comment">// 后续遍历</span></span><br><span class="line">  <span class="comment">// 左节点 右节点 根节点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 迭代</span></span><br><span class="line">  <span class="comment">// 借助栈 以及 中间变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="keyword">let</span> stack = [];</span><br><span class="line">  <span class="keyword">let</span> preAccess = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (root !== <span class="literal">null</span> || stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (root !== <span class="literal">null</span>) &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    root = stack.pop();</span><br><span class="line">    <span class="keyword">if</span> (root.right === <span class="literal">null</span> || root.right === preAccess) &#123;</span><br><span class="line">      result.push(root.val);</span><br><span class="line">      preAccess = root;</span><br><span class="line">      root = <span class="literal">null</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      stack.push(root);</span><br><span class="line">      root = root.right;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>二叉树的层序遍历</title>
    <url>/2022/03/10/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<h1 id="Leetcode-二叉树的层序遍历"><a href="#Leetcode-二叉树的层序遍历" class="headerlink" title="Leetcode 二叉树的层序遍历"></a>Leetcode 二叉树的层序遍历</h1><p>前文分别用递归和迭代遍历二叉树，本文讲一下层序遍历二叉树（BFS）</p>
<h2 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h2><p>题号：<a href="https://leetcode.cn/problems/binary-tree-level-order-traversal/">102. 二叉树的层序遍历 - 力扣（LeetCode）</a></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;TreeNode&#125;</span> <span class="variable">root</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;number[][]&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> queue = [];</span><br><span class="line">  queue.push(root);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// while循环控制从上到下遍历</span></span><br><span class="line">  <span class="keyword">while</span> (queue.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> size = queue.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> level = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// for循环控制从左到右遍历</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">      <span class="keyword">let</span> cur = queue.shift();</span><br><span class="line">      level.push(cur.val);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (cur.left !== <span class="literal">null</span>) &#123;</span><br><span class="line">        queue.push(cur.left);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (cur.right !== <span class="literal">null</span>) &#123;</span><br><span class="line">        queue.push(cur.right);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res.push([...level]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>二叉树的构造01</title>
    <url>/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A001/</url>
    <content><![CDATA[<h1 id="Leetcode-二叉树的构造-01"><a href="#Leetcode-二叉树的构造-01" class="headerlink" title="Leetcode 二叉树的构造 01"></a>Leetcode 二叉树的构造 01</h1><h2 id="前序-中序-构造二叉树"><a href="#前序-中序-构造二叉树" class="headerlink" title="前序+中序 构造二叉树"></a>前序+中序 构造二叉树</h2><p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）</a></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">preorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">inorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span> (<span class="params">preorder, inorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">preorder, preStart, preEnd, inorder, inStart, inEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 递归终止条件</span></span><br><span class="line">    <span class="keyword">if</span> (preStart &gt; preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前序遍历数组的第一个元素是 树的根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = preorder[preStart];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到根节点在中序遍历数组中的索引</span></span><br><span class="line">    <span class="keyword">let</span> rootIndex = inorder.indexOf(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据根节点的索引在中序遍历数组中定位左子树数组的长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = rootIndex - inStart;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 递归构造左右子树</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据左子树数组的长度定位到</span></span><br><span class="line">    <span class="comment">// 左子树在前序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点的后一个节点 到 根节点位置+长度</span></span><br><span class="line">    <span class="comment">// 左子树在中序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 中序遍历开始的位置，到根节点前一个元素</span></span><br><span class="line">    root.left = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + <span class="number">1</span>,</span><br><span class="line">      preStart + leftSize,</span><br><span class="line">      inorder,</span><br><span class="line">      inStart,</span><br><span class="line">      rootIndex - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 右子树在前序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点位置+长度+1</span></span><br><span class="line">    <span class="comment">// 右子树在中序遍历数组中的位置</span></span><br><span class="line">    <span class="comment">// 根节点元素位置+1，到数组结尾</span></span><br><span class="line">    root.right = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + leftSize + <span class="number">1</span>,</span><br><span class="line">      preEnd,</span><br><span class="line">      inorder,</span><br><span class="line">      rootIndex + <span class="number">1</span>,</span><br><span class="line">      inEnd</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    preorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    preorder.length - <span class="number">1</span>,</span><br><span class="line">    inorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    inorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="后序-中序-构造二叉树"><a href="#后序-中序-构造二叉树" class="headerlink" title="后序+中序 构造二叉树"></a>后序+中序 构造二叉树</h2><p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/">106. 从中序与后序遍历序列构造二叉树 - 力扣（LeetCode）</a></p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">inorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">postorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> buildTree = <span class="function"><span class="keyword">function</span> (<span class="params">inorder, postorder</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">inorder, inStart, inEnd, postorder, postStart, postEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (inStart &gt; inEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 中序遍历</span></span><br><span class="line">    <span class="comment">// [左，根，右]</span></span><br><span class="line">    <span class="comment">// 后续遍历</span></span><br><span class="line">    <span class="comment">// [左，右，根]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 后续遍历数组的最后一位为根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = postorder[postEnd];</span><br><span class="line">    <span class="comment">// 找到根节点在中序遍历数组中的位置</span></span><br><span class="line">    <span class="keyword">let</span> rootIndex = inorder.indexOf(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造二叉树</span></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获得左子树数组的长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = rootIndex - inStart;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造二叉树的左右子树</span></span><br><span class="line">    root.left = build(</span><br><span class="line">      inorder,</span><br><span class="line">      inStart,</span><br><span class="line">      rootIndex - <span class="number">1</span>,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart,</span><br><span class="line">      postStart + leftSize - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line">    root.right = build(</span><br><span class="line">      inorder,</span><br><span class="line">      rootIndex + <span class="number">1</span>,</span><br><span class="line">      inEnd,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart + leftSize,</span><br><span class="line">      postEnd - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    inorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    inorder.length - <span class="number">1</span>,</span><br><span class="line">    postorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    postorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>二叉树的构造02</title>
    <url>/2022/03/13/Leetcode%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%9E%84%E9%80%A002/</url>
    <content><![CDATA[<h1 id="Leetcode-二叉树的构造-02"><a href="#Leetcode-二叉树的构造-02" class="headerlink" title="Leetcode 二叉树的构造 02"></a>Leetcode 二叉树的构造 02</h1><h2 id="前序-后序-构造二叉树"><a href="#前序-后序-构造二叉树" class="headerlink" title="前序+后序 构造二叉树"></a>前序+后序 构造二叉树</h2><p>只能确定根节点，但是不能确定左右子树，因此答案不唯一</p>
<p>题号：<a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. 从前序与中序遍历序列构造二叉树 - 力扣（LeetCode）</a></p>
<p>解题流程：</p>
<p>1、首先把前序遍历结果的第一个元素或者后序遍历结果的最后一个元素确定为根节点的值。</p>
<p>2、然后把前序遍历结果的第二个元素作为左子树的根节点的值。</p>
<span id="more"></span>

<p>3、在后序遍历结果中寻找左子树根节点的值，从而确定了左子树的索引边界，进而确定右子树的索引边界，递归构造左右子树即可。</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">preorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;number[]&#125;</span> <span class="variable">postorder</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;TreeNode&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> constructFromPrePost = <span class="function"><span class="keyword">function</span> (<span class="params">preorder, postorder</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 根左右</span></span><br><span class="line">  <span class="comment">// 左右根</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> build = <span class="function">(<span class="params">preorder, preStart, preEnd, postorder, postStart, postEnd</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (preStart &gt; preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (preStart === preEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(preorder[preStart]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 前序遍历数组的第一个元素为根节点</span></span><br><span class="line">    <span class="keyword">let</span> rootVal = preorder[preStart];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到左子树的根节点</span></span><br><span class="line">    <span class="comment">// 左子树的根节点为前序遍历数组中的第二个元素（左子树可能为null，因此该元素可能是右子树的根节点，因此本题答案不唯一）</span></span><br><span class="line">    <span class="keyword">let</span> leftVal = preorder[preStart + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 找到左子树根节点在后续遍历数组中的位置</span></span><br><span class="line">    <span class="keyword">let</span> leftIndex = postorder.indexOf(leftVal);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 左子树数组长度</span></span><br><span class="line">    <span class="keyword">let</span> leftSize = leftIndex - postStart + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> root = <span class="keyword">new</span> TreeNode(rootVal);</span><br><span class="line"></span><br><span class="line">    root.left = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + <span class="number">1</span>,</span><br><span class="line">      preStart + leftSize,</span><br><span class="line">      postorder,</span><br><span class="line">      postStart,</span><br><span class="line">      leftIndex</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    root.right = build(</span><br><span class="line">      preorder,</span><br><span class="line">      preStart + leftSize + <span class="number">1</span>,</span><br><span class="line">      preEnd,</span><br><span class="line">      postorder,</span><br><span class="line">      leftIndex + <span class="number">1</span>,</span><br><span class="line">      postEnd - <span class="number">1</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> build(</span><br><span class="line">    preorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    preorder.length - <span class="number">1</span>,</span><br><span class="line">    postorder,</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    postorder.length - <span class="number">1</span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Leetcode</category>
      </categories>
      <tags>
        <tag>Leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 深入理解this</title>
    <url>/2021/07/26/JavaScript%20%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3this/</url>
    <content><![CDATA[<h1 id="JavaScript-深入理解-this"><a href="#JavaScript-深入理解-this" class="headerlink" title="JavaScript 深入理解 this"></a>JavaScript 深入理解 this</h1><p>有四种可执行代码可以创建执行上下文，分别是<code>global code</code> <code>function code</code> <code>module</code>和<code>eval code</code>。接下来分别介绍这<code>global code</code> <code>function code</code>可执行代码中的 this（ThisBinding）到底指的是什么。</p>
<h2 id="global-code-的-this"><a href="#global-code-的-this" class="headerlink" title="global code 的 this"></a>global code 的 this</h2><p>在 JS 引擎运行 global code 之前，会创建一个全局执行上下文压入执行栈的栈底，这个全局执行上文的 ThisBinding 绑定的是全局对象，在浏览器里指的就是 window。</p>
<h2 id="function-code-的-this"><a href="#function-code-的-this" class="headerlink" title="function code 的 this"></a>function code 的 this</h2><span id="more"></span>

<p>词法环境是由代码结构决定的，开发把代码写成什么样，词法环境就是怎么样，跟方法在哪里调用没有关系。但是对于函数的 this 刚好反过来，跟代码在哪里定义没有关系，而跟代码在哪里调用有关系。一般我们调用函数有以下四种方式：</p>
<ul>
<li>普通函数调用，比如 foo()或者(functon(){})()</li>
<li>作为对象方法调用，比如 obj.foo()</li>
<li>构造函数调用，比如 new foo()</li>
<li>使用 call、apply、bind 等方法调用</li>
</ul>
<p>在介绍着几种函数调用之前，我们先来看下 ECMAScript 对 this 的规范：</p>
<blockquote>
<p>
ECMAScript规范： 严格模式时，函数内的this绑定严格指向传入的thisArgument。非严格模式时，若传入的thisArgument不为undefined或null时，函数内的this绑定指向传入的thisArgument；为undefined或null时，函数内的this绑定指向全局的this。
</p>
</blockquote>

<h3 id="普通函数调用"><a href="#普通函数调用" class="headerlink" title="普通函数调用"></a>普通函数调用</h3><p>普通函数的调用，包括函数调用 foo()和立即调用函数表达式(functon(){})()，传到函数里的 thisArgument 是 undefined。根据 ECMAScript 规范，如果在非严格模式下，普通函数里的 this 就是全局对象，而在严格模式下就为 undefined。</p>
<p>比如有以下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">//window</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a); <span class="comment">//2</span></span><br><span class="line">  <span class="built_in">console</span>.log(val); <span class="comment">//3</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">3</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">foo(3) 相当于是：foo().call(undefined,3) 的简化版本。</span></span><br><span class="line"><span class="comment">为了代码方便，所以有直接普通函数调用，thisArgument 默认是undefined，不用每次都敲这个undefined。</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>

<p>如果把 foo 方法改为严格模式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &quot;use strict&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>); <span class="comment">// undefind</span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>

<p>执行上面这段代码，会报错：</p>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">VM162:<span class="number">4</span> Uncaught TypeError: Cannot <span class="keyword">read</span> <span class="keyword">property</span><span class="title"> </span>&#x27;a&#x27; of undefined</span><br><span class="line">    at foo (<span class="tag">&lt;anonymous&gt;</span>:<span class="number">4</span>:<span class="number">22</span>)</span><br></pre></td></tr></table></figure>

<h3 id="对象方法调用"><a href="#对象方法调用" class="headerlink" title="对象方法调用"></a>对象方法调用</h3><p>作为对象方法调用，传到函数里的 thisArgument 是该对象。比如有如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.foo(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，只有离函数最近的这个对象，才是该函数的 this，比如有代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  a: <span class="number">42</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  obj2: obj2,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj1.obj2.foo(); <span class="comment">//42</span></span><br></pre></td></tr></table></figure>

<p>还有一种比较看起来像对象方法调用，实际上是普通函数调用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = obj.foo;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;global variable&quot;</span>;</span><br><span class="line">bar(); <span class="comment">// global variable</span></span><br></pre></td></tr></table></figure>

<h3 id="构造函数调用"><a href="#构造函数调用" class="headerlink" title="构造函数调用"></a>构造函数调用</h3><p>new functionname()构造函数调用，this 指的是构造出来的新对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bar.a); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-call、apply、bind-等方法调用"><a href="#使用-call、apply、bind-等方法调用" class="headerlink" title="使用 call、apply、bind 等方法调用"></a>使用 call、apply、bind 等方法调用</h3><p>call、apply、bind 调用，可以显示传递对象给函数的 thisArg，默认这几个函数的第一个形参是 thisArg:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.apply( thisArg, argArray )</span><br><span class="line"><span class="built_in">Function</span>.prototype.call( thisArg , arg1, [ arg2, ... ] )</span><br><span class="line"><span class="built_in">Function</span>.prototype.bind( thisArg , [ arg1, [ arg2, ... ] ] )</span><br></pre></td></tr></table></figure>

<p>需要注意的是当 thisArg 为 null 或者 undefined，在非严格模式下，this 是全局对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print.call(<span class="literal">null</span>); <span class="comment">//window</span></span><br><span class="line">print.call(<span class="literal">undefined</span>); <span class="comment">//window</span></span><br><span class="line">print.call(obj); <span class="comment">//obj</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数的-this"><a href="#箭头函数的-this" class="headerlink" title="箭头函数的 this"></a>箭头函数的 this</h2><p>箭头函数在调用的时候不会绑定 this，它会去词法环境链上寻找 this（parent scope），所以箭头函数的 this 取决于它定义的位置（包裹箭头函数的第一个普通函数的 this），也就是箭头函数会跟包着它的作用域共享一个词法作用域。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> foo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">&#125;;</span><br><span class="line">foo.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">20</span>,</span><br><span class="line">  foo: foo,</span><br><span class="line">&#125;;</span><br><span class="line">obj.foo(); <span class="comment">//10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  foo();</span><br><span class="line">&#125;</span><br><span class="line">bar.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<h2 id="回调函数的-this"><a href="#回调函数的-this" class="headerlink" title="回调函数的 this"></a>回调函数的 this</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  a: <span class="number">20</span>,</span><br><span class="line">  foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">setTimeout</span>(obj.foo, <span class="number">0</span>); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>

<p>上面代码运行结果是 10，作为回调函数的时候，传递的是函数体，并不是函数名。在执行栈里，obj.foo 已经执行完成被弹出执行栈，此时执行栈里只有全局执行上下文，setTimeout 回调函数体执行的时候 this 为全局对象。</p>
<p>要想避免这种情况，有两种方法，第一种方法是使用 bind 返回的指定好 this 绑定的函数作为回调函数传入：</p>
<ul>
<li>使用 bind 指定 this</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(obj.foo.bind(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;), <span class="number">0</span>); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用箭头函数</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.a);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> arrowFn = foo.call(&#123; <span class="attr">a</span>: <span class="number">20</span> &#125;);</span><br><span class="line">arrowFn(); <span class="comment">// 20</span></span><br><span class="line"><span class="built_in">setTimeout</span>(arrowFn, <span class="number">0</span>); <span class="comment">//20</span></span><br></pre></td></tr></table></figure>

<h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure>

<p>在这个例子中，在 <code>createCardPicker</code>里面本身会返回一个匿名函数，这个匿名函数在倒数第二行代码的时候才会执行，这个时候<code>deck</code>并不是<code>this</code>的指向，在非严格模式的情况下，这里的<code>this</code>指的是全局对象<code>window</code>(如果是严格模式，那么<code>this</code>指向的是<code>undefined</code>)， 所以在指向代码的时候会报错而不是弹出相关的信息。</p>
<p>为了修复这里的 error，我们可以把 return 的方法改为箭头函数：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> 箭头函数的this，指向包裹它最近普通函数的this</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure>

<p>或者，我们可以用 bind 来绑定 this:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">suit</span>: <span class="built_in">this</span>.suits[pickedSuit], <span class="attr">card</span>: pickedCard % <span class="number">13</span> &#125;;</span><br><span class="line">    &#125;.bind(<span class="built_in">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">var</span> pickedCard = cardPicker();</span><br><span class="line"></span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><p>箭头函数中没有 this 绑定，this 的值取决于其创建时所在词法环境链中最近的 this 绑定</p>
</li>
<li><p>非严格模式下，函数普通调用，this 指向全局对象</p>
</li>
<li><p>严格模式下，函数普通调用，this 为 undefined</p>
</li>
<li><p>函数作为对象方法调用，this 指向该对象</p>
</li>
<li><p>函数作为构造函数配合 new 调用，this 指向构造出的新对象</p>
</li>
<li><p>非严格模式下，函数通过 call、apply、bind 等间接调用，this 指向传入的第一个参数, 传入的第一个参数若为 undefined 或 null，this 指向全局对象</p>
</li>
<li><p>格模式下函数通过 call、apply、bind 等间接调用，this 严格指向传入的第一个参数</p>
</li>
</ul>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 模拟实现call apply bind方法</title>
    <url>/2022/06/30/JavaScript%20%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0call%20apply%20bind%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h1 id="JavaScript-模拟实现-call-apply-bind-方法"><a href="#JavaScript-模拟实现-call-apply-bind-方法" class="headerlink" title="JavaScript 模拟实现 call apply bind 方法"></a>JavaScript 模拟实现 call apply bind 方法</h1><p>首先来说下这三个的区别：</p>
<ul>
<li><code>call</code> <code>apply</code>都是为了解决 this 的指向，默认第一参数是 this 的指向，剩下的参数是函数形参，<code>call</code>接收的形参是一个列表用逗号隔开，<code>apply</code>接收的是一个参数数组。</li>
<li><code>call</code> <code>apply</code>改变函数的 this 指向以后立马执行该函数，而<code>bind</code>是返回一个绑定上下文的新函数，后续再执行。</li>
<li>bind 函数返回的新函数不可以再通过 apply call 改变它的 this 指向。</li>
</ul>
<span id="more"></span>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.call(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">// fuck 24 1; 立即执行</span></span><br><span class="line">getValue.apply(a, [<span class="string">&quot;shit&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">// shit 24 1；立即执行</span></span><br><span class="line">getValue.bind(a)(<span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">// fuck 24 1；(&#x27;fuck&#x27;, &#x27;24&#x27;)这部分才是执行函数</span></span><br><span class="line">getValue.bind(a)([<span class="string">&quot;shit&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">// [&#x27;shit&#x27;, &#x27;24&#x27;] undefined 1；([&#x27;shit&#x27;, &#x27;24&#x27;])才是执行函数</span></span><br></pre></td></tr></table></figure>

<h2 id="模拟实现-call"><a href="#模拟实现-call" class="headerlink" title="模拟实现 call"></a>模拟实现 call</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  <span class="comment">// 给 context 添加一个属性</span></span><br><span class="line">  <span class="comment">// getValue.call(a, &#x27;fuck&#x27;, &#x27;24&#x27;) =&gt; a.fn = getValue</span></span><br><span class="line">  context.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="comment">// 将 context 后面的参数取出来</span></span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// getValue.call(a, &#x27;fuck&#x27;, &#x27;24&#x27;) =&gt; a.fn(&#x27;fuck&#x27;, &#x27;24&#x27;)</span></span><br><span class="line">  <span class="keyword">var</span> result = context.fn(...args);</span><br><span class="line">  <span class="comment">// 删除 fn</span></span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myCall(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure>

<h2 id="模拟实现-apply"><a href="#模拟实现-apply" class="headerlink" title="模拟实现 apply"></a>模拟实现 apply</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> context = context || <span class="built_in">window</span>;</span><br><span class="line">  context.fn = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">    result = context.fn(...arguments[<span class="number">1</span>]);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = context.fn();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> context.fn;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myApply(a, [<span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>]); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure>

<h2 id="模拟实现-bind"><a href="#模拟实现-bind" class="headerlink" title="模拟实现 bind"></a>模拟实现 bind</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _this = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments].slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> <span class="keyword">instanceof</span> F) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> _this(...args, ...arguments);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _this.apply(context, args.concat(...arguments));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  value: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value);</span><br><span class="line">&#125;</span><br><span class="line">getValue.myBind(a, <span class="string">&quot;fuck&quot;</span>, <span class="string">&quot;24&quot;</span>)(); <span class="comment">//fuck 24 1</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown 基本语法</title>
    <url>/2020/12/21/Markdown%20%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<h1 id="Markdown-基本语法"><a href="#Markdown-基本语法" class="headerlink" title="Markdown 基本语法"></a>Markdown 基本语法</h1><h5 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h5><h6 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h6><ul>
<li>一级标题 #</li>
<li>二级标题 ##</li>
<li>三级标题 ###</li>
<li>四级标题 ####</li>
<li>以此类推</li>
</ul>
<span id="more"></span>

<h6 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h6><ul>
<li>有序列表</li>
</ul>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">1</span>. 文本<span class="number">1</span></span><br><span class="line"><span class="attribute">2</span>. 文本<span class="number">2</span></span><br><span class="line"><span class="attribute">3</span>. 文本<span class="number">3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>无序列表</li>
</ul>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="bullet">- </span>文本1</span><br><span class="line"><span class="bullet">- </span>文本2</span><br><span class="line"><span class="bullet">- </span>文本3</span><br></pre></td></tr></table></figure>

<h6 id="链接和图片"><a href="#链接和图片" class="headerlink" title="链接和图片"></a>链接和图片</h6><figure class="highlight less"><table><tr><td class="code"><pre><span class="line">链接：</span><br><span class="line"><span class="selector-attr">[文本]</span>（<span class="selector-tag">http</span>:<span class="comment">//*****.com）</span></span><br><span class="line">图片</span><br><span class="line">！<span class="selector-attr">[]</span>(<span class="attribute">http</span>:<span class="comment">//upload-images***)</span></span><br></pre></td></tr></table></figure>

<h6 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h6><ul>
<li><p>在我们写作的时候经常需要引用他人的文字，这个时候引用这个格式就很有必要了，在 Markdown 中，你只需要在你希望引用的文字前面加上 <code>&gt;</code> 就好了，例如：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; 我帅，我说什么都对！</span><br></pre></td></tr></table></figure>

<p>最终显示的结果是</p>
<blockquote>
<p>我帅，我说什么都对！</p>
</blockquote>
</li>
</ul>
<h6 id="粗体和斜体"><a href="#粗体和斜体" class="headerlink" title="粗体和斜体"></a>粗体和斜体</h6><ul>
<li>Markdown 的粗体和斜体也非常简单，用两个 <code>*</code> 包含一段文本就是粗体的语法，用一个 <code>*</code> 包含一段文本就是斜体的语法。例如：</li>
</ul>
<p>粗体：</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line">*<span class="strong">*我帅，我说什么都对！*</span><span class="strong">*</span></span><br></pre></td></tr></table></figure>

<p>结果:</p>
<p><strong>我帅，我说什么都对！</strong></p>
<p>斜体：</p>
<figure class="highlight asciidoc"><table><tr><td class="code"><pre><span class="line"><span class="strong">*我帅，我说什么都对！*</span></span><br></pre></td></tr></table></figure>

<p>结果：</p>
<pre><code>*我帅，我说什么都对！*</code></pre>
<h6 id="代码引用"><a href="#代码引用" class="headerlink" title="代码引用"></a>代码引用</h6><p>需要引用代码时，如果引用的语句只有一段，不分行，可以用 ` 将语句包起来。 如果引用的语句为多行，可以将```置于这段代码的首行和末行。</p>
<ul>
<li><p>一段不分行：</p>
<pre><code>`hello word!`</code></pre>
</li>
<li><p>多段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">第一段代码</span><br><span class="line">第二段代码</span><br><span class="line">第三段代码</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h6 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h6><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">|<span class="string"> 表格 </span>|<span class="string"> first </span>|<span class="string"> second </span>|</span><br></pre></td></tr></table></figure>

<p>显示效果：</p>
<table>
<thead>
<tr>
<th>表格</th>
<th>first</th>
<th>second</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h6 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h6><pre><code>掌握了这些基本语法基本上可以愉快的用Markdown写文章了！</code></pre>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 01 RedHat的安装与设置</title>
    <url>/2018/03/10/Linux%2001%20RedHat%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E8%AE%BE%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="Linux01-RedHat-的安装与设置"><a href="#Linux01-RedHat-的安装与设置" class="headerlink" title="Linux01 RedHat 的安装与设置"></a>Linux01 RedHat 的安装与设置</h1><h2 id="虚拟机安装-RedHat"><a href="#虚拟机安装-RedHat" class="headerlink" title="虚拟机安装 RedHat"></a>虚拟机安装 RedHat</h2><p>以下是截图演示，所有没有截图的均为直接点击下一步</p>
<span id="more"></span>

<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174548313.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>这里的名字密码个人喜好</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174548397.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180310105018463?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzk5NDM2ODI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>桥接等同于与自己的电脑共用 ip，此处我选择 NAT</p>
<p><img src="https://img-blog.csdn.net/2018031010503778?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzk5NDM2ODI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174548640.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>由于我是新手，安装中文版，所以连接选择使用物理驱动器，便于下面的语言选择</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174548736.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180310105129115?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzk5NDM2ODI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>选择 Skip</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174548925.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180310105159134?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzk5NDM2ODI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>直接跳过安装号码，23333……</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174549034.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>这里是 root 账户的密码，建议复杂一些</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174549112.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174549158.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730174549269.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>虚拟机安装 RedHat 演示完毕！</p>
<p><strong>后记：Ctrl+alt +(F1~F6)为六个命令界面</strong></p>
<p><strong>Ctrl+alt + F7 可视桌面</strong></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 基础01</title>
    <url>/2019/05/16/Linux%20%E5%9F%BA%E7%A1%8001/</url>
    <content><![CDATA[<h1 id="Linux-基础01"><a href="#Linux-基础01" class="headerlink" title="Linux 基础01"></a>Linux 基础01</h1><p>学自尚硅谷——韩顺平Linux教程，个人感觉这套教程深入浅出，非常适合Linux初学者，以下是学下过程中的笔记，以备日后复习使用</p>
<h2 id="vi和vim的基本介绍"><a href="#vi和vim的基本介绍" class="headerlink" title="vi和vim的基本介绍"></a>vi和vim的基本介绍</h2><h3 id="正常模式"><a href="#正常模式" class="headerlink" title="正常模式"></a>正常模式</h3><ul>
<li>用vim打开一个文档直接进入正常模式</li>
</ul>
<h3 id="插入-编辑模式"><a href="#插入-编辑模式" class="headerlink" title="插入/编辑模式"></a>插入/编辑模式</h3><span id="more"></span>

<ul>
<li>按下i，I，o，O，a，A，r，R等任意一个字母进入此模式，一般来说按i即可。</li>
</ul>
<h3 id="命令行模式"><a href="#命令行模式" class="headerlink" title="命令行模式"></a>命令行模式</h3><ul>
<li>在此模式下，可以提供你相关指令，完成读取，存盘，替换，离开vim，显示行号等动作。</li>
</ul>
<h3 id="vi和vim三种模式的相互转化图"><a href="#vi和vim三种模式的相互转化图" class="headerlink" title="vi和vim三种模式的相互转化图"></a>vi和vim三种模式的相互转化图</h3><p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/824e1118ee754dc4211884de640c9dd3.jpeg" alt="img"></p>
<h3 id="快捷键的使用"><a href="#快捷键的使用" class="headerlink" title="快捷键的使用"></a>快捷键的使用</h3><ol>
<li>拷贝当前行 <code>yy</code> ，拷贝当前行向下的5行 <code>5yy</code> ,并粘贴<code>p</code></li>
<li>删除当前行 <code>dd</code>，删除当前行向下的5行 <code>5dd</code></li>
<li>查询某个关键词 <code>/关键词</code> ，回车查找，按n就是查找下一个</li>
<li>设置文件的行号，取消文件的行号，命令行下 <code>:set nu</code> 和 <code>:set nonu</code></li>
<li>使用快捷键到文档最末行 <code>G</code> ，到文章首行<code>gg</code></li>
<li>撤销输入，正常模式下输入<code>u</code></li>
<li>将光标定位到第20行 ：<code>set nu</code> 显示行号，输入<code>20</code>，按shift+g</li>
</ol>
<h2 id="关机重启命令"><a href="#关机重启命令" class="headerlink" title="关机重启命令"></a>关机重启命令</h2><h3 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h3><ul>
<li><p><code>shutdown -h now</code>    立即关机</p>
<p><code>shutdown -h 1</code>        表示1分钟后关机<br> <code>shutdown -r now</code>        立即重启</p>
</li>
</ul>
<h3 id="halt"><a href="#halt" class="headerlink" title="halt"></a>halt</h3><ul>
<li>直接使用，等价于关机</li>
</ul>
<h3 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h3><ul>
<li>重启系统</li>
</ul>
<h3 id="syn"><a href="#syn" class="headerlink" title="syn"></a>syn</h3><ul>
<li>将内存数据同步到磁盘</li>
</ul>
<h2 id="用户登录和注销"><a href="#用户登录和注销" class="headerlink" title="用户登录和注销"></a>用户登录和注销</h2><ol>
<li><code>su - 用户名</code>，切换到指定用户</li>
</ol>
<ul>
<li>ps:从权限高的切换到权限低的，不需要输入密码，反之需要，当返回到原来用户时使用exit</li>
</ul>
<ol>
<li><code>logout</code>即可注销用户</li>
</ol>
<h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><ul>
<li><code>useradd 用户名</code></li>
<li>ps:当创建用户成功后，会自动创建和用户同名的家目录</li>
<li>也可通过 <code>useradd -d </code>指定目录 新用户吗，给新创建的用户指定家目录</li>
</ul>
<h3 id="给用户指定或修改密码"><a href="#给用户指定或修改密码" class="headerlink" title="给用户指定或修改密码"></a>给用户指定或修改密码</h3><p><code>passwd 用户名</code></p>
<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><ul>
<li><p><code>userdel 用户名</code>        删除用户，但保留家目录</p>
<p><code>userdel -r 用户名</code>        删除用户以及用户主目录</p>
</li>
<li><p>ps:在删除用户时，我们一般不会将家目录删除</p>
</li>
</ul>
<h3 id="查询用户信息"><a href="#查询用户信息" class="headerlink" title="查询用户信息"></a>查询用户信息</h3><ul>
<li><code>id 用户名</code></li>
</ul>
<h2 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h2><h3 id="增加组"><a href="#增加组" class="headerlink" title="增加组"></a>增加组</h3><ul>
<li><code>groupadd 组名</code></li>
</ul>
<h3 id="删除组"><a href="#删除组" class="headerlink" title="删除组"></a>删除组</h3><ul>
<li><code>groupdel 组名</code></li>
</ul>
<h3 id="增加用户时直接加上组"><a href="#增加用户时直接加上组" class="headerlink" title="增加用户时直接加上组"></a>增加用户时直接加上组</h3><ul>
<li><code>useradd -g 用户组 用户名</code></li>
</ul>
<h3 id="修改用户组"><a href="#修改用户组" class="headerlink" title="修改用户组"></a>修改用户组</h3><ul>
<li><code>usermod -g 用户组 用户名</code></li>
</ul>
<h3 id="etc-passwd文件"><a href="#etc-passwd文件" class="headerlink" title="/etc/passwd文件"></a>/etc/passwd文件</h3><ol>
<li>用户(user)的配置文件，记录用户的各种信息</li>
<li>每行的含义：用户名：口令：用户标识号：组标识号：注释性描述：主目录：登录 Shell</li>
</ol>
<h3 id="etc-shadow文件"><a href="#etc-shadow文件" class="headerlink" title="/etc/shadow文件"></a>/etc/shadow文件</h3><ol>
<li>口令的配置文件</li>
<li>每行的含义：登录名：加密口令：最后一次修改时间：最大时间间隔：警告时间：不活动时间：失效时间：标志</li>
</ol>
<h3 id="etc-group文件"><a href="#etc-group文件" class="headerlink" title="/etc/group文件"></a>/etc/group文件</h3><ol>
<li>组(group)的配置文件，记录Linux包含的组的信息</li>
<li>每行的含义：组名：口令：组标识符：组内用户列表</li>
</ol>
<h2 id="指定运行级别"><a href="#指定运行级别" class="headerlink" title="指定运行级别"></a>指定运行级别</h2><h3 id="运行级别说明"><a href="#运行级别说明" class="headerlink" title="运行级别说明"></a>运行级别说明</h3><ul>
<li>0：关机</li>
<li>1：单用户【找回丢失密码】</li>
<li>2：多用户状态没有网络服务</li>
<li>3：多用户状态有网络服务</li>
<li>4：保留，还没有开发</li>
<li>5：图形界面</li>
<li>6：系统重启</li>
<li>ps：常用运行级别是3和5，要修改默认运行基本可修改文件/etc/inittab中的id:5:initdefault;这一行的数字</li>
</ul>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><ul>
<li>通过init来切换不同的运行级别，例如<code>init 3</code></li>
</ul>
<h4 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h4><ul>
<li>找回root密码：</li>
<li>答案：开机-&gt;引导时 按回车-&gt;看到一个界面 按e-&gt;看到一个新的界面，选中第二行（编辑内核） 按e-&gt;在最后一行输入 1，按回车-&gt;按b 进入单用户模式-&gt;passwd root</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 基础02</title>
    <url>/2019/05/17/Linux%20%E5%9F%BA%E7%A1%8002/</url>
    <content><![CDATA[<h1 id="Linux-基础-02"><a href="#Linux-基础-02" class="headerlink" title="Linux 基础 02"></a>Linux 基础 02</h1><h2 id="实用指令"><a href="#实用指令" class="headerlink" title="实用指令"></a>实用指令</h2><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><ul>
<li><code>man [命令或配置文件]</code> （功能描述：获得帮助信息）</li>
</ul>
<h3 id="help"><a href="#help" class="headerlink" title="help"></a>help</h3><ul>
<li><code>help [命令] </code>（功能描述：获得 shell 内置命令的帮助信息）</li>
</ul>
<h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><ul>
<li><code>pwd</code>（功能描述：显示当前工作目录的绝对路径）</li>
</ul>
<h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><span id="more"></span>

<ul>
<li><code>ls [选项] [目录或文件]</code></li>
<li>常用选项：</li>
<li><code>-a</code>：显示当前目录所有的文件和目录，包括隐藏的</li>
<li><code>-l</code>：以列表的方式显示信息</li>
</ul>
<h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><ul>
<li><code>cd [参数]</code>（功能描述：切换到指定目录）</li>
<li><code>cd ~</code>：回到自己的家目录</li>
<li><code>cd..</code>：回到当前目录的上一级目录</li>
<li>ps：绝对路径与相对路线</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/15766abc9797e701f27eed38ae244043.jpeg" alt="img"></p>
<h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><ul>
<li><code>mkdir [选项] 要创建的目录</code>（功能描述：用于创建目录 make directory）</li>
</ul>
<h4 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h4><ul>
<li><code>-p</code>：创建多级目录</li>
</ul>
<h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><ul>
<li><code>rmdir [选项] 要删除的空目录</code>（功能描述：删除空目录）</li>
<li>ps：rmdir 删除的是空目录，如果目录下有内容时无法删除</li>
<li>ps：如果需要删除非空目录，则需要使用 <code>rm -rf [要删除的目录]</code></li>
</ul>
<h3 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h3><ul>
<li><code>touch [文件名称]</code> （功能描述：创建空文件）</li>
</ul>
<h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><ul>
<li><code>cp [选项] source desk</code>（功能描述：拷贝文件到指定目录）</li>
</ul>
<h4 id="常用选项-1"><a href="#常用选项-1" class="headerlink" title="常用选项"></a>常用选项</h4><ul>
<li><code>-r</code>：递归复制整个文件夹</li>
<li>ps ：<code>\cp -r xxx/ yyy/</code>：将 xxx 文件夹复制到 yyy 文件夹，如果 yyy 文件夹已有 xxx 文件夹则直接覆盖，并且不提示（因为<code>cp</code>前加了<code>\</code>）</li>
</ul>
<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><ul>
<li><code>rm [选项] 要删除的文件夹或目录</code>（功能描述：移除【删除】文件夹或目录）</li>
</ul>
<h4 id="常用选项-2"><a href="#常用选项-2" class="headerlink" title="常用选项"></a>常用选项</h4><ul>
<li><code>-r</code>：递归删除整个文件夹</li>
<li><code>-f</code>：强制删除并且不提示</li>
</ul>
<h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><ul>
<li><code>mv oldNameFile newNameFile</code>（功能描述：重命名）</li>
<li><code>mv /temp/movefile /targetFolder</code>（功能描述：移动文件夹）</li>
</ul>
<h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><ul>
<li><code>cat [选项] 要查看的文件</code>（功能描述：查看文件内容，以只读的方式打开）</li>
</ul>
<h4 id="常用选项-3"><a href="#常用选项-3" class="headerlink" title="常用选项"></a>常用选项</h4><ul>
<li><code>-n</code>：显示行号</li>
<li>ps：cat 只能浏览文件，而不能修改文件，为了浏览方便，一般会带上管道指令<code>|more</code>：<code>cat 文件名 |more</code></li>
</ul>
<h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><ul>
<li><code>more 要查看的文件</code> （功能描述：它以全屏幕的方式按页显示文本文件内容）</li>
<li>ps：快捷键</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/2ba96d2e9c12ee8def9347a2bbdcf0e7.jpeg" alt="img"></p>
<h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><ul>
<li><code>less 要查看的指令</code> （功能描述：用来分屏查看文件内容，与 more 类似，但比 more 的指令更加强大，由于并不是将整个文件加载后才显示，所以对于显示大型文件具有更高的效率）</li>
<li>ps：快捷键</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/e08cb2a071d78c20d8e9ba2ece2b69c8.jpeg" alt="img"></p>
<h3 id="gt-指令-和-gt-gt-指令"><a href="#gt-指令-和-gt-gt-指令" class="headerlink" title="&gt;指令 和 &gt;&gt;指令"></a>&gt;指令 和 &gt;&gt;指令</h3><ul>
<li><code>&gt;</code> （功能描述：输出重定向，将与哪来的文件内容覆盖）</li>
<li><code>&gt;&gt;</code> （功能描述：不会覆盖原来文件的内容，而是追加到文件的尾部）</li>
</ul>
<h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h3><ul>
<li><code>echo [选项] [输出内容]</code>（功能描述：输出内容到控制台）</li>
</ul>
<h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><ul>
<li><code>head 文件</code> （功能描述：查看文件头 10 行内容）</li>
<li><code>head -n 5 文件</code> （功能描述：查看文件头 5 行内容）</li>
</ul>
<h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><ul>
<li><code>tail 文件</code> （功能描述：查看文件后 10 行内容）</li>
<li><code>tail -n 5 文件</code> （功能描述：查看文件后 5 行内容）</li>
<li><code>tail -f 文件</code> （功能描述：实时追踪该文档的所有更新，工作中常用）</li>
</ul>
<h3 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h3><ul>
<li><code>ln -s [原文件或目录] [软链接名]</code> （功能描述：给原文件创建一个软连接（类似于 windows 中的快捷方式））</li>
<li>ps：想要删除软链接名 <code>rm -fr 软链接名</code> （软链接名后面不能有\）</li>
</ul>
<h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><ul>
<li><code>history</code> （功能描述：查看已经执行过的历史指令）</li>
<li><code>history 10</code> （功能描述：查看最近使用的 10 个指令）</li>
<li><code>![history中历史指令的编号]</code> （功能描述：再次执行该编号指令）</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 02 常用命令与用户管理</title>
    <url>/2018/03/11/Linux%2002%20%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B8%8E%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="Linux-02-常用命令与用户管理"><a href="#Linux-02-常用命令与用户管理" class="headerlink" title="Linux 02 常用命令与用户管理"></a>Linux 02 常用命令与用户管理</h1><p>man :显示命令手册</p>
<p>我们以 ls 命令为例，输入 man ls ,出现如下图关于 ls 命令的所有使用方法，按 q 退出。</p>
<span id="more"></span>

<p><img src="https://img-blog.csdn.net/20180401124145863?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>tar :解压命令，可参考上一篇解压安装 VmwareTools</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040447.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>diff :比较出两个文件内容的不同</p>
<p>这里我随意比较 /bin 和 /dev 两个文件夹</p>
<p>输入 diff /bin /dev</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040483.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>whereis :寻找文件的位置</p>
<p>这里寻找 rpm 的位置</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040529.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>find :模糊查找</p>
<p>如图查找/bin 下面 sh 结尾的文件</p>
<p><img src="https://img-blog.csdn.net/20180401124259317?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>date 与 cal :显示时间和日期，想要 cal 显示特定的日期需要输入月份和年份</p>
<p><img src="https://img-blog.csdn.net/2018040112431099?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>df :查看分区的占用情况</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040639.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>ps :查看系统进程</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040658.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>kill :终止命令，类似于 window 任务管理器里面的结束进程。</p>
<p>前台用 ctrl+c 可以强制终止</p>
<p>top :监控进程，5 秒刷新一次</p>
<p>top -d 20 则是每 20 秒刷新一次</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040709.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>shutdown 关机 -r 重启</p>
<p>init6 重启</p>
<p>reboot 重启</p>
<p>halt 停止系统，不关电源</p>
<p>poweroff 停止系统，关闭电源</p>
<p>用户相关配置文件有 passwd 和 shadow，我们通过 cat 命令查看，如图</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040746.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>每一个用户都有一个唯一的身份标识，称为用户 ID（UID）；每一个用户组也有一个唯一的身份标识，称为用户组 ID（GID）。</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040818.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>useradd :新建用户</p>
<p>useradd yy，新建一个名为 yy 的用户，passwd yy 给用户设定密码</p>
<p>在 passwd 中查看</p>
<p><img src="https://img-blog.csdn.net/20180401133659321?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在 shadow 中查看，冒号中的为加密密码，可以修改</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040912.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040926.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑可以正常登陆</p>
<p>可以用 vi 命令修改 shadow 文件修改用户信息，如图</p>
<p>vi/etc/shadow 按 i 开始编辑，Esc 退出编辑，</p>
<p>shift+：wq！ 然后 Enter 强制保存退出</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180040961.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><strong>用户帐户文件：</strong></p>
<p>/etc/passwd 文件：用户帐户信息</p>
<p>/etc/shadow 文件：用户口令</p>
<p><strong>组群文件：</strong></p>
<p>/etc/group 文件：组群帐户信息</p>
<p>/etc/gshadow 文件：组群口令、管理员等管理信息</p>
<p><strong>创建一个新的用户组文件</strong>：</p>
<p>groupadd :新建用户组文件</p>
<p><img src="https://img-blog.csdn.net/2018041709294114?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>gpasswd -a 用户名 testgroup :将用户加入到组文件</p>
<p>gpasswd -A 用户名 testgroup：将用户指派为管理员</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730180041021.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 03 文件系统和磁盘管理</title>
    <url>/2018/03/15/Linux%2003%20%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="Linux-03-文件系统和磁盘管理"><a href="#Linux-03-文件系统和磁盘管理" class="headerlink" title="Linux 03 文件系统和磁盘管理"></a>Linux 03 文件系统和磁盘管理</h1><p>文件系统和磁盘管理</p>
<p>权限问题</p>
<p>执行 ls –l 命令后所显示的结果.最前面的第 2~10 个字符用来标示权限;第 1 个字符用于区别文件和目录. 如图</p>
<span id="more"></span>

<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181720138.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rwx–rwx–rwx (r:读 w:写 x:执行)</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181720230.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>第一个 rwx 表示文件或目录的拥有者所拥有的权限，代号为 u(User)</p>
<p>第二个 rwx 表示同组的用户对该文件和目录的权限，代号为 g(group)</p>
<p>第三个 rwx 表示其他用户对该文件和目录的权限，代号为 o(other)</p>
<p>磁盘管理</p>
<p>首先我们先给虚拟机添加一块磁盘（我添加了 10G），如图，无脑下一步就行。</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181720432.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>fdisk 是一个功能强大的磁盘管理工具</p>
<p>fdisk -l :查看磁盘设备</p>
<p><img src="https://img-blog.csdn.net/20180418210314502?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>sda1 与 sda2 是当前已经分区的磁盘，刚刚加上的磁盘由于没有分区所以并不会在这里显示</p>
<p>df:显示磁盘分区上可使用的磁盘空间，sdb 没有挂载所以不会显示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181720681.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>fdisk /dev/sdb :调用分区工具对硬盘分区</p>
<p><img src="https://img-blog.csdn.net/20180418210340122?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>m 显示命令帮助</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181720947.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181721058.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>输入 n 新建分区(e 是扩展分区，p 是主分区)</p>
<p><img src="https://img-blog.csdn.net/20180418210421679?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>分配盘符(1~4)，分配空间，按提示操作</p>
<p><img src="https://img-blog.csdn.net/20180418210444800?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>我建了三个主分区一个扩展分区</p>
<p><img src="https://img-blog.csdn.net/20180418210453843?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>最后输入 w 保存，然后重启虚拟机使其生效</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181721477.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>重启后 fdisk-l，显示出了 sdb</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181721655.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然而 df 依旧没有显示，是由于磁盘没有挂载</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181721858.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>挂载首先要建立文件系统，使用 mkfs 命令建立文件系统（建立文件系统的过程类似于格式化）</p>
<p>格式：mkfs [磁盘格式]&lt;设备名&gt;，linux 中磁盘格式为 ext3</p>
<p>mkfs -t ext3 /dev/sdb1 如图成功</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181722031.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>mkdir /test :新建一个 test 文件夹（为挂载 sdb1 做准备）</p>
<p>mount /dev/sdb1 /test :挂载 sdb1 到/test</p>
<p><img src="https://img-blog.csdn.net/20180418210649790?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>现在如此重启后就不会显示挂载了，我们必须修改配置文件。</p>
<p>vi /etc/fstab</p>
<p><img src="https://img-blog.csdn.net/20180527222905323?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后重新挂载</p>
<p>mount -o remount /test</p>
<p>然后重启就会显示了</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181722557.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181722734.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>磁盘配额</p>
<p>软限制：超过配额后警告，但仍可以使用</p>
<p>硬限制：不可以超过配额</p>
<p>宽限期：用户超过软限制后文件仍可以使用的期限，一般为 7 天</p>
<p>创建四个用户做实验，分别为 test1，test2，test3，test4</p>
<p>创建一个用户组 group1，将 test1，test2，test3 加入组中</p>
<p>quotacheck -cmug /test :生成用户与组的配额文件</p>
<p>quotaon /test :开启配额功能</p>
<p>edquota -g group1 :编辑组的配额</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181722811.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>第一个 soft 和 hard 是限制文件大小（大小为 k）</p>
<p>第二个 soft 和 hard 是限制文件数量</p>
<p>edquota -u test4 :编辑用户的配额</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181722911.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后我们测试</p>
<p>dd if=/dev/zero of=/data/newfilebs=16k count=1</p>
<p>16k&gt;15k（软限制），所以会 warning 警报</p>
<p><img src="https://img-blog.csdn.net/20180509234347842?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>dd if=/dev/zero of=/data/newfilebs=40k count=1</p>
<p>40k&gt;20k（硬限制），所以会 writefailed 写入失败</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181723198.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 04 网络配置与FTP</title>
    <url>/2018/03/19/Linux%2004%20%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE%E4%B8%8EFTP/</url>
    <content><![CDATA[<h1 id="Linux-04-网络配置与-FTP"><a href="#Linux-04-网络配置与-FTP" class="headerlink" title="Linux 04 网络配置与 FTP"></a>Linux 04 网络配置与 FTP</h1><p>网络配置</p>
<p>/etc/sysconfig/network</p>
<p>主要用于设置基本网络配置，包括主机名称、网关等</p>
<span id="more"></span>

<p>/etc/sysconfig/nework-scripts/ifcfg-ethN</p>
<p>该配置文件是网卡配置文件，保存了网卡设备名、IP 地址、子网掩码、网关等配置信息。</p>
<p>可视化界面查看网卡步骤如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181940619.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>显示 eth0 一块网卡</p>
<p><img src="https://img-blog.csdn.net/20180509233427984?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>现在是 DHCP 自动分配 ip</p>
<p><img src="https://img-blog.csdn.net/20180509233439927?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>我们要再添加一块网卡，可视化步骤如下：</p>
<p>新建然后一直点前进</p>
<p><img src="https://img-blog.csdn.net/20180509233526244?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180509233546595?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>这里我们可以尝试手动配置 ip 地址等</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181940843.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180509233611701?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>点击激活即可</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181940895.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service network restart :重置网络服务</p>
<p><img src="https://img-blog.csdn.net/20180509233637128?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>这样可视化添加网卡就完成了</p>
<p>命令行添加网卡</p>
<p>cd /etc/sysconfig/network-scripts/ :进入配置文件</p>
<p><img src="https://img-blog.csdn.net/20180509233710804?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>找到 ifcfg-eth0 文件后</p>
<p>cp ifcfg-eth0 ifcfg-eth0:1 : 复制一份文件出来</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181940997.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>vi ifcfg-eth0:1 :修改 eth0:1 配置</p>
<p>顺便给它配个 ip</p>
<p><img src="https://img-blog.csdn.net/20180509233734433?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>ifup eth0:1 :激活网卡 eth0:1</p>
<p>service network restart :重置服务</p>
<p><img src="https://img-blog.csdn.net/20180509233753696?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>ifconfig :显示状态</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941077.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>显示出 eth0:1 配置完成</p>
<p><strong>FTP 服务器配置</strong></p>
<p>简单的来说 ftp 就是传文件的，具体可以百度</p>
<p>百度百科：</p>
<p><a href="https://baike.baidu.com/item/FTP%E6%9C%8D%E5%8A%A1%E5%99%A8">FTP 服务器_百度百科</a></p>
<p>wikipedia：</p>
<p><a href="https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE</a></p>
<p>在 Linux 中比较普遍运用的是 vsftpd</p>
<p>rpm -q vsftpd :首先我们测试是否安装了 vsftpd</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941092.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>mount /dev/sr1 /mnt/ftp</p>
<p>首先将光盘挂载到 /mnt/ftp（ftp 是我做自己建的文件夹）</p>
<p><img src="https://img-blog.csdn.net/20180514221322433?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>cd /mnt/ftp :进入 ftp 文件夹</p>
<p>ls :列出内部文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941152.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>cd Server : 进入 Server 文件夹</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941184.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>find vsf* : 寻找 vsf 前缀的文件</p>
<p><img src="https://img-blog.csdn.net/20180514221445841?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh vsftpd-2.0.5-24.el5.i386.rpm ：安装相应的软件包（可以先写 vsft 然后按 tab 键自动补全）</p>
<p><img src="https://img-blog.csdn.net/20180514221455389?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service vsftpd start : 启动 ftp 服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941255.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service iptables stop :关闭防火墙</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941272.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>测试实体机与虚拟机之间能否 ping 通</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941338.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941414.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>此时已经可以访问</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941431.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941449.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><strong>配置 FTP</strong></p>
<p>/etc/vsftpd/vsftpd.conf :vsftpd 的主配置文件，配置 ftp 的主要工作要通过修改此文件来完成</p>
<p>配置监听地址与控制端口</p>
<p>vi /etc/vsftpd/vsftpd.conf :编辑配置文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941492.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>有时候不用 FTP 默认的 21 端口，这个时候就要修改//配置文件，我们想要设置 2121 端口就要在 listen=YES 下添加一行：</p>
<p>listen_port=2121</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941524.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后重新启动</p>
<p>配置匿名用户</p>
<p>默认匿名用户是开启的</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941542.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>匿名登录用户和密码都可以是 ftp</p>
<p><img src="https://img-blog.csdn.net/20180521225515439?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>接下来配置匿名用户的根目录</p>
<p>现在/var 下建一个 ftp666 并在 ftp666 下建个文件作为验证作为匿名用户的根目录</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941603.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后编辑配置文件</p>
<p>anon_root=/var/ftp/ftp666 :添加路径</p>
<p>anon_upload_enable=YES :允许匿名用户上传文件</p>
<p><img src="https://img-blog.csdn.net/20180521225604700?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>重启 vsftpd，然后匿名登录</p>
<p><img src="https://img-blog.csdn.net/20180521225617896?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>登录可见验证文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941690.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>配置本地用户</p>
<p>关闭匿名登录</p>
<p><img src="https://img-blog.csdn.net/20180522223544505?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>本地用户默认开启，指定本地用户目录</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941722.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>限制用户目录只能在本人目录内，在配置文件中修改</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941737.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>编辑 chroot_list 文件，在其中添加限制用户</p>
<p><img src="https://img-blog.csdn.net/20180522223602458?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后重启服务，用限制用户登录验证</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730181941773.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 05 DHCP与DNS</title>
    <url>/2018/03/22/Linux%2005%20DHCP%E4%B8%8EDNS/</url>
    <content><![CDATA[<h1 id="Linux-05-DHCP-与-DNS"><a href="#Linux-05-DHCP-与-DNS" class="headerlink" title="Linux 05 DHCP 与 DNS"></a>Linux 05 DHCP 与 DNS</h1><p><strong>DHCP 服务器配置</strong></p>
<p>简单的来说 DHCP 就是自动分配 ip 地址的</p>
<p>百度百科 ：</p>
<p><a href="https://baike.baidu.com/item/DHCP">DHCP_百度百科</a></p>
<p>wikipedia：</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE%E5%8D%8F%E8%AE%AE">https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E8%AE%BE%E7%BD%AE%E5%8D%8F%E8%AE%AE</a></p>
<p>安装 DHCP</p>
<p>先在/mnt 下建一个 dhcp</p>
<span id="more"></span>

<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182204494.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后将光盘挂载到/mount/dhcp</p>
<p><img src="https://img-blog.csdn.net/20180522224003771?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>cd 进入 dhcp 下的 Server</p>
<p><img src="https://img-blog.csdn.net/20180522224012674?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>找到 DHCP 的程序</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182204710.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>安装 DHCP 程序</p>
<p><img src="https://img-blog.csdn.net/20180522224103607?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182204876.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>当 DHCP 主程序包安装好后会自动生成主配置文件的范本文件/usr/share/doc/dhcp-3.0.5/dhcpd. conf.sample，而在/etc 目录下会建立一个空白的 dhcpd.conf 主配置文件。现在我们将范本配置文件复制到/etc 目录下替换掉空白的 dhcpd.conf 主配置文件。</p>
<p>cp /usr/share/doc/dhcp-3.0.5/dhcpd.conf.sample /etc/dhcpd.conf</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182204925.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>接下来修改配置文件</p>
<p>vi /etc/dhcpd.conf</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182204997.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service dhcpd start :启动 dhcp 服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182205052.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><strong>DNS 没有写完，可以先不看</strong></p>
<p><strong>DNS 服务器配置</strong></p>
<p>简单的来说 DNS 是解析域名的</p>
<p>百度百科 ：</p>
<p><a href="https://baike.baidu.com/item/DNS/427444">https://baike.baidu.com/item/DNS/427444</a></p>
<p>wikipedia：</p>
<p><a href="https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F">https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F</a></p>
<p>首先检查是否安装 DNS 服务</p>
<p>rpm -qa | grep bind</p>
<p><img src="https://img-blog.csdn.net/20180524174824698?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在/mnt 下建一个 dns 文件夹，将光盘挂载到/mnt/dns</p>
<p>mount /dev/sr1 /mnt/dns :挂载</p>
<p>然后进入 dns 下的 Server</p>
<p><img src="https://img-blog.csdn.net/20180524174859694?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>find bind* :寻找与 bind 的相关的安装包</p>
<p><img src="https://img-blog.csdn.net/20180524174851477?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh bind-9.3.6-20.P1.el5.i386.rpm :安装主程序</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182205668.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh bind-utils-9.3.6-20.P1.el5.i386.rpm :DNS 测试工具，包括 dig，host 与 nslookup 等</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182205771.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh bind-chroot-9.3.6-20.P1.el5.i386.rpm :使 BIND 运行在指定的目录中的安全增强工具</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182205859.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh caching-nameserver-9.3.6-20.P1.el5.i386.rpm :高速缓存 DNS 服务器的基本配置文件，建议一定安装</p>
<p><img src="https://img-blog.csdn.net/20180524174952669?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>DNS 的配置文件在 /var/named/chroot/etc 目录下</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182206074.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>为了方便配置，我们将 named.caching-nameserver.conf cp 为 named.config</p>
<p>cp -p named.caching-nameserver.conf named.config （一定要加参数<strong>p</strong>，保留该文件的权限）</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182206151.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180524175032934?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 06 Apache服务器配置</title>
    <url>/2018/04/02/Linux%2006%20Apache%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="Linux-06-Apache-服务器配置"><a href="#Linux-06-Apache-服务器配置" class="headerlink" title="Linux 06 Apache 服务器配置"></a>Linux 06 Apache 服务器配置</h1><p>Apache 服务器配置</p>
<p>Apache 是世界使用排名第一的 Web<a href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8">服务器</a>软件。</p>
<p>百度百科 ：</p>
<p><a href="https://baike.baidu.com/item/Apache/6265">https://baike.baidu.com/item/Apache/6265</a></p>
<p>wikipedia：</p>
<p><a href="https://zh.wikipedia.org/wiki/Apache_HTTP_Server">https://zh.wikipedia.org/wiki/Apache_HTTP_Server</a></p>
<p>安装 Apache 服务</p>
<p>与之前类似，先将光盘挂载</p>
<span id="more"></span>

<p><img src="https://img-blog.csdn.net/20180524214435844?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>进入 Server 寻找安装包</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437461.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh httpd-2.2.3-63.el5.i386.rpm :安装主程序包</p>
<p>（这里可能会出现安装失败，要求安装依赖关系，按照提示安装好依赖关系后，<strong>再次</strong>安装主程序即可）</p>
<p>我之前安装过，所以不会出现这个问题</p>
<p><img src="https://img-blog.csdn.net/20180524214452851?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service httpd start :启动服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437612.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>下一步我们要验证是否成功，在浏览器中输入虚拟机的 ip 地址，出现 Apache 欢迎页则成功</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437684.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>接下来安装 webmin</p>
<p>我们将 webmin 直接拉入到虚拟机</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437726.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437821.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>webmin 在/root/Desktop 下</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437901.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh /root/Desktop/webmin-1.350-1.noarch.rpm :安装</p>
<p><img src="https://img-blog.csdn.net/20180524214604907?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>重启 httpd 服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182437998.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在浏览器中输入 ip：10000，出现如下界面</p>
<p><img src="https://img-blog.csdn.net/20180524214618909?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>root 用户登录，修改一下语言</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438105.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>开始主服务器配置</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438170.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>大概意思如下图</p>
<p><img src="https://img-blog.csdn.net/2018052421464185?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180524214647132?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438413.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>超时时间设置为 300 秒</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438589.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>设置客户连接数最大为 500</p>
<p><img src="https://img-blog.csdn.net/20180524214711555?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>这里是管理员的邮件地址</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438681.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>没有域名可以改为 ip 地址</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438713.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>更改首页名称，也可以设置多个文件，他们用空格分开</p>
<p><img src="https://img-blog.csdn.net/20180524214739676?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>设置服务器默认编码为 GB2312</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438866.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>新建用户 ht ，在/home/ht 下建立 public_html，给与文件权限</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438952.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在 public_html 下编写主页文件，内容随意</p>
<p>vi index.html</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182438985.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://img-blog.csdn.net/20180524214810870?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>setenforce 0 :临时关闭 selinux</p>
<p><img src="https://img-blog.csdn.net/20180524214817586?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service httpd restart :重启服务</p>
<p><img src="https://img-blog.csdn.net/2018052421482431?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在网页上输入 192.168.154.128/~ht/验证</p>
<p><img src="https://img-blog.csdn.net/20180524214830936?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>访问限制</p>
<p>默认情况下允许所以客户端访问，在此我们可以修改</p>
<p><img src="https://img-blog.csdn.net/20180524223349170?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>Order allow,deny</p>
<p>Deny from192.168.100.100 拒绝 ip 的访问</p>
<p>Deny from .bad.com 拒绝来自.bad.com 域的访问</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182439201.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>在此基础上可以个人发挥。</p>
<p>仅允许 192.168.0.0/24 网段，但其中 192.168.0.100 不能访问</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182439228.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>除了<a href="http://www.test.com/">www.test.com</a>不能访问，别的都能访问</p>
<p><img src="https://img-blog.csdn.net/20180524223412229?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>只允许 10.0.0.0 网段的主机访问服务器</p>
<p><img src="https://img-blog.csdn.net/20180524223419176?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>虚拟主机的配置</p>
<p>在/var/www/下建立 ip1，在 ip1 下建立 index.html 文件</p>
<p><img src="https://img-blog.csdn.net/20180524223431116?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>修改配置文件，复制上面的然后修改 ip<strong>等</strong></p>
<p><img src="https://img-blog.csdn.net/20180524223440365?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>重启服务，输入网址验证</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182439484.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>基于端口号的虚拟主机</p>
<p>创建/var/www/port8080</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182439503.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>创建 index.html 文件内容为 8080</p>
<p><img src="https://img-blog.csdn.net/20180526145919546?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>接下来修改配置文件</p>
<p>listen 添加 8080 端口</p>
<p><img src="https://img-blog.csdn.net/20180526145928358?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>添加配置文件</p>
<p><img src="https://img-blog.csdn.net/20180526145940538?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>保存，重启服务，输入验证</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182439684.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 07 Samba与iptables配置</title>
    <url>/2018/04/07/Linux%2007%20Samba%E4%B8%8Eiptables%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h1 id="Linux-07-Samba-与-iptables-配置"><a href="#Linux-07-Samba-与-iptables-配置" class="headerlink" title="Linux 07 Samba 与 iptables 配置"></a>Linux 07 Samba 与 iptables 配置</h1><p><strong>samba 服务器</strong></p>
<p>作用是实现 Lniux 与 windows 之间的资源共享</p>
<p>百度百科 ：</p>
<p><a href="https://baike.baidu.com/item/Samba">samba（软件）_百度百科</a></p>
<p>wikipedia：</p>
<p><a href="https://zh.wikipedia.org/zh/Samba">https://zh.wikipedia.org/zh/Samba</a></p>
<p>samba 服务器的安装</p>
<span id="more"></span>

<p>rpm -qa|grep samba :检查是否安装</p>
<p>老套路，挂载光盘，寻找服务以及安装</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648674.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh samba-3.0.33-3.37.el5.i386.rpm :安装主程序</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648708.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>提示必须先安装依赖关系，按照提示寻找</p>
<p>find perl*</p>
<p><img src="https://img-blog.csdn.net/20180527171303239?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>rpm -ivh perl-Convert-ASN1-0.20-1.1.noarch.rpm :安装依赖关系</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648818.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后安装主程序成功</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648894.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>service smb start :启动服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648925.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>Samba 服务的配置文件主要包括 ：</p>
<p>主配置文件 /etc/samba/smb.conf</p>
<p>密码文件 /etc/samba/smbpasswd</p>
<p>用户映射文件 /etc/samba/smbusers</p>
<p>日志文件存放 /var/log/samba/</p>
<p>Samba 服务器有 share、user、server、domain 和 ads 5 种安全模式，用来适应不同的企业服务器的需求。</p>
<p>我自己建立了一个/share ，在/share 下有个 vi 了一个 123 做验证 <strong>（这个只是一个名字，你们随便建）</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648952.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>然后修改 smb 的配置文件，在/etc/samba 下的 smb.conf</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182648991.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>组名改为 WORKGROUP</p>
<p><img src="https://img-blog.csdn.net/20180527171353349?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>WORKGROUP 就是自己电脑的工作组</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649134.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>安全模式改为 share</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649162.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>接下来就要添加共享文件的信息</p>
<p>comment 是备注</p>
<p>path 是路径</p>
<p>public 允许匿名访问</p>
<p>writable 是允许写入</p>
<p>具体格式按照配置文件写</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649194.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>保存退出，关闭防火墙与 selinux,，重启服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649235.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>输入\+ip 地址验证</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649268.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>设置用户</p>
<p>用 vi 建 smbpasswd 文件作为 samba 用户的密码文件</p>
<p><img src="https://img-blog.csdn.net/20180527180446841?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>新建一个用户名为 reading</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649380.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>将 reading 添加为 samba 账户</p>
<p><img src="https://img-blog.csdn.net/20180527180459971?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>编辑配置文件，安全模式改为 user，第二行注释掉，添加 smb passwd file =/etc/samba/smbpasswd 密码文件路径</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649446.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>valid users ：添加用户，不同用户用逗号隔开，添加组用@</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649477.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>保存重启验证</p>
<p>登录 reading</p>
<p><img src="https://img-blog.csdn.net/20180527180520418?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>设置虚拟用户</p>
<p>在配置文件中添加</p>
<p>username map =/etc/samba/smbusers</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649537.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>编辑 smbusers 文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649572.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>yy 就是 reading 用户的映射</p>
<p>保存重启用 yy 验证</p>
<p><img src="https://img-blog.csdn.net/20180527180611447?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTQzNjgy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/70-20220730182649681.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<p>Linux 访问 windows 共享文件</p>
<p>命令格式：smbclient //ip/共享文件名</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 基础01</title>
    <url>/2019/05/28/MySQL%20%E5%9F%BA%E7%A1%8001/</url>
    <content><![CDATA[<h1 id="MySQL-基础01"><a href="#MySQL-基础01" class="headerlink" title="MySQL 基础01"></a>MySQL 基础01</h1><p>学习自尚硅谷MySQL核心技术，练习所用的数据均来自尚硅谷MySQL核心技术：<a href="http://www.atguigu.com/download_detail.shtml?v=3">http://www.atguigu.com/download_detail.shtml?v=3</a></p>
<h2 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h2><h3 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h3><p><code>select 查询列表 from 表名;</code></p>
<ul>
<li>特点：</li>
</ul>
<ol>
<li>查询列表可以是：表中的字段，常量，表达式，函数</li>
<li>查询的结果是一个虚拟的表格</li>
</ol>
<h3 id="查询表中的单个字段"><a href="#查询表中的单个字段" class="headerlink" title="查询表中的单个字段"></a>查询表中的单个字段</h3><p><code>SELECT last_name From employees;</code></p>
<h3 id="查询表中的多个字段"><a href="#查询表中的多个字段" class="headerlink" title="查询表中的多个字段"></a>查询表中的多个字段</h3><span id="more"></span>

<p><code>SELECT last_name,salary,email FROM employees;</code></p>
<h3 id="查询表中的所有字段"><a href="#查询表中的所有字段" class="headerlink" title="查询表中的所有字段"></a>查询表中的所有字段</h3><p><code>SELECT * FROM employees;</code></p>
<h3 id="查询常量值"><a href="#查询常量值" class="headerlink" title="查询常量值"></a>查询常量值</h3><p><code>SELECT 100;</code><br><code>SELECT &#39;jhon&#39;;</code></p>
<h3 id="查询表达式"><a href="#查询表达式" class="headerlink" title="查询表达式"></a>查询表达式</h3><p><code>SELECT 100*98;</code></p>
<h3 id="查询函数"><a href="#查询函数" class="headerlink" title="查询函数"></a>查询函数</h3><p><code>SELECT VERSION();</code></p>
<h2 id="起别名"><a href="#起别名" class="headerlink" title="起别名"></a>起别名</h2><ol>
<li>便于理解</li>
<li>如果要查询的字段有重名的情况，使用别名可以区分开</li>
</ol>
<h3 id="方式一：使用AS"><a href="#方式一：使用AS" class="headerlink" title="方式一：使用AS"></a>方式一：使用AS</h3><p><code>SELECT 100%98 AS 结果;</code><br><code>SELECT last_name AS 姓,first_name AS 名 FROM employees;</code></p>
<h3 id="方式二：使用空格"><a href="#方式二：使用空格" class="headerlink" title="方式二：使用空格"></a>方式二：使用空格</h3><p><code>SELECT last_name 姓,first_name 名 FROM employees;</code></p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><ul>
<li>查询salary,显式结果为out put<br><code>SELECT salary AS &quot;out put&quot; FROM employees;</code></li>
</ul>
<h3 id="DISTINCT去重"><a href="#DISTINCT去重" class="headerlink" title="DISTINCT去重"></a>DISTINCT去重</h3><h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><ul>
<li>查询员工表中所有的部门编号<br><code>SELECT DISTINCT department_id FROM employees;</code></li>
</ul>
<h3 id="号的作用"><a href="#号的作用" class="headerlink" title="+号的作用"></a>+号的作用</h3><ul>
<li>仅仅只有一个功能：运算符</li>
</ul>
<ol>
<li><p>两个操作数都为数值型，则做加法运算：<code>select 100+50; </code></p>
</li>
<li><p>其中一方为字符型，试图将字符型数值转换成数值型，<br>如果转换成功则继续做加法运算<code>select &#39;123&#39;+90;</code><br>如果转换失败，则将字符型数组转换成0<code>elect &#39;jhon&#39;+90;    </code></p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">3.</span> 只要其中一方结果为<span class="literal">null</span>，则结果肯定为`<span class="literal">null</span>select <span class="literal">null</span>+<span class="number">10</span>;`</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>查询员工名和姓连接成一个字段，并显示为姓名</p>
<p><code>SELECT CONCAT(&#39;a&#39;,&#39;b&#39;,&#39;c&#39;) AS 结果；</code></p>
<p><code>SELECT CONCAT(last_name,first_name) AS 姓名 FROM employees;</code></p>
</li>
</ul>
<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><h3 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h3><p><code>elsect 查询列表 from 表名 where 筛选条件;</code></p>
<h4 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h4><ol>
<li>按条件表达式筛选<br>条件运算符：&gt; &lt; = &gt;= &lt;= &lt;&gt; !=</li>
<li>按逻辑表达式筛选<br>逻辑运算符：<pre><code>作用：用于连接条件表达式
&amp;&amp; || ！
and or not</code></pre>
</li>
<li>模糊查询：<br>like<pre><code>between and
in
is null</code></pre>
</li>
</ol>
<h3 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="headerlink" title="按条件表达式筛选"></a>按条件表达式筛选</h3><h4 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询工资&gt;12000的员工信息</p>
<p><code>SELECT * FROM employees WHERE salary&gt;12000;</code></p>
</li>
</ul>
<h4 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询部门编号不等于90号的员工名和部门编号</p>
<p><code>SELECT last_name,department_id </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE department_id&lt;&gt;90;</code></p>
</li>
</ul>
<h3 id="按逻辑表达式筛选"><a href="#按逻辑表达式筛选" class="headerlink" title="按逻辑表达式筛选"></a>按逻辑表达式筛选</h3><h4 id="案例一-1"><a href="#案例一-1" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询工资在10000-20000之间的员工名，工资以及奖金</p>
<p><code>SELECT last_name,salary,commission_pct </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE salary&gt;10000 AND salary&lt;20000;</code></p>
</li>
</ul>
<h4 id="案例二-1"><a href="#案例二-1" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询部门编号不是在90-110之间的，或者工资高于15000的员工信息</p>
<p><code>SELECT * </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE department_id&lt;90 OR department_id&gt;110 </code></p>
<p><code>OR salary&gt;15000;</code></p>
</li>
</ul>
<h2 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h2><p>like<br>between and<br>in<br>is null|is not null</p>
<h3 id="like"><a href="#like" class="headerlink" title="like"></a>like</h3><ul>
<li>特点：一般和通配符搭配使用</li>
<li>通配符%：任意多个字符</li>
<li>通配符_：任意单个字符</li>
</ul>
<h4 id="案例一-2"><a href="#案例一-2" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询员工名中包含字符a的员工信息</p>
<p><code>SELECT * FROM employees WHERE last_name LIKE &#39;%a%&#39;;</code></p>
</li>
</ul>
<h4 id="案例二-2"><a href="#案例二-2" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p>
<p><code>SELECT last_name,salary </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE last_name LIKE &#39;__e_a%&#39;;</code></p>
</li>
</ul>
<h4 id="案例三"><a href="#案例三" class="headerlink" title="案例三"></a>案例三</h4><ul>
<li><p>查询员工名中第二个字符为下划线的员工名</p>
<p><code>SELECT last_name </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE last_name LIKE &#39;_\_%&#39;;</code></p>
<p>或者</p>
<p><code>SELECT last_name </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE last_name LIKE &#39;_$_%&#39;</code></p>
<p><code>ESCAPE &#39;$&#39;;</code></p>
</li>
</ul>
<h3 id="in"><a href="#in" class="headerlink" title="in"></a>in</h3><ul>
<li>含义：判断某字段的值是否属于in列表中的一项</li>
<li>特点: <ol>
<li>使用in比使用or提高语句整洁度</li>
<li>in列表的值类型必须统一或兼容</li>
</ol>
</li>
</ul>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>查询员工的工种编号是IT_PROG,AD_VP,AD_PRES中的一个员工名的工种编号</p>
<p>使用or:</p>
<p><code>SELECT last_name,job_id </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE job_id=&#39;IT_PROG&#39; </code></p>
<p><code>OR job_id=&#39;AD_VP&#39; </code></p>
<p><code>OR job_id=&#39;AD_PRES&#39;;</code></p>
<p>使用in:</p>
<p><code>SELECT last_name,job_id </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE job_id </code></p>
<p><code>IN (&#39;IT_PROG&#39; ,&#39;AD_VP&#39; ,&#39;AD_PRES&#39;);</code></p>
</li>
</ul>
<h3 id="is-null"><a href="#is-null" class="headerlink" title="is null"></a>is null</h3><ul>
<li>=或&lt;&gt;不能用于判断null值</li>
<li>is null或is not null 可以判断null值</li>
</ul>
<h4 id="案例一-3"><a href="#案例一-3" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询没有奖金的员工名和奖金率</p>
<p><code>SELECT last_name,commission_pct </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE commission_pct IS NULL;</code></p>
</li>
</ul>
<h4 id="案例二-3"><a href="#案例二-3" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询有奖金的员工名和奖金率</p>
<p><code>SELECT last_name,commission_pct </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE commission_pct IS NOT NULL;</code></p>
</li>
</ul>
<h3 id="安全等于-lt-gt"><a href="#安全等于-lt-gt" class="headerlink" title="安全等于: &lt;=&gt;"></a>安全等于: &lt;=&gt;</h3><h4 id="案例一-4"><a href="#案例一-4" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询没有奖金的员工名和奖金率</p>
<p><code>SELECT last_name,commission_pct </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE commission_pct &lt;=&gt; NULL;</code></p>
</li>
</ul>
<h4 id="案例二-4"><a href="#案例二-4" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询工资为12000的员工信息</p>
<p><code>SELECT last_name,salary </code></p>
<p><code>FROM employees </code></p>
<p><code>WHERE salary &lt;=&gt; 12000;</code></p>
</li>
</ul>
<h2 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h2><h3 id="语法：-2"><a href="#语法：-2" class="headerlink" title="语法："></a>语法：</h3><p><code>selsect 查询列表 </code></p>
<p><code>from 【表 where 筛选条件】 </code></p>
<p><code>order by 排序列表 【asc|desc】</code></p>
<ul>
<li>特点：<ul>
<li>asc升序，desc降序<br>如果不写默认升序</li>
<li>order by 子句中可以支持单个字段，多个字段，表达式，函数，别名</li>
<li>order by 子句一般是放在查询语句的最后面，但limit子句除外</li>
</ul>
</li>
</ul>
<h4 id="案例一-5"><a href="#案例一-5" class="headerlink" title="案例一"></a>案例一</h4><ul>
<li><p>查询员工信息，要求工资从高到低排序</p>
<p><code>SELECT * FROM employees ORDER BY salary DESC;</code></p>
</li>
</ul>
<h4 id="案例二-5"><a href="#案例二-5" class="headerlink" title="案例二"></a>案例二</h4><ul>
<li><p>查询部门编号&gt;=90的员工信息，按入职时间先后进行排序</p>
<p><code>SELECT * FROM employees </code></p>
<p><code>WHERE department_id&gt;=90 </code></p>
<p><code>ORDER BY hiredate ASC;</code></p>
</li>
</ul>
<h4 id="案例三-1"><a href="#案例三-1" class="headerlink" title="案例三"></a>案例三</h4><ul>
<li><p>按年薪的高低显示员工的信息和年薪【按表达式排序】</p>
<p><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0)) AS 年薪 FROM employees  ORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC;</code></p>
</li>
</ul>
<h4 id="案例四"><a href="#案例四" class="headerlink" title="案例四"></a>案例四</h4><ul>
<li><p>按年薪的高低显示员工的信息和年薪【按别名排序】</p>
<p><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0)) AS 年薪 FROM employees  ORDER BY 年薪 DESC;</code></p>
</li>
</ul>
<h4 id="案例五"><a href="#案例五" class="headerlink" title="案例五"></a>案例五</h4><ul>
<li><p>按姓名的长度显示员工的姓名和工资【按函数排序】</p>
<p><code>SELECT LENGTH(last_name) 字节长度,last_name,salary FROM employees ORDER BY LENGTH(last_name) DESC;</code></p>
</li>
</ul>
<h4 id="案例六"><a href="#案例六" class="headerlink" title="案例六"></a>案例六</h4><ul>
<li><p>查询员工信息，要求先按工资升序排序，再按员工编号降序排序【按多个字段排序】</p>
<p><code>SELECT * FROM employees  ORDER BY salary ASC,employee_id DESC;</code></p>
</li>
</ul>
]]></content>
      <categories>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>无障碍化 导航栏与可展开按钮</title>
    <url>/2022/06/15/%E6%97%A0%E9%9A%9C%E7%A2%8D%E5%8C%96%20%E5%AF%BC%E8%88%AA%E6%A0%8F%E4%B8%8E%E5%8F%AF%E5%B1%95%E5%BC%80%E6%8C%89%E9%92%AE/</url>
    <content><![CDATA[<h1 id="无障碍化-导航栏与可展开按钮"><a href="#无障碍化-导航栏与可展开按钮" class="headerlink" title="无障碍化 导航栏与可展开按钮"></a>无障碍化 导航栏与可展开按钮</h1><p>测试工具：</p>
<ul>
<li>NVDA screen reader （Free screen reader for Windows）<a href="https://www.nvaccess.org/">NV Access</a></li>
<li>ChromeVox （Free chrome extension）<a href="https://chrome.google.com/webstore/detail/screen-reader/kgejglhpjiefppelpmljglcjbhoiplfn?hl=en">Screen Reader - Chrome Web Store (google.com)</a></li>
</ul>
<p>代码实现：</p>
<span id="more"></span>

<ul>
<li>对于导航栏，添加 nav 标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- nav标签 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/who&quot;</span>&gt;</span>Who am I<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/services&quot;</span>&gt;</span>Services<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>Contact<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对于可折叠 button</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可展开按钮 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span> <span class="attr">aria-controls</span>=<span class="string">&quot;sect1&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span></span><br><span class="line">      button</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;sect1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;region&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220731105155702.png" alt="image-20220731105155702"></p>
]]></content>
      <categories>
        <category>无障碍化</category>
      </categories>
      <tags>
        <tag>无障碍化</tag>
      </tags>
  </entry>
  <entry>
    <title>React Hooks 01</title>
    <url>/2022/05/09/React%20Hooks%2001/</url>
    <content><![CDATA[<h1 id="React-Hooks-01"><a href="#React-Hooks-01" class="headerlink" title="React Hooks 01"></a>React Hooks 01</h1><h2 id="useState"><a href="#useState" class="headerlink" title="useState()"></a>useState()</h2><p>用一个简单的 todolist demo 来演示 useState()的作用：</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220731233818028.png" alt="image-20220731233818028"></p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ToDoList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 初始化text与lists</span></span><br><span class="line">  <span class="keyword">const</span> [text, setText] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [lists, setLists] = useState([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">    setText(evt.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickAdd = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 不能使用push修改原数组，因为修改数组不会重新渲染页面</span></span><br><span class="line">    setLists([...lists, text]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清空input</span></span><br><span class="line">    setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickDelete = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 创建新数组接收lists</span></span><br><span class="line">    <span class="keyword">let</span> newLists = [...lists];</span><br><span class="line">    <span class="comment">// 根据id删除</span></span><br><span class="line">    newLists.splice(index, <span class="number">1</span>);</span><br><span class="line">    setLists(newLists);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input onChange=&#123;handleChange&#125; value=&#123;text&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClickAdd&#125;&gt;add to <span class="keyword">do</span> list&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;lists.map(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;div key=&#123;index&#125;&gt;</span><br><span class="line">              &lt;div&gt;&#123;value&#125;&lt;/div&gt;</span><br><span class="line">              &lt;button</span><br><span class="line">                onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  handleClickDelete(index);</span><br><span class="line">                &#125;&#125;</span><br><span class="line">              &gt;</span><br><span class="line">                <span class="keyword">delete</span></span><br><span class="line">              &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ToDoList;</span><br></pre></td></tr></table></figure>

<h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect()"></a>useEffect()</h2><p>可以代替类组件中的生命周期</p>
<p><img src="https://cdn.jsdelivr.net/gh/chiguayeshao/pic-bed/image-20220731234839234.png" alt="image-20220731234839234"></p>
<ol>
<li>当依赖数组为空数组的时候表示不依赖，useeffect 在渲染的时候只会执行一次</li>
<li>如果依赖数组中有依赖，当依赖值发生改变的时候，会重新执行 useEffect()</li>
</ol>
<p>代码演示：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ToDoList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 初始化text与lists</span></span><br><span class="line">  <span class="keyword">const</span> [text, setText] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> [lists, setLists] = useState([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">    setText(evt.target.value);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickAdd = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 不能使用push修改原数组，因为修改数组不会重新渲染页面</span></span><br><span class="line">    setLists([...lists, text]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清空input</span></span><br><span class="line">    setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickDelete = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 创建新数组接收lists</span></span><br><span class="line">    <span class="keyword">let</span> newLists = [...lists];</span><br><span class="line">    <span class="comment">// 根据id删除</span></span><br><span class="line">    newLists.splice(index, <span class="number">1</span>);</span><br><span class="line">    setLists(newLists);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 当lists发生改变的时候打印 fuck 996</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fuck 996&quot;</span>);</span><br><span class="line">  &#125;, [lists]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input onChange=&#123;handleChange&#125; value=&#123;text&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClickAdd&#125;&gt;add to <span class="keyword">do</span> list&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;lists.map(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;div key=&#123;index&#125;&gt;</span><br><span class="line">              &lt;div&gt;&#123;value&#125;&lt;/div&gt;</span><br><span class="line">              &lt;button</span><br><span class="line">                onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  handleClickDelete(index);</span><br><span class="line">                &#125;&#125;</span><br><span class="line">              &gt;</span><br><span class="line">                <span class="keyword">delete</span></span><br><span class="line">              &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ToDoList;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>useeffec()中的 return 回调函数，在没有依赖的时候，当组件销毁的时候执行，如果有依赖则每次依赖发生变化和组件销毁的时候执行</li>
</ol>
<p>代码演示</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// useeffect return</span></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;resize&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fuck&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;组件销毁时执行&quot;</span>);</span><br><span class="line">    <span class="built_in">window</span>.onresize = <span class="literal">null</span>;</span><br><span class="line">    timer = <span class="built_in">clearInterval</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure>

<h2 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect()"></a>useLayoutEffect()</h2><p>useEffect()与 useLayoutEffect()的区别</p>
<ol>
<li>useLayoutEffect()在 react 更新完 dom 树后会立即<strong>同步调用</strong>里面的代码，会阻塞页面渲染（渲染树）<ul>
<li>useEffect()在页面渲染完后才调用，因此一般情况 useEffect()效果更好</li>
</ul>
</li>
<li>如果做纯 dom 操作，推荐使用 useLayoutEffect()<ul>
<li><strong>避免抖动</strong>，在 useLayoutEffect()中做的 dom 操作会和 react 做出的更改一起被一次性渲染到页面，只有一次回流重绘的代价</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>React Hooks 02</title>
    <url>/2022/05/10/React%20Hooks%2002/</url>
    <content><![CDATA[<h1 id="React-Hooks-02"><a href="#React-Hooks-02" class="headerlink" title="React Hooks 02"></a>React Hooks 02</h1><h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback()"></a>useCallback()</h2><ol>
<li>记忆函数，防止因为组件渲染导致的函数重新创建，起到缓存作用</li>
<li>当依赖中的参数发生改变则会重新生命函数</li>
<li>当与之无关的状态发生改变的时候导致页面渲染，则不会重新声明函数</li>
</ol>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> handleChange = useCallback(<span class="function">(<span class="params">evt</span>) =&gt;</span> &#123;</span><br><span class="line">  setText(evt.target.value);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleClickAdd = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 不能使用push修改原数组，因为修改数组不会重新渲染页面</span></span><br><span class="line">  setLists([...lists, text]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 清空input</span></span><br><span class="line">  setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;, [lists, text]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleClickDelete = useCallback(</span><br><span class="line">  (index) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 创建新数组接收lists</span></span><br><span class="line">    <span class="keyword">let</span> newLists = [...lists];</span><br><span class="line">    <span class="comment">// 根据id删除</span></span><br><span class="line">    newLists.splice(index, <span class="number">1</span>);</span><br><span class="line">    setLists(newLists);</span><br><span class="line">  &#125;,</span><br><span class="line">  [lists]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>React Hooks 03</title>
    <url>/2022/05/11/React%20Hooks%2003/</url>
    <content><![CDATA[<h1 id="React-Hooks-03"><a href="#React-Hooks-03" class="headerlink" title="React Hooks 03"></a>React Hooks 03</h1><h2 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo()"></a>useMemo()</h2><p>记忆组件</p>
<p>与 useCallback()的区别</p>
<ol>
<li>useCallback()不会执行第一个参数函数，而是将它返回</li>
<li>useMemo()则是执行第一个函数参数，将函数的执行结果返回</li>
</ol>
<p>代码</p>
<span id="more"></span>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 给list增加996</span></span><br><span class="line"><span class="comment">// 没用memo的情况下，当别的状态改变的时候都重新触发该函数</span></span><br><span class="line"><span class="comment">// let list996 = lists.map((v) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&quot;fuck&quot;);</span></span><br><span class="line"><span class="comment">//   return v + &quot;996&quot;;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用memo的情况下</span></span><br><span class="line"><span class="comment">// 只有当依赖中的lists发生改变的时候，才会重新计算</span></span><br><span class="line"><span class="keyword">const</span> list996 = useMemo(</span><br><span class="line">  () =&gt;</span><br><span class="line">    lists.map(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> v + <span class="string">&quot;996&quot;</span>;</span><br><span class="line">    &#125;),</span><br><span class="line">  [lists]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>React Hooks 04</title>
    <url>/2022/05/12/React%20Hooks%2004/</url>
    <content><![CDATA[<h1 id="React-Hooks-04"><a href="#React-Hooks-04" class="headerlink" title="React Hooks 04"></a>React Hooks 04</h1><h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef()"></a>useRef()</h2><p>绑在 html 上保存 dom 节点</p>
<p>绑在组件上保存组件对象</p>
<p>代码：</p>
<span id="more"></span>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;</span><br><span class="line">  useCallback,</span><br><span class="line">  useEffect,</span><br><span class="line">  useMemo,</span><br><span class="line">  useRef,</span><br><span class="line">  useState,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ToDoList = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 初始化text与lists</span></span><br><span class="line">  <span class="comment">// const [text, setText] = useState(&quot;&quot;);</span></span><br><span class="line">  <span class="keyword">const</span> [lists, setLists] = useState([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> myText = useRef();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// const handleChange = useCallback((evt) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   setText(evt.target.value);</span></span><br><span class="line">  <span class="comment">// &#125;, []);</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickAdd = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// dom节点</span></span><br><span class="line">    <span class="built_in">console</span>.log(myText);</span><br><span class="line">    <span class="built_in">console</span>.log(myText.current.value);</span><br><span class="line">    setLists([...lists, myText.current.value]);</span><br><span class="line">    <span class="comment">// 不能使用push修改原数组，因为修改数组不会重新渲染页面</span></span><br><span class="line">    <span class="comment">// setLists([...lists, text]);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 清空input</span></span><br><span class="line">    <span class="comment">// setText(&quot;&quot;);</span></span><br><span class="line">    myText.current.value = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;, [lists]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClickDelete = useCallback(</span><br><span class="line">    (index) =&gt; &#123;</span><br><span class="line">      <span class="comment">// 创建新数组接收lists</span></span><br><span class="line">      <span class="keyword">let</span> newLists = [...lists];</span><br><span class="line">      <span class="comment">// 根据id删除</span></span><br><span class="line">      newLists.splice(index, <span class="number">1</span>);</span><br><span class="line">      setLists(newLists);</span><br><span class="line">    &#125;,</span><br><span class="line">    [lists]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 当lists发生改变的时候打印 fuck 996</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;fuck 996&quot;</span>);</span><br><span class="line">  &#125;, [lists]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// useeffect return</span></span><br><span class="line">  <span class="comment">// useEffect(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   window.onresize = () =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//     console.log(&quot;resize&quot;);</span></span><br><span class="line">  <span class="comment">//   &#125;;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//   let timer = setInterval(() =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//     console.log(&quot;fuck&quot;);</span></span><br><span class="line">  <span class="comment">//   &#125;, 1000);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//   // 闭包</span></span><br><span class="line">  <span class="comment">//   return () =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//     console.log(&quot;组件销毁时执行&quot;);</span></span><br><span class="line">  <span class="comment">//     window.onresize = null;</span></span><br><span class="line">  <span class="comment">//     timer = clearInterval;</span></span><br><span class="line">  <span class="comment">//   &#125;;</span></span><br><span class="line">  <span class="comment">// &#125;, []);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给list增加996</span></span><br><span class="line">  <span class="comment">// 没用memo的情况下，当别的状态改变的时候都重新触发该函数</span></span><br><span class="line">  <span class="comment">// let list996 = lists.map((v) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   console.log(&quot;fuck&quot;);</span></span><br><span class="line">  <span class="comment">//   return v + &quot;996&quot;;</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用memo的情况下</span></span><br><span class="line">  <span class="comment">// 只有当依赖中的lists发生改变的时候，才会重新计算</span></span><br><span class="line">  <span class="keyword">const</span> list996 = useMemo(</span><br><span class="line">    () =&gt;</span><br><span class="line">      lists.map(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> v + <span class="string">&quot;996&quot;</span>;</span><br><span class="line">      &#125;),</span><br><span class="line">    [lists]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;myText&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClickAdd&#125;&gt;add to <span class="keyword">do</span> list&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;list996.map(<span class="function">(<span class="params">value, index</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> (</span><br><span class="line">            &lt;div key=&#123;index&#125;&gt;</span><br><span class="line">              &lt;div&gt;&#123;value&#125;&lt;/div&gt;</span><br><span class="line">              &lt;button</span><br><span class="line">                onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                  handleClickDelete(index);</span><br><span class="line">                &#125;&#125;</span><br><span class="line">              &gt;</span><br><span class="line">                <span class="keyword">delete</span></span><br><span class="line">              &lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          );</span><br><span class="line">        &#125;)&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ToDoList;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
</search>
